/**
 * dijit - A version of dijit.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dijit/
 * @license MIT
 */
define(["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(t,e,i,s,n,r){var a=function(t){t=t||{};var e,s=i.getLocalization("dojo.cldr","number",i.normalizeLocale(t.locale)),n=t.pattern?t.pattern:s[(t.type||"decimal")+"Format"];return e="number"==typeof t.places?t.places:"string"==typeof t.places&&t.places.length>0?t.places.replace(/.*,/,""):-1!=n.indexOf(".")?n.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:s.decimal,places:e}},o=t("dijit.form.NumberTextBoxMixin",null,{pattern:function(t){return"("+(this.focused&&this.editOptions?this._regExpGenerator(e.delegate(t,this.editOptions))+"|":"")+this._regExpGenerator(t)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,_decimalInfo:a(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(t){var e="number"==typeof t.places?t.places:0;e&&e++,"number"!=typeof t.max&&(t.max=9*Math.pow(10,15-e)),"number"!=typeof t.min&&(t.min=-9*Math.pow(10,15-e)),this.inherited(arguments,[t]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=a(t)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var t=this.get("value");if("number"==typeof t&&!isNaN(t)){var e=this.format(t,this.constraints);void 0!==e&&(this.textbox.value=e)}this.inherited(arguments)}},format:function(t,i){var s=String(t);return"number"!=typeof t?s:isNaN(t)?"":"rangeCheck"in this&&this.rangeCheck(t,i)||!1===i.exponent||!/\de[-+]?\d/i.test(s)?(this.editOptions&&this.focused&&(i=e.mixin({},i,this.editOptions)),this._formatter(t,i)):s},_parser:n.parse,parse:function(t,i){var s=this._parser(t,e.mixin({},i,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(s)&&(s=this._parser(t,i)),s},_getDisplayedValueAttr:function(){var t=this.inherited(arguments);return isNaN(t)?this.textbox.value:t},filter:function(t){return null==t||"string"==typeof t&&""==t?NaN:("number"!=typeof t||isNaN(t)||0==t||(t=n.round(t,this._decimalInfo.places)),this.inherited(arguments,[t]))},serialize:function(t,e){return"number"!=typeof t||isNaN(t)?"":this.inherited(arguments)},_setBlurValue:function(){var t=e.hitch(e.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(t,!0)},_setValueAttr:function(t,e,i){void 0!==t&&void 0===i&&(i=String(t),"number"==typeof t?isNaN(t)?i="":("rangeCheck"in this&&this.rangeCheck(t,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(i))&&(i=void 0):t?t=void 0:(i="",t=NaN)),this.inherited(arguments,[t,e,i])},_getValueAttr:function(){var t=this.inherited(arguments);if(!isNaN(t)||""===this.textbox.value)return t;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+n._realNumberRegexp(e.delegate(this.constraints))+"$").test(this.textbox.value)){var i=Number(this.textbox.value);return isNaN(i)?void 0:i}},isValid:function(t){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var e=this.get("value");return!(isNaN(e)||!this.rangeCheck(e,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var t="number"==typeof this.constraints.min,e="number"==typeof this.constraints.max,i=this.get("value");if(isNaN(i)||!t&&!e)return this.inherited(arguments);var n=0|i,r=i<0,a=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),o=(this.maxLength||20)-this.textbox.value.length,h=a?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",u=a?n+"."+h:n+"",d=s.rep("9",o),l=i,c=i;return r?l=Number(u+d):c=Number(u+d),!(t&&c<this.constraints.min||e&&l>this.constraints.max)}}),h=t("dijit.form.NumberTextBox",[r,o],{baseClass:"dijitTextBox dijitNumberTextBox"});return h.Mixin=o,h});
//# sourceMappingURL=../sourcemaps/form/NumberTextBox.js.map
