{"version":3,"sources":["Editor.js"],"names":["define","require","array","declare","Deferred","i18n","domAttr","domClass","domGeometry","domStyle","keys","lang","has","string","topic","_Container","Toolbar","ToolbarSeparator","_LayoutWidget","ToggleButton","_Plugin","EnterKeyHandling","html","rangeapi","RichText","dijit","Editor","plugins","extraPlugins","constructor","isArray","this","_plugins","_editInterval","editActionInterval","events","push","postMixInProperties","setValueDeferred","inherited","arguments","postCreate","_steps","slice","_undoedSteps","concat","commands","getLocalization","set","domNode","startup","toolbar","ownerDocument","dir","aria-label","id","header","appendChild","forEach","addPlugin","resolve","add","iframe","parentNode","onNormalizedDisplayChanged","destroy","p","destroyRecursive","plugin","index","args","isString","name","isFunction","ctor","setEditor","o","editor","registry","publish","_scopeName","pc","getObject","e","Error","length","setToolbar","resize","size","prototype","apply","layout","areaHeight","_contentBox","h","getHeaderHeight","getFooterHeight","getPadBorderExtents","getMarginExtents","editingArea","style","height","_layoutMode","_onIEMouseDown","outsideClientArea","b","document","body","clientWidth","clientHeight","clientLeft","offsetWidth","offsetHeight","offsetLeft","test","x","y","_cursorToStart","_savedSelection","target","tagName","defer","onBeforeActivate","_restoreSelection","onBeforeDeactivate","customUndo","endEditing","_saveSelection","beginEditing","cmd","_inEditing","_beginEditing","_editTimer","remove","execCommand","r","_endEditing","_pasteImpl","_clipboardCommand","_cutImpl","_copyImpl","code","sub","substitute","alert","systemShortcut","cut","copy","paste","queryCommandEnabled","_moveToBookmark","sNode","eNode","sel","bookmark","mark","col","isCollapsed","n","getNode","editNode","selection","moveToBookmark","startContainer","endContainer","getSelection","window","removeAllRanges","create","setStart","startOffset","setEnd","endOffset","addRange","_changeToStep","from","to","setValue","text","undo","ret","_undoRedoActive","s","pop","focus","onDisplayChanged","redo","ignore_caret","_getBookmark","getBookmark","tmp","range","getIndex","rangeCount","getRangeAt","cloneRange","getChildrenHtml","v","onKeyDown","keyCode","TAB","tabIndent","k","ctrlKey","shiftKey","altKey","stopPropagation","preventDefault","ENTER","BACKSPACE","DELETE","metaKey","F1","F15","ALT","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","HOME","END","PAGE_UP","PAGE_DOWN","CTRL","SHIFT","_onBlur","onClick","replaceValue","isClosed","_setDisabledAttr","value","then","hitch","disabled","_buttonEnabledPlugins","_setStateClass","get","simplePluginFactory","command","togglePluginFactory","buttonClass","mixin","insertOrderedList","insertUnorderedList","indent","outdent","justifyCenter","justifyFull","justifyLeft","justifyRight","delete","selectAll","removeFormat","unlink","insertHorizontalRule","bold","italic","underline","strikethrough","subscript","superscript","|","button"],"mappings":"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","file":"../Editor.js","sourcesContent":["define([\r\n\t\"require\",\r\n\t\"dojo/_base/array\", // array.forEach\r\n\t\"dojo/_base/declare\", // declare\r\n\t\"dojo/Deferred\", // Deferred\r\n\t\"dojo/i18n\", // i18n.getLocalization\r\n\t\"dojo/dom-attr\", // domAttr.set\r\n\t\"dojo/dom-class\", // domClass.add\r\n\t\"dojo/dom-geometry\",\r\n\t\"dojo/dom-style\", // domStyle.set, get\r\n\t\"dojo/keys\", // keys.F1 keys.F15 keys.TAB\r\n\t\"dojo/_base/lang\", // lang.getObject lang.hitch\r\n\t\"dojo/sniff\", // has(\"ie\") has(\"mac\") has(\"webkit\")\r\n\t\"dojo/string\", // string.substitute\r\n\t\"dojo/topic\", // topic.publish()\r\n\t\"./_Container\",\r\n\t\"./Toolbar\",\r\n\t\"./ToolbarSeparator\",\r\n\t\"./layout/_LayoutWidget\",\r\n\t\"./form/ToggleButton\",\r\n\t\"./_editor/_Plugin\",\r\n\t\"./_editor/plugins/EnterKeyHandling\",\r\n\t\"./_editor/html\",\r\n\t\"./_editor/range\",\r\n\t\"./_editor/RichText\",\r\n\t\"./main\", // dijit._scopeName\r\n\t\"dojo/i18n!./_editor/nls/commands\"\r\n], function(require, array, declare, Deferred, i18n, domAttr, domClass, domGeometry, domStyle,\r\n\t\t\tkeys, lang, has, string, topic,\r\n\t\t\t_Container, Toolbar, ToolbarSeparator, _LayoutWidget, ToggleButton,\r\n\t\t\t_Plugin, EnterKeyHandling, html, rangeapi, RichText, dijit){\r\n\r\n\t// module:\r\n\t//\t\tdijit/Editor\r\n\r\n\tvar Editor = declare(\"dijit.Editor\", RichText, {\r\n\t\t// summary:\r\n\t\t//\t\tA rich text Editing widget\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tThis widget provides basic WYSIWYG editing features, based on the browser's\r\n\t\t//\t\tunderlying rich text editing capability, accompanied by a toolbar (`dijit.Toolbar`).\r\n\t\t//\t\tA plugin model is available to extend the editor's capabilities as well as the\r\n\t\t//\t\tthe options available in the toolbar.  Content generation may vary across\r\n\t\t//\t\tbrowsers, and clipboard operations may have different results, to name\r\n\t\t//\t\ta few limitations.  Note: this widget should not be used with the HTML\r\n\t\t//\t\t&lt;TEXTAREA&gt; tag -- see dijit/_editor/RichText for details.\r\n\r\n\t\t// plugins: [const] Object[]\r\n\t\t//\t\tA list of plugin names (as strings) or instances (as objects)\r\n\t\t//\t\tfor this widget.\r\n\t\t//\r\n\t\t//\t\tWhen declared in markup, it might look like:\r\n\t\t//\t|\tplugins=\"['bold',{name:'dijit._editor.plugins.FontChoice', command:'fontName', generic:true}]\"\r\n\t\tplugins: null,\r\n\r\n\t\t// extraPlugins: [const] Object[]\r\n\t\t//\t\tA list of extra plugin names which will be appended to plugins array\r\n\t\textraPlugins: null,\r\n\r\n\t\tconstructor: function(/*===== params, srcNodeRef =====*/){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCreate the widget.\r\n\t\t\t// params: Object|null\r\n\t\t\t//\t\tInitial settings for any of the attributes, except readonly attributes.\r\n\t\t\t// srcNodeRef: DOMNode\r\n\t\t\t//\t\tThe editor replaces the specified DOMNode.\r\n\r\n\t\t\tif(!lang.isArray(this.plugins)){\r\n\t\t\t\tthis.plugins = [\"undo\", \"redo\", \"|\", \"cut\", \"copy\", \"paste\", \"|\", \"bold\", \"italic\", \"underline\", \"strikethrough\", \"|\",\r\n\t\t\t\t\t\"insertOrderedList\", \"insertUnorderedList\", \"indent\", \"outdent\", \"|\", \"justifyLeft\", \"justifyRight\", \"justifyCenter\", \"justifyFull\",\r\n\t\t\t\t\tEnterKeyHandling /*, \"createLink\"*/];\r\n\t\t\t}\r\n\r\n\t\t\tthis._plugins = [];\r\n\t\t\tthis._editInterval = this.editActionInterval * 1000;\r\n\r\n\t\t\t//IE will always lose focus when other element gets focus, while for FF and safari,\r\n\t\t\t//when no iframe is used, focus will be lost whenever another element gets focus.\r\n\t\t\t//For IE, we can connect to onBeforeDeactivate, which will be called right before\r\n\t\t\t//the focus is lost, so we can obtain the selected range. For other browsers,\r\n\t\t\t//no equivalent of onBeforeDeactivate, so we need to do two things to make sure\r\n\t\t\t//selection is properly saved before focus is lost: 1) when user clicks another\r\n\t\t\t//element in the page, in which case we listen to mousedown on the entire page and\r\n\t\t\t//see whether user clicks out of a focus editor, if so, save selection (focus will\r\n\t\t\t//only lost after onmousedown event is fired, so we can obtain correct caret pos.)\r\n\t\t\t//2) when user tabs away from the editor, which is handled in onKeyDown below.\r\n\t\t\tif(has(\"ie\") || has(\"trident\")){\r\n\t\t\t\tthis.events.push(\"onBeforeDeactivate\");\r\n\t\t\t\tthis.events.push(\"onBeforeActivate\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpostMixInProperties: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\tExtension to make sure a deferred is in place before certain functions\r\n\t\t\t//\texecute, like making sure all the plugins are properly inserted.\r\n\r\n\t\t\t// Set up a deferred so that the value isn't applied to the editor\r\n\t\t\t// until all the plugins load, needed to avoid timing condition\r\n\t\t\t// reported in #10537.\r\n\t\t\tthis.setValueDeferred = new Deferred();\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\tpostCreate: function(){\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\t//for custom undo/redo, if enabled.\r\n\t\t\tthis._steps = this._steps.slice(0);\r\n\t\t\tthis._undoedSteps = this._undoedSteps.slice(0);\r\n\r\n\t\t\tif(lang.isArray(this.extraPlugins)){\r\n\t\t\t\tthis.plugins = this.plugins.concat(this.extraPlugins);\r\n\t\t\t}\r\n\r\n\t\t\tthis.commands = i18n.getLocalization(\"dijit._editor\", \"commands\", this.lang);\r\n\r\n\t\t\tif(has(\"webkit\")){\r\n\t\t\t\t// Disable selecting the entire editor by inadvertent double-clicks.\r\n\t\t\t\t// on buttons, title bar, etc.  Otherwise clicking too fast on\r\n\t\t\t\t// a button such as undo/redo selects the entire editor.\r\n\t\t\t\tdomStyle.set(this.domNode, \"KhtmlUserSelect\", \"none\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\tif(!this.toolbar){\r\n\t\t\t\t// if we haven't been assigned a toolbar, create one\r\n\t\t\t\tthis.toolbar = new Toolbar({\r\n\t\t\t\t\townerDocument: this.ownerDocument,\r\n\t\t\t\t\tdir: this.dir,\r\n\t\t\t\t\tlang: this.lang,\r\n\t\t\t\t\t\"aria-label\": this.id\r\n\t\t\t\t});\r\n\t\t\t\tthis.header.appendChild(this.toolbar.domNode);\r\n\t\t\t}\r\n\r\n\t\t\tarray.forEach(this.plugins, this.addPlugin, this);\r\n\r\n\t\t\t// Okay, denote the value can now be set.\r\n\t\t\tthis.setValueDeferred.resolve(true);\r\n\r\n\t\t\tdomClass.add(this.iframe.parentNode, \"dijitEditorIFrameContainer\");\r\n\t\t\tdomClass.add(this.iframe, \"dijitEditorIFrame\");\r\n\t\t\tdomAttr.set(this.iframe, \"allowTransparency\", true);\r\n\r\n\t\t\tthis.toolbar.startup();\r\n\t\t\tthis.onNormalizedDisplayChanged(); //update toolbar button status\r\n\t\t},\r\n\r\n\t\tdestroy: function(){\r\n\t\t\tarray.forEach(this._plugins, function(p){\r\n\t\t\t\tif(p && p.destroy){\r\n\t\t\t\t\tp.destroy();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._plugins = [];\r\n\t\t\tthis.toolbar.destroyRecursive();\r\n\t\t\tdelete this.toolbar;\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\t\taddPlugin: function(/*String||Object||Function*/ plugin, /*Integer?*/ index){\r\n\t\t\t// summary:\r\n\t\t\t//\t\ttakes a plugin name as a string or a plugin instance and\r\n\t\t\t//\t\tadds it to the toolbar and associates it with this editor\r\n\t\t\t//\t\tinstance. The resulting plugin is added to the Editor's\r\n\t\t\t//\t\tplugins array. If index is passed, it's placed in the plugins\r\n\t\t\t//\t\tarray at that index. No big magic, but a nice helper for\r\n\t\t\t//\t\tpassing in plugin names via markup.\r\n\t\t\t// plugin:\r\n\t\t\t//\t\tString, args object, plugin instance, or plugin constructor\r\n\t\t\t// args:\r\n\t\t\t//\t\tThis object will be passed to the plugin constructor\r\n\t\t\t// index:\r\n\t\t\t//\t\tUsed when creating an instance from\r\n\t\t\t//\t\tsomething already in this.plugins. Ensures that the new\r\n\t\t\t//\t\tinstance is assigned to this.plugins at that index.\r\n\t\t\tvar args = lang.isString(plugin) ? {name: plugin} : lang.isFunction(plugin) ? {ctor: plugin} : plugin;\r\n\t\t\tif(!args.setEditor){\r\n\t\t\t\tvar o = {\"args\": args, \"plugin\": null, \"editor\": this};\r\n\t\t\t\tif(args.name){\r\n\t\t\t\t\t// search registry for a plugin factory matching args.name, if it's not there then\r\n\t\t\t\t\t// fallback to 1.0 API:\r\n\t\t\t\t\t// ask all loaded plugin modules to fill in o.plugin if they can (ie, if they implement args.name)\r\n\t\t\t\t\t// remove fallback for 2.0.\r\n\t\t\t\t\tif(_Plugin.registry[args.name]){\r\n\t\t\t\t\t\to.plugin = _Plugin.registry[args.name](args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttopic.publish(dijit._scopeName + \".Editor.getPlugin\", o);\t// publish\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!o.plugin){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\t// TODO: remove lang.getObject() call in 2.0\r\n\t\t\t\t\t\tvar pc = args.ctor || lang.getObject(args.name) || require(args.name);\r\n\t\t\t\t\t\tif(pc){\r\n\t\t\t\t\t\t\to.plugin = new pc(args);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tthrow new Error(this.id + \": cannot find plugin [\" + args.name + \"]\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!o.plugin){\r\n\t\t\t\t\tthrow new Error(this.id + \": cannot find plugin [\" + args.name + \"]\");\r\n\t\t\t\t}\r\n\t\t\t\tplugin = o.plugin;\r\n\t\t\t}\r\n\t\t\tif(arguments.length > 1){\r\n\t\t\t\tthis._plugins[index] = plugin;\r\n\t\t\t}else{\r\n\t\t\t\tthis._plugins.push(plugin);\r\n\t\t\t}\r\n\t\t\tplugin.setEditor(this);\r\n\t\t\tif(lang.isFunction(plugin.setToolbar)){\r\n\t\t\t\tplugin.setToolbar(this.toolbar);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//the following 2 functions are required to make the editor play nice under a layout widget, see #4070\r\n\r\n\t\tresize: function(size){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResize the editor to the specified size, see `dijit/layout/_LayoutWidget.resize()`\r\n\t\t\tif(size){\r\n\t\t\t\t// we've been given a height/width for the entire editor (toolbar + contents), calls layout()\r\n\t\t\t\t// to split the allocated size between the toolbar and the contents\r\n\t\t\t\t_LayoutWidget.prototype.resize.apply(this, arguments);\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t else{\r\n\t\t\t // do nothing, the editor is already laid out correctly.   The user has probably specified\r\n\t\t\t // the height parameter, which was used to set a size on the iframe\r\n\t\t\t }\r\n\t\t\t */\r\n\t\t},\r\n\t\tlayout: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled from `dijit/layout/_LayoutWidget.resize()`.  This shouldn't be called directly\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\r\n\t\t\t// Converts the iframe (or rather the <div> surrounding it) to take all the available space\r\n\t\t\t// except what's needed for the header (toolbars) and footer (breadcrumbs, etc).\r\n\t\t\t// A class was added to the iframe container and some themes style it, so we have to\r\n\t\t\t// calc off the added margins and padding too. See tracker: #10662\r\n\t\t\tvar areaHeight = (this._contentBox.h -\r\n\t\t\t\t(this.getHeaderHeight() + this.getFooterHeight() +\r\n\t\t\t\t\tdomGeometry.getPadBorderExtents(this.iframe.parentNode).h +\r\n\t\t\t\t\tdomGeometry.getMarginExtents(this.iframe.parentNode).h));\r\n\t\t\tthis.editingArea.style.height = areaHeight + \"px\";\r\n\t\t\tif(this.iframe){\r\n\t\t\t\tthis.iframe.style.height = \"100%\";\r\n\t\t\t}\r\n\t\t\tthis._layoutMode = true;\r\n\t\t},\r\n\r\n\t\t_onIEMouseDown: function(/*Event*/ e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tIE only to prevent 2 clicks to focus\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar outsideClientArea;\r\n\t\t\t// IE 8's componentFromPoint is broken, which is a shame since it\r\n\t\t\t// was smaller code, but oh well.  We have to do this brute force\r\n\t\t\t// to detect if the click was scroller or not.\r\n\t\t\tvar b = this.document.body;\r\n\t\t\tvar clientWidth = b.clientWidth;\r\n\t\t\tvar clientHeight = b.clientHeight;\r\n\t\t\tvar clientLeft = b.clientLeft;\r\n\t\t\tvar offsetWidth = b.offsetWidth;\r\n\t\t\tvar offsetHeight = b.offsetHeight;\r\n\t\t\tvar offsetLeft = b.offsetLeft;\r\n\r\n\t\t\t//Check for vertical scroller click.\r\n\t\t\tif(/^rtl$/i.test(b.dir || \"\")){\r\n\t\t\t\tif(clientWidth < offsetWidth && e.x > clientWidth && e.x < offsetWidth){\r\n\t\t\t\t\t// Check the click was between width and offset width, if so, scroller\r\n\t\t\t\t\toutsideClientArea = true;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// RTL mode, we have to go by the left offsets.\r\n\t\t\t\tif(e.x < clientLeft && e.x > offsetLeft){\r\n\t\t\t\t\t// Check the click was between width and offset width, if so, scroller\r\n\t\t\t\t\toutsideClientArea = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!outsideClientArea){\r\n\t\t\t\t// Okay, might be horiz scroller, check that.\r\n\t\t\t\tif(clientHeight < offsetHeight && e.y > clientHeight && e.y < offsetHeight){\r\n\t\t\t\t\t// Horizontal scroller.\r\n\t\t\t\t\toutsideClientArea = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!outsideClientArea){\r\n\t\t\t\tdelete this._cursorToStart; // Remove the force to cursor to start position.\r\n\t\t\t\tdelete this._savedSelection; // new mouse position overrides old selection\r\n\t\t\t\tif(e.target.tagName == \"BODY\"){\r\n\t\t\t\t\tthis.defer(\"placeCursorAtEnd\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.inherited(arguments);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeActivate: function(){\r\n\t\t\tthis._restoreSelection();\r\n\t\t},\r\n\t\tonBeforeDeactivate: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled on IE right before focus is lost.   Saves the selected range.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(this.customUndo){\r\n\t\t\t\tthis.endEditing(true);\r\n\t\t\t}\r\n\t\t\t//in IE, the selection will be lost when other elements get focus,\r\n\t\t\t//let's save focus before the editor is deactivated\r\n\t\t\tif(e.target.tagName != \"BODY\"){\r\n\t\t\t\tthis._saveSelection();\r\n\t\t\t}\r\n\t\t\t//console.log('onBeforeDeactivate',this);\r\n\t\t},\r\n\r\n\t\t/* beginning of custom undo/redo support */\r\n\r\n\t\t// customUndo: Boolean\r\n\t\t//\t\tWhether we shall use custom undo/redo support instead of the native\r\n\t\t//\t\tbrowser support. By default, we now use custom undo.  It works better\r\n\t\t//\t\tthan native browser support and provides a consistent behavior across\r\n\t\t//\t\tbrowsers with a minimal performance hit.  We already had the hit on\r\n\t\t//\t\tthe slowest browser, IE, anyway.\r\n\t\tcustomUndo: true,\r\n\r\n\t\t// editActionInterval: Integer\r\n\t\t//\t\tWhen using customUndo, not every keystroke will be saved as a step.\r\n\t\t//\t\tInstead typing (including delete) will be grouped together: after\r\n\t\t//\t\ta user stops typing for editActionInterval seconds, a step will be\r\n\t\t//\t\tsaved; if a user resume typing within editActionInterval seconds,\r\n\t\t//\t\tthe timeout will be restarted. By default, editActionInterval is 3\r\n\t\t//\t\tseconds.\r\n\t\teditActionInterval: 3,\r\n\r\n\t\tbeginEditing: function(cmd){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled to note that the user has started typing alphanumeric characters, if it's not already noted.\r\n\t\t\t//\t\tDeals with saving undo; see editActionInterval parameter.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(!this._inEditing){\r\n\t\t\t\tthis._inEditing = true;\r\n\t\t\t\tthis._beginEditing(cmd);\r\n\t\t\t}\r\n\t\t\tif(this.editActionInterval > 0){\r\n\t\t\t\tif(this._editTimer){\r\n\t\t\t\t\tthis._editTimer.remove();\r\n\t\t\t\t}\r\n\t\t\t\tthis._editTimer = this.defer(\"endEditing\", this._editInterval);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// TODO: declaring these in the prototype is meaningless, just create in the constructor/postCreate\r\n\t\t_steps: [],\r\n\t\t_undoedSteps: [],\r\n\r\n\t\texecCommand: function(cmd){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tMain handler for executing any commands to the editor, like paste, bold, etc.\r\n\t\t\t//\t\tCalled by plugins, but not meant to be called by end users.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\t\tif(this.customUndo && (cmd == 'undo' || cmd == 'redo')){\r\n\t\t\t\treturn this[cmd]();\r\n\t\t\t}else{\r\n\t\t\t\tif(this.customUndo){\r\n\t\t\t\t\tthis.endEditing();\r\n\t\t\t\t\tthis._beginEditing();\r\n\t\t\t\t}\r\n\t\t\t\tvar r = this.inherited(arguments);\r\n\t\t\t\tif(this.customUndo){\r\n\t\t\t\t\tthis._endEditing();\r\n\t\t\t\t}\r\n\t\t\t\treturn r;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_pasteImpl: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOver-ride of paste command control to make execCommand cleaner\r\n\t\t\t// tags:\r\n\t\t\t//\t\tProtected\r\n\t\t\treturn this._clipboardCommand(\"paste\");\r\n\t\t},\r\n\r\n\t\t_cutImpl: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOver-ride of cut command control to make execCommand cleaner\r\n\t\t\t// tags:\r\n\t\t\t//\t\tProtected\r\n\t\t\treturn this._clipboardCommand(\"cut\");\r\n\t\t},\r\n\r\n\t\t_copyImpl: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOver-ride of copy command control to make execCommand cleaner\r\n\t\t\t// tags:\r\n\t\t\t//\t\tProtected\r\n\t\t\treturn this._clipboardCommand(\"copy\");\r\n\t\t},\r\n\r\n\t\t_clipboardCommand: function(cmd){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tFunction to handle processing clipboard commands (or at least try to).\r\n\t\t\t// tags:\r\n\t\t\t//\t\tPrivate\r\n\t\t\tvar r;\r\n\t\t\ttry{\r\n\t\t\t\t// Try to exec the superclass exec-command and see if it works.\r\n\t\t\t\tr = this.document.execCommand(cmd, false, null);\r\n\t\t\t\tif(has(\"webkit\") && !r){ //see #4598: webkit does not guarantee clipboard support from js\r\n\t\t\t\t\tthrow { code: 1011 }; // throw an object like Mozilla's error\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\t//TODO: when else might we get an exception?  Do we need the Mozilla test below?\r\n\t\t\t\tif(e.code == 1011 /* Mozilla: service denied */ ||\r\n\t\t\t\t\t(e.code == 9 && has(\"opera\") /* Opera not supported */)){\r\n\t\t\t\t\t// Warn user of platform limitation.  Cannot programmatically access clipboard. See ticket #4136\r\n\t\t\t\t\tvar sub = string.substitute,\r\n\t\t\t\t\t\taccel = {cut: 'X', copy: 'C', paste: 'V'};\r\n\t\t\t\t\talert(sub(this.commands.systemShortcut,\r\n\t\t\t\t\t\t[this.commands[cmd], sub(this.commands[has(\"mac\") ? 'appleKey' : 'ctrlKey'], [accel[cmd]])]));\r\n\t\t\t\t}\r\n\t\t\t\tr = false;\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t},\r\n\r\n\t\tqueryCommandEnabled: function(cmd){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReturns true if specified editor command is enabled.\r\n\t\t\t//\t\tUsed by the plugins to know when to highlight/not highlight buttons.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\t\tif(this.customUndo && (cmd == 'undo' || cmd == 'redo')){\r\n\t\t\t\treturn cmd == 'undo' ? (this._steps.length > 1) : (this._undoedSteps.length > 0);\r\n\t\t\t}else{\r\n\t\t\t\treturn this.inherited(arguments);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_moveToBookmark: function(b){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSelects the text specified in bookmark b\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar bookmark = b.mark;\r\n\t\t\tvar mark = b.mark;\r\n\t\t\tvar col = b.isCollapsed;\r\n\t\t\tvar r, sNode, eNode, sel;\r\n\t\t\tif(mark){\r\n\t\t\t\tif(has(\"ie\") < 9 || (has(\"ie\") === 9 && has(\"quirks\"))){\r\n\t\t\t\t\tif(lang.isArray(mark)){\r\n\t\t\t\t\t\t// IE CONTROL, have to use the native bookmark.\r\n\t\t\t\t\t\tbookmark = [];\r\n\t\t\t\t\t\tarray.forEach(mark, function(n){\r\n\t\t\t\t\t\t\tbookmark.push(rangeapi.getNode(n, this.editNode));\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\tthis.selection.moveToBookmark({mark: bookmark, isCollapsed: col});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(mark.startContainer && mark.endContainer){\r\n\t\t\t\t\t\t\t// Use the pseudo WC3 range API.  This works better for positions\r\n\t\t\t\t\t\t\t// than the IE native bookmark code.\r\n\t\t\t\t\t\t\tsel = rangeapi.getSelection(this.window);\r\n\t\t\t\t\t\t\tif(sel && sel.removeAllRanges){\r\n\t\t\t\t\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\t\t\t\t\tr = rangeapi.create(this.window);\r\n\t\t\t\t\t\t\t\tsNode = rangeapi.getNode(mark.startContainer, this.editNode);\r\n\t\t\t\t\t\t\t\teNode = rangeapi.getNode(mark.endContainer, this.editNode);\r\n\t\t\t\t\t\t\t\tif(sNode && eNode){\r\n\t\t\t\t\t\t\t\t\t// Okay, we believe we found the position, so add it into the selection\r\n\t\t\t\t\t\t\t\t\t// There are cases where it may not be found, particularly in undo/redo, when\r\n\t\t\t\t\t\t\t\t\t// IE changes the underlying DOM on us (wraps text in a <p> tag or similar.\r\n\t\t\t\t\t\t\t\t\t// So, in those cases, don't bother restoring selection.\r\n\t\t\t\t\t\t\t\t\tr.setStart(sNode, mark.startOffset);\r\n\t\t\t\t\t\t\t\t\tr.setEnd(eNode, mark.endOffset);\r\n\t\t\t\t\t\t\t\t\tsel.addRange(r);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{//w3c range\r\n\t\t\t\t\tsel = rangeapi.getSelection(this.window);\r\n\t\t\t\t\tif(sel && sel.removeAllRanges){\r\n\t\t\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\t\t\tr = rangeapi.create(this.window);\r\n\t\t\t\t\t\tsNode = rangeapi.getNode(mark.startContainer, this.editNode);\r\n\t\t\t\t\t\teNode = rangeapi.getNode(mark.endContainer, this.editNode);\r\n\t\t\t\t\t\tif(sNode && eNode){\r\n\t\t\t\t\t\t\t// Okay, we believe we found the position, so add it into the selection\r\n\t\t\t\t\t\t\t// There are cases where it may not be found, particularly in undo/redo, when\r\n\t\t\t\t\t\t\t// formatting as been done and so on, so don't restore selection then.\r\n\t\t\t\t\t\t\tr.setStart(sNode, mark.startOffset);\r\n\t\t\t\t\t\t\tr.setEnd(eNode, mark.endOffset);\r\n\t\t\t\t\t\t\tsel.addRange(r);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_changeToStep: function(from, to){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tReverts editor to \"to\" setting, from the undo stack.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tthis.setValue(to.text);\r\n\t\t\tvar b = to.bookmark;\r\n\t\t\tif(!b){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._moveToBookmark(b);\r\n\t\t},\r\n\t\tundo: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandler for editor undo (ex: ctrl-z) operation\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar ret = false;\r\n\t\t\tif(!this._undoRedoActive){\r\n\t\t\t\tthis._undoRedoActive = true;\r\n\t\t\t\tthis.endEditing(true);\r\n\t\t\t\tvar s = this._steps.pop();\r\n\t\t\t\tif(s && this._steps.length > 0){\r\n\t\t\t\t\tthis.focus();\r\n\t\t\t\t\tthis._changeToStep(s, this._steps[this._steps.length - 1]);\r\n\t\t\t\t\tthis._undoedSteps.push(s);\r\n\t\t\t\t\tthis.onDisplayChanged();\r\n\t\t\t\t\tdelete this._undoRedoActive;\r\n\t\t\t\t\tret = true;\r\n\t\t\t\t}\r\n\t\t\t\tdelete this._undoRedoActive;\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\tredo: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandler for editor redo (ex: ctrl-y) operation\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tvar ret = false;\r\n\t\t\tif(!this._undoRedoActive){\r\n\t\t\t\tthis._undoRedoActive = true;\r\n\t\t\t\tthis.endEditing(true);\r\n\t\t\t\tvar s = this._undoedSteps.pop();\r\n\t\t\t\tif(s && this._steps.length > 0){\r\n\t\t\t\t\tthis.focus();\r\n\t\t\t\t\tthis._changeToStep(this._steps[this._steps.length - 1], s);\r\n\t\t\t\t\tthis._steps.push(s);\r\n\t\t\t\t\tthis.onDisplayChanged();\r\n\t\t\t\t\tret = true;\r\n\t\t\t\t}\r\n\t\t\t\tdelete this._undoRedoActive;\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\tendEditing: function(ignore_caret){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled to note that the user has stopped typing alphanumeric characters, if it's not already noted.\r\n\t\t\t//\t\tDeals with saving undo; see editActionInterval parameter.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(this._editTimer){\r\n\t\t\t\tthis._editTimer = this._editTimer.remove();\r\n\t\t\t}\r\n\t\t\tif(this._inEditing){\r\n\t\t\t\tthis._endEditing(ignore_caret);\r\n\t\t\t\tthis._inEditing = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_getBookmark: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGet the currently selected text\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\t\tvar b = this.selection.getBookmark();\r\n\t\t\tvar tmp = [];\r\n\t\t\tif(b && b.mark){\r\n\t\t\t\tvar mark = b.mark;\r\n\t\t\t\tif(has(\"ie\") < 9 || (has(\"ie\") === 9 && has(\"quirks\"))){\r\n\t\t\t\t\t// Try to use the pseudo range API on IE for better accuracy.\r\n\t\t\t\t\tvar sel = rangeapi.getSelection(this.window);\r\n\t\t\t\t\tif(!lang.isArray(mark)){\r\n\t\t\t\t\t\tif(sel){\r\n\t\t\t\t\t\t\tvar range;\r\n\t\t\t\t\t\t\tif(sel.rangeCount){\r\n\t\t\t\t\t\t\t\trange = sel.getRangeAt(0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(range){\r\n\t\t\t\t\t\t\t\tb.mark = range.cloneRange();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tb.mark = this.selection.getBookmark();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// Control ranges (img, table, etc), handle differently.\r\n\t\t\t\t\t\tarray.forEach(b.mark, function(n){\r\n\t\t\t\t\t\t\ttmp.push(rangeapi.getIndex(n, this.editNode).o);\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\tb.mark = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif(b.mark && b.mark.startContainer){\r\n\t\t\t\t\t\ttmp = rangeapi.getIndex(b.mark.startContainer, this.editNode).o;\r\n\t\t\t\t\t\tb.mark = {startContainer: tmp,\r\n\t\t\t\t\t\t\tstartOffset: b.mark.startOffset,\r\n\t\t\t\t\t\t\tendContainer: b.mark.endContainer === b.mark.startContainer ? tmp : rangeapi.getIndex(b.mark.endContainer, this.editNode).o,\r\n\t\t\t\t\t\t\tendOffset: b.mark.endOffset};\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tb.mark = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn b;\r\n\t\t},\r\n\t\t_beginEditing: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when the user starts typing alphanumeric characters.\r\n\t\t\t//\t\tDeals with saving undo; see editActionInterval parameter.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(this._steps.length === 0){\r\n\t\t\t\t// You want to use the editor content without post filtering\r\n\t\t\t\t// to make sure selection restores right for the 'initial' state.\r\n\t\t\t\t// and undo is called.  So not using this.value, as it was 'processed'\r\n\t\t\t\t// and the line-up for selections may have been altered.\r\n\t\t\t\tthis._steps.push({'text': html.getChildrenHtml(this.editNode), 'bookmark': this._getBookmark()});\r\n\t\t\t}\r\n\t\t},\r\n\t\t_endEditing: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled when the user stops typing alphanumeric characters.\r\n\t\t\t//\t\tDeals with saving undo; see editActionInterval parameter.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\t// Avoid filtering to make sure selections restore.\r\n\t\t\tvar v = html.getChildrenHtml(this.editNode);\r\n\r\n\t\t\tthis._undoedSteps = [];//clear undoed steps\r\n\t\t\tthis._steps.push({text: v, bookmark: this._getBookmark()});\r\n\t\t},\r\n\t\tonKeyDown: function(e){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandler for onkeydown event.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\r\n\t\t\t//We need to save selection if the user TAB away from this editor\r\n\t\t\t//no need to call _saveSelection for IE, as that will be taken care of in onBeforeDeactivate\r\n\t\t\tif(!has(\"ie\") && !this.iframe && e.keyCode == keys.TAB && !this.tabIndent){\r\n\t\t\t\tthis._saveSelection();\r\n\t\t\t}\r\n\t\t\tif(!this.customUndo){\r\n\t\t\t\tthis.inherited(arguments);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar k = e.keyCode;\r\n\t\t\tif(e.ctrlKey && !e.shiftKey && !e.altKey){//undo and redo only if the special right Alt + z/y are not pressed #5892\r\n\t\t\t\tif(k == 90 || k == 122){ //z, but also F11 key\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.undo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(k == 89 || k == 121){ //y\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.redo();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\tswitch(k){\r\n\t\t\t\tcase keys.ENTER:\r\n\t\t\t\tcase keys.BACKSPACE:\r\n\t\t\t\tcase keys.DELETE:\r\n\t\t\t\t\tthis.beginEditing();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 88: //x\r\n\t\t\t\tcase 86: //v\r\n\t\t\t\t\tif(e.ctrlKey && !e.altKey && !e.metaKey){\r\n\t\t\t\t\t\tthis.endEditing();//end current typing step if any\r\n\t\t\t\t\t\tif(e.keyCode == 88){\r\n\t\t\t\t\t\t\tthis.beginEditing('cut');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.beginEditing('paste');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//use timeout to trigger after the paste is complete\r\n\t\t\t\t\t\tthis.defer(\"endEditing\", 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t//pass through\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(!e.ctrlKey && !e.altKey && !e.metaKey && (e.keyCode < keys.F1 || e.keyCode > keys.F15)){\r\n\t\t\t\t\t\tthis.beginEditing();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t//pass through\r\n\t\t\t\tcase keys.ALT:\r\n\t\t\t\t\tthis.endEditing();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keys.UP_ARROW:\r\n\t\t\t\tcase keys.DOWN_ARROW:\r\n\t\t\t\tcase keys.LEFT_ARROW:\r\n\t\t\t\tcase keys.RIGHT_ARROW:\r\n\t\t\t\tcase keys.HOME:\r\n\t\t\t\tcase keys.END:\r\n\t\t\t\tcase keys.PAGE_UP:\r\n\t\t\t\tcase keys.PAGE_DOWN:\r\n\t\t\t\t\tthis.endEditing(true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//maybe ctrl+backspace/delete, so don't endEditing when ctrl is pressed\r\n\t\t\t\tcase keys.CTRL:\r\n\t\t\t\tcase keys.SHIFT:\r\n\t\t\t\tcase keys.TAB:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_onBlur: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tCalled from focus manager when focus has moved away from this editor\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\r\n\t\t\t//this._saveSelection();\r\n\t\t\tthis.inherited(arguments);\r\n\t\t\tthis.endEditing(true);\r\n\t\t},\r\n\t\t_saveSelection: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tSave the currently selected text in _savedSelection attribute\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\ttry{\r\n\t\t\t\tthis._savedSelection = this._getBookmark();\r\n\t\t\t}catch(e){ /* Squelch any errors that occur if selection save occurs due to being hidden simultaneously. */\r\n\t\t\t}\r\n\t\t},\r\n\t\t_restoreSelection: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tRe-select the text specified in _savedSelection attribute;\r\n\t\t\t//\t\tsee _saveSelection().\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprivate\r\n\t\t\tif(this._savedSelection){\r\n\t\t\t\t// Clear off cursor to start, we're deliberately going to a selection.\r\n\t\t\t\tdelete this._cursorToStart;\r\n\t\t\t\t// only restore the selection if the current range is collapsed\r\n\t\t\t\t// if not collapsed, then it means the editor does not lose\r\n\t\t\t\t// selection and there is no need to restore it\r\n\t\t\t\tif(this.selection.isCollapsed()){\r\n\t\t\t\t\tthis._moveToBookmark(this._savedSelection);\r\n\t\t\t\t}\r\n\t\t\t\tdelete this._savedSelection;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClick: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tHandler for when editor is clicked\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\t\tthis.endEditing(true);\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\treplaceValue: function(/*String*/ html){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tover-ride of replaceValue to support custom undo and stack maintenance.\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\t\t\tif(!this.customUndo){\r\n\t\t\t\tthis.inherited(arguments);\r\n\t\t\t}else{\r\n\t\t\t\tif(this.isClosed){\r\n\t\t\t\t\tthis.setValue(html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.beginEditing();\r\n\t\t\t\t\tif(!html){\r\n\t\t\t\t\t\thtml = \"&#160;\";\t// &nbsp;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setValue(html);\r\n\t\t\t\t\tthis.endEditing();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setDisabledAttr: function(/*Boolean*/ value){\r\n\t\t\tthis.setValueDeferred.then(lang.hitch(this, function(){\r\n\t\t\t\tif((!this.disabled && value) || (!this._buttonEnabledPlugins && value)){\r\n\t\t\t\t\t// Disable editor: disable all enabled buttons and remember that list\r\n\t\t\t\t\tarray.forEach(this._plugins, function(p){\r\n\t\t\t\t\t\tp.set(\"disabled\", true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(this.disabled && !value){\r\n\t\t\t\t\t// Restore plugins to being active.\r\n\t\t\t\t\tarray.forEach(this._plugins, function(p){\r\n\t\t\t\t\t\tp.set(\"disabled\", false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t\tthis.inherited(arguments);\r\n\t\t},\r\n\r\n\t\t_setStateClass: function(){\r\n\t\t\ttry{\r\n\t\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\t\t// Let theme set the editor's text color based on editor enabled/disabled state.\r\n\t\t\t\t// We need to jump through hoops because the main document (where the theme CSS is)\r\n\t\t\t\t// is separate from the iframe's document.\r\n\t\t\t\tif(this.document && this.document.body){\r\n\t\t\t\t\tdomStyle.set(this.document.body, \"color\", domStyle.get(this.iframe, \"color\"));\r\n\t\t\t\t}\r\n\t\t\t}catch(e){ /* Squelch any errors caused by focus change if hidden during a state change */\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Register the \"default plugins\", ie, the built-in editor commands\r\n\tfunction simplePluginFactory(args){\r\n\t\treturn new _Plugin({ command: args.name });\r\n\t}\r\n\r\n\tfunction togglePluginFactory(args){\r\n\t\treturn new _Plugin({ buttonClass: ToggleButton, command: args.name });\r\n\t}\r\n\r\n\tlang.mixin(_Plugin.registry, {\r\n\t\t\"undo\": simplePluginFactory,\r\n\t\t\"redo\": simplePluginFactory,\r\n\t\t\"cut\": simplePluginFactory,\r\n\t\t\"copy\": simplePluginFactory,\r\n\t\t\"paste\": simplePluginFactory,\r\n\t\t\"insertOrderedList\": simplePluginFactory,\r\n\t\t\"insertUnorderedList\": simplePluginFactory,\r\n\t\t\"indent\": simplePluginFactory,\r\n\t\t\"outdent\": simplePluginFactory,\r\n\t\t\"justifyCenter\": simplePluginFactory,\r\n\t\t\"justifyFull\": simplePluginFactory,\r\n\t\t\"justifyLeft\": simplePluginFactory,\r\n\t\t\"justifyRight\": simplePluginFactory,\r\n\t\t\"delete\": simplePluginFactory,\r\n\t\t\"selectAll\": simplePluginFactory,\r\n\t\t\"removeFormat\": simplePluginFactory,\r\n\t\t\"unlink\": simplePluginFactory,\r\n\t\t\"insertHorizontalRule\": simplePluginFactory,\r\n\r\n\t\t\"bold\": togglePluginFactory,\r\n\t\t\"italic\": togglePluginFactory,\r\n\t\t\"underline\": togglePluginFactory,\r\n\t\t\"strikethrough\": togglePluginFactory,\r\n\t\t\"subscript\": togglePluginFactory,\r\n\t\t\"superscript\": togglePluginFactory,\r\n\r\n\t\t\"|\": function(){\r\n\t\t\treturn new _Plugin({\r\n\t\t\t\tsetEditor: function(editor){\r\n\t\t\t\t\tthis.editor = editor;\r\n\t\t\t\t\tthis.button = new ToolbarSeparator({ownerDocument: editor.ownerDocument});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn Editor;\r\n});\r\n"]}