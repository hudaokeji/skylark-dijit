{"version":3,"sources":["form/TimeTextBox.js"],"names":["define","declare","keys","lang","_TimePicker","_DateTimeTextBox","baseClass","popupClass","_selector","value","Date","maxHeight","_onKey","evt","this","disabled","readOnly","inherited","arguments","keyCode","ENTER","TAB","ESCAPE","DOWN_ARROW","UP_ARROW","defer","val","get","filterString","parse","constraints","toLowerCase","_opened","closeDropDown","openDropDown"],"mappings":";;;;;;;AAAAA,QACC,qBACA,YACA,kBACA,iBACA,sBACE,SAASC,EAASC,EAAMC,EAAMC,EAAaC,GAW7C,OAAOJ,EAAQ,yBAA0BI,GAIxCC,UAAW,8CACXC,WAAYH,EACZI,UAAW,OAkBXC,MAAO,IAAIC,KAAK,IAIhBC,WAAY,EAEZC,OAAQ,SAASC,GAChB,IAAGC,KAAKC,WAAYD,KAAKE,SAKzB,OAJAF,KAAKG,UAAUC,WAIRL,EAAIM,SACV,KAAKjB,EAAKkB,MACV,KAAKlB,EAAKmB,IACV,KAAKnB,EAAKoB,OACV,KAAKpB,EAAKqB,WACV,KAAKrB,EAAKsB,SAET,MACD,QAGCV,KAAKW,MAAM,WAGV,IAAIC,EAAMZ,KAAKa,IAAI,kBACnBb,KAAKc,aAAgBF,IAAQZ,KAAKe,MAAMH,EAAKZ,KAAKgB,aAAgBJ,EAAIK,cAAgB,GAKnFjB,KAAKkB,SACPlB,KAAKmB,gBAENnB,KAAKoB","file":"../../form/TimeTextBox.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\", // declare\r\n\t\"dojo/keys\", // keys.DOWN_ARROW keys.ENTER keys.ESCAPE keys.TAB keys.UP_ARROW\r\n\t\"dojo/_base/lang\", // lang.hitch\r\n\t\"../_TimePicker\",\r\n\t\"./_DateTimeTextBox\"\r\n], function(declare, keys, lang, _TimePicker, _DateTimeTextBox){\r\n\r\n\t// module:\r\n\t//\t\tdijit/form/TimeTextBox\r\n\r\n\r\n\t/*=====\r\n\tvar __Constraints = declare([_DateTimeTextBox.__Constraints, _TimePicker.__Constraints], {\r\n\t});\r\n\t=====*/\r\n\r\n\treturn declare(\"dijit.form.TimeTextBox\", _DateTimeTextBox, {\r\n\t\t// summary:\r\n\t\t//\t\tA validating, serializable, range-bound time text box with a drop down time picker\r\n\r\n\t\tbaseClass: \"dijitTextBox dijitComboBox dijitTimeTextBox\",\r\n\t\tpopupClass: _TimePicker,\r\n\t\t_selector: \"time\",\r\n\r\n/*=====\r\n\t\t// constraints: __Constraints\r\n\t\tconstraints:{},\r\n=====*/\r\n\r\n\t\t// value: Date\r\n\t\t//\t\tThe value of this widget as a JavaScript Date object.  Note that the date portion implies time zone and daylight savings rules.\r\n\t\t//\r\n\t\t//\t\tExample:\r\n\t\t// |\tnew dijit/form/TimeTextBox({value: stamp.fromISOString(\"T12:59:59\", new Date())})\r\n\t\t//\r\n\t\t//\t\tWhen passed to the parser in markup, must be specified according to locale-independent\r\n\t\t//\t\t`stamp.fromISOString` format.\r\n\t\t//\r\n\t\t//\t\tExample:\r\n\t\t// |\t<input data-dojo-type='dijit/form/TimeTextBox' value='T12:34:00'>\r\n\t\tvalue: new Date(\"\"),\t\t// value.toString()=\"NaN\"\r\n\t\t//FIXME: in markup, you have no control over daylight savings\r\n\r\n\t\t// Add scrollbars if necessary so that dropdown doesn't cover the <input>\r\n\t\tmaxHeight: -1,\r\n\r\n\t\t_onKey: function(evt){\r\n\t\t\tif(this.disabled || this.readOnly){ return; }\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\t// If the user has backspaced or typed some numbers, then filter the result list\r\n\t\t\t// by what they typed.  Maybe there's a better way to detect this, like _handleOnChange()?\r\n\t\t\tswitch(evt.keyCode){\r\n\t\t\t\tcase keys.ENTER:\r\n\t\t\t\tcase keys.TAB:\r\n\t\t\t\tcase keys.ESCAPE:\r\n\t\t\t\tcase keys.DOWN_ARROW:\r\n\t\t\t\tcase keys.UP_ARROW:\r\n\t\t\t\t\t// these keys have special meaning\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// defer() because the keystroke hasn't yet appeared in the <input>,\r\n\t\t\t\t\t// so the get('displayedValue') call below won't give the result we want.\r\n\t\t\t\t\tthis.defer(function(){\r\n\t\t\t\t\t\t// set this.filterString to the filter to apply to the drop down list;\r\n\t\t\t\t\t\t// it will be used in openDropDown()\r\n\t\t\t\t\t\tvar val = this.get('displayedValue');\r\n\t\t\t\t\t\tthis.filterString = (val && !this.parse(val, this.constraints)) ? val.toLowerCase() : \"\";\r\n\r\n\t\t\t\t\t\t// close the drop down and reopen it, in order to filter the items shown in the list\r\n\t\t\t\t\t\t// and also since the drop down may need to be repositioned if the number of list items has changed\r\n\t\t\t\t\t\t// and it's being displayed above the <input>\r\n\t\t\t\t\t\tif(this._opened){\r\n\t\t\t\t\t\t\tthis.closeDropDown();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.openDropDown();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}