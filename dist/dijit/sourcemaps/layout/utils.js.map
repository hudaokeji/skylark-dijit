{"version":3,"sources":["layout/utils.js"],"names":["define","array","domClass","domGeometry","domStyle","lang","size","widget","dim","newSize","resize","setMarginBox","domNode","mixin","getMarginBox","utils","marginBox2contentBox","node","mb","cs","getComputedStyle","me","getMarginExtents","pb","getPadBorderExtents","l","toPixelValue","paddingLeft","t","paddingTop","w","h","layoutChildren","container","children","changedRegionId","changedRegionSize","add","filter","item","region","layoutAlign","concat","forEach","child","elm","pos","Error","id","word","elmStyle","style","left","top","position","substring","toUpperCase","sizeSetting","isLeftToRight","setObject"],"mappings":";;;;;;;AAAAA,QACC,mBACA,iBACA,oBACA,iBACA,mBACE,SAASC,EAAOC,EAAUC,EAAaC,EAAUC,GASnD,SAASC,EAAKC,EAAQC,GAErB,IAAIC,EAAUF,EAAOG,OAASH,EAAOG,OAAOF,GAAOL,EAAYQ,aAAaJ,EAAOK,QAASJ,GAGzFC,EAEFJ,EAAKQ,MAAMN,EAAQE,IAInBJ,EAAKQ,MAAMN,EAAQJ,EAAYW,aAAaP,EAAOK,UACnDP,EAAKQ,MAAMN,EAAQC,IAIrB,IAAIO,GAIHC,qBAAsB,SAAqBC,EAAiBC,GAK3D,IAAIC,EAAKf,EAASgB,iBAAiBH,GAC/BI,EAAKlB,EAAYmB,iBAAiBL,EAAME,GACxCI,EAAKpB,EAAYqB,oBAAoBP,EAAME,GAC/C,OACCM,EAAGrB,EAASsB,aAAaT,EAAME,EAAGQ,aAClCC,EAAGxB,EAASsB,aAAaT,EAAME,EAAGU,YAClCC,EAAGZ,EAAGY,GAAKT,EAAGS,EAAIP,EAAGO,GACrBC,EAAGb,EAAGa,GAAKV,EAAGU,EAAIR,EAAGQ,KAKvBC,eAAgB,SAAqBC,EAAsBzB,EAAkB0B,EAC/DC,EAA6BC,GAyB1C5B,EAAMH,EAAKQ,SAAUL,GAErBN,EAASmC,IAAIJ,EAAW,wBAKxBC,EAAWjC,EAAMqC,OAAOJ,EAAU,SAASK,GAAO,MAAsB,UAAfA,EAAKC,QAA0C,UAApBD,EAAKE,cACvFC,OAAOzC,EAAMqC,OAAOJ,EAAU,SAASK,GAAO,MAAsB,UAAfA,EAAKC,QAA0C,UAApBD,EAAKE,eAGvFxC,EAAM0C,QAAQT,EAAU,SAASU,GAChC,IAAIC,EAAMD,EAAMhC,QACfkC,EAAOF,EAAMJ,QAAUI,EAAMH,YAC9B,IAAIK,EACH,MAAM,IAAIC,MAAM,yBAA2BH,EAAMI,IAIlD,IAtFiBC,EAsFbC,EAAWL,EAAIM,MACnBD,EAASE,KAAO5C,EAAIiB,EAAE,KACtByB,EAASG,IAAM7C,EAAIoB,EAAE,KACrBsB,EAASI,SAAW,WAEpBpD,EAASmC,IAAIQ,EAAK,eA3FDI,EA2F2BH,GA1FlCS,UAAU,EAAE,GAAGC,cAAgBP,EAAKM,UAAU,KA6FxD,IAAIE,KAIDtB,GAAmBA,GAAmBS,EAAMI,KAC9CS,EAA4B,OAAhBb,EAAMJ,QAAmC,UAAhBI,EAAMJ,OAAqB,IAAM,KAAOJ,GAGpE,WAAPU,IACFA,EAAMF,EAAMc,gBAAkB,OAAS,SAE9B,YAAPZ,IACFA,EAAMF,EAAMc,gBAAkB,QAAU,QAK/B,OAAPZ,GAAuB,UAAPA,GAClBW,EAAY3B,EAAItB,EAAIsB,EACpBxB,EAAKsC,EAAOa,GACZjD,EAAIuB,GAAKa,EAAMb,EACL,OAAPe,EACFtC,EAAIoB,GAAKgB,EAAMb,EAEfmB,EAASG,IAAM7C,EAAIoB,EAAIpB,EAAIuB,EAAI,MAEjB,QAAPe,GAAwB,SAAPA,GACzBW,EAAY1B,EAAIvB,EAAIuB,EACpBzB,EAAKsC,EAAOa,GACZjD,EAAIsB,GAAKc,EAAMd,EACL,QAAPgB,EACFtC,EAAIiB,GAAKmB,EAAMd,EAEfoB,EAASE,KAAO5C,EAAIiB,EAAIjB,EAAIsB,EAAI,MAElB,UAAPgB,GAA0B,UAAPA,GAC3BxC,EAAKsC,EAAOpC,OAQhB,OAFAH,EAAKsD,UAAU,qBAAsB5C,GAE9BA","file":"../../layout/utils.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\", // array.filter array.forEach\r\n\t\"dojo/dom-class\", // domClass.add domClass.remove\r\n\t\"dojo/dom-geometry\", // domGeometry.marginBox\r\n\t\"dojo/dom-style\", // domStyle.getComputedStyle\r\n\t\"dojo/_base/lang\" // lang.mixin, lang.setObject\r\n], function(array, domClass, domGeometry, domStyle, lang){\r\n\r\n\t// module:\r\n\t//\t\tdijit/layout/utils\r\n\r\n\tfunction capitalize(word){\r\n\t\treturn word.substring(0,1).toUpperCase() + word.substring(1);\r\n\t}\r\n\r\n\tfunction size(widget, dim){\r\n\t\t// size the child\r\n\t\tvar newSize = widget.resize ? widget.resize(dim) : domGeometry.setMarginBox(widget.domNode, dim);\r\n\r\n\t\t// record child's size\r\n\t\tif(newSize){\r\n\t\t\t// if the child returned it's new size then use that\r\n\t\t\tlang.mixin(widget, newSize);\r\n\t\t}else{\r\n\t\t\t// otherwise, call getMarginBox(), but favor our own numbers when we have them.\r\n\t\t\t// the browser lies sometimes\r\n\t\t\tlang.mixin(widget, domGeometry.getMarginBox(widget.domNode));\r\n\t\t\tlang.mixin(widget, dim);\r\n\t\t}\r\n\t}\r\n\r\n\tvar utils = {\r\n\t\t// summary:\r\n\t\t//\t\tUtility functions for doing layout\r\n\r\n\t\tmarginBox2contentBox: function(/*DomNode*/ node, /*Object*/ mb){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tGiven the margin-box size of a node, return its content box size.\r\n\t\t\t//\t\tFunctions like domGeometry.contentBox() but is more reliable since it doesn't have\r\n\t\t\t//\t\tto wait for the browser to compute sizes.\r\n\t\t\tvar cs = domStyle.getComputedStyle(node);\r\n\t\t\tvar me = domGeometry.getMarginExtents(node, cs);\r\n\t\t\tvar pb = domGeometry.getPadBorderExtents(node, cs);\r\n\t\t\treturn {\r\n\t\t\t\tl: domStyle.toPixelValue(node, cs.paddingLeft),\r\n\t\t\t\tt: domStyle.toPixelValue(node, cs.paddingTop),\r\n\t\t\t\tw: mb.w - (me.w + pb.w),\r\n\t\t\t\th: mb.h - (me.h + pb.h)\r\n\t\t\t};\r\n\t\t},\r\n\r\n\r\n\t\tlayoutChildren: function(/*DomNode*/ container, /*Object*/ dim, /*Widget[]*/ children,\r\n\t\t\t\t/*String?*/ changedRegionId, /*Number?*/ changedRegionSize){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tLayout a bunch of child dom nodes within a parent dom node\r\n\t\t\t// container:\r\n\t\t\t//\t\tparent node\r\n\t\t\t// dim:\r\n\t\t\t//\t\t{l, t, w, h} object specifying dimensions of container into which to place children\r\n\t\t\t// children:\r\n\t\t\t//\t\tAn array of Widgets or at least objects containing:\r\n\t\t\t//\r\n\t\t\t//\t\t- domNode: pointer to DOM node to position\r\n\t\t\t//\t\t- region or layoutAlign: position to place DOM node\r\n\t\t\t//\t\t- resize(): (optional) method to set size of node\r\n\t\t\t//\t\t- id: (optional) Id of widgets, referenced from resize object, below.\r\n\t\t\t//\r\n\t\t\t//\t\tThe widgets in this array should be ordered according to how they should be laid out\r\n\t\t\t//\t\t(each element will be processed in order, and take up as much remaining space as needed),\r\n\t\t\t//\t\twith the center widget last.\r\n\t\t\t// changedRegionId:\r\n\t\t\t//\t\tIf specified, the slider for the region with the specified id has been dragged, and thus\r\n\t\t\t//\t\tthe region's height or width should be adjusted according to changedRegionSize\r\n\t\t\t// changedRegionSize:\r\n\t\t\t//\t\tSee changedRegionId.\r\n\r\n\t\t\t// copy dim because we are going to modify it\r\n\t\t\tdim = lang.mixin({}, dim);\r\n\r\n\t\t\tdomClass.add(container, \"dijitLayoutContainer\");\r\n\r\n\t\t\t// Move \"client\" elements to the end of the array for layout.  a11y dictates that the author\r\n\t\t\t// needs to be able to put them in the document in tab-order, but this algorithm requires that\r\n\t\t\t// client be last.    TODO: remove for 2.0, all dijit client code already sends children as last item.\r\n\t\t\tchildren = array.filter(children, function(item){ return item.region != \"center\" && item.layoutAlign != \"client\"; })\r\n\t\t\t\t.concat(array.filter(children, function(item){ return item.region == \"center\" || item.layoutAlign == \"client\"; }));\r\n\r\n\t\t\t// set positions/sizes\r\n\t\t\tarray.forEach(children, function(child){\r\n\t\t\t\tvar elm = child.domNode,\r\n\t\t\t\t\tpos = (child.region || child.layoutAlign);\r\n\t\t\t\tif(!pos){\r\n\t\t\t\t\tthrow new Error(\"No region setting for \" + child.id)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set elem to upper left corner of unused space; may move it later\r\n\t\t\t\tvar elmStyle = elm.style;\r\n\t\t\t\telmStyle.left = dim.l+\"px\";\r\n\t\t\t\telmStyle.top = dim.t+\"px\";\r\n\t\t\t\telmStyle.position = \"absolute\";\r\n\r\n\t\t\t\tdomClass.add(elm, \"dijitAlign\" + capitalize(pos));\r\n\r\n\t\t\t\t// Size adjustments to make to this child widget\r\n\t\t\t\tvar sizeSetting = {};\r\n\r\n\t\t\t\t// Check for optional size adjustment due to splitter drag (height adjustment for top/bottom align\r\n\t\t\t\t// panes and width adjustment for left/right align panes.\r\n\t\t\t\tif(changedRegionId && changedRegionId == child.id){\r\n\t\t\t\t\tsizeSetting[child.region == \"top\" || child.region == \"bottom\" ? \"h\" : \"w\"] = changedRegionSize;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pos == \"leading\"){\r\n\t\t\t\t\tpos = child.isLeftToRight() ? \"left\" : \"right\";\r\n\t\t\t\t}\r\n\t\t\t\tif(pos == \"trailing\"){\r\n\t\t\t\t\tpos = child.isLeftToRight() ? \"right\" : \"left\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set size && adjust record of remaining space.\r\n\t\t\t\t// note that setting the width of a <div> may affect its height.\r\n\t\t\t\tif(pos == \"top\" || pos == \"bottom\"){\r\n\t\t\t\t\tsizeSetting.w = dim.w;\r\n\t\t\t\t\tsize(child, sizeSetting);\r\n\t\t\t\t\tdim.h -= child.h;\r\n\t\t\t\t\tif(pos == \"top\"){\r\n\t\t\t\t\t\tdim.t += child.h;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\telmStyle.top = dim.t + dim.h + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(pos == \"left\" || pos == \"right\"){\r\n\t\t\t\t\tsizeSetting.h = dim.h;\r\n\t\t\t\t\tsize(child, sizeSetting);\r\n\t\t\t\t\tdim.w -= child.w;\r\n\t\t\t\t\tif(pos == \"left\"){\r\n\t\t\t\t\t\tdim.l += child.w;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\telmStyle.left = dim.l + dim.w + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(pos == \"client\" || pos == \"center\"){\r\n\t\t\t\t\tsize(child, dim);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tlang.setObject(\"dijit.layout.utils\", utils);\t// remove for 2.0\r\n\r\n\treturn utils;\r\n});\r\n"]}