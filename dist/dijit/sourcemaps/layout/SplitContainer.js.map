{"version":3,"sources":["layout/SplitContainer.js"],"names":["define","array","cookie","declare","dom","domClass","domConstruct","domGeometry","domStyle","event","kernel","lang","on","has","registry","_WidgetBase","_LayoutWidget","SplitContainer","constructor","deprecated","activeSizing","sizerWidth","orientation","persist","baseClass","postMixInProperties","this","inherited","arguments","isHorizontal","postCreate","sizers","domNode","style","overflow","parseInt","toString","e","sizer","ownerDocument","createElement","virtualSizer","position","zIndex","className","appendChild","setSelectable","destroy","_ownconnects","h","pop","remove","startup","_started","forEach","getChildren","child","i","children","_setupChild","length","_addSizer","_restoreState","add","_onSizerMouseDown","target","id","beginSizing","index","undefined","getUniqueId","splice","thumb","connect","removeChild","widget","indexOf","layout","addChild","insertIndex","paneWidth","_contentBox","w","paneHeight","space","outOf","sizeShare","pixPerUnit","totalSize","slice","size","Math","round","sizeActual","_checkSizes","pos","_movePanel","some","_moveSlider","panel","box","left","top","resize","setMarginBox","slider","_growPane","growth","pane","sizeMin","totalMinSize","list","isDraggingLeft","reverse","paneBefore","paneAfter","sizeBeforeDrag","positionBeforeDrag","isSizing","sizingSplitter","get","cover","create","width","height","startPoint","lastPoint","pageX","pageY","maxDelta","minDelta","_showSizingLine","documentElement","hitch","stop","changeSizing","delta","max","min","_updateSize","_moveSizingLine","endSizing","_hideSizingLine","_saveState","display","set","_getCookieName","cookieName","cookieValue","expires","ChildWidgetProperties","extend"],"mappings":"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","file":"../../layout/SplitContainer.js","sourcesContent":["define([\r\n\t\"dojo/_base/array\", // array.forEach array.indexOf array.some\r\n\t\"dojo/cookie\", // cookie\r\n\t\"dojo/_base/declare\", // declare\r\n\t\"dojo/dom\", // dom.setSelectable\r\n\t\"dojo/dom-class\", // domClass.add\r\n\t\"dojo/dom-construct\", // domConstruct.create domConstruct.destroy\r\n\t\"dojo/dom-geometry\", // domGeometry.marginBox domGeometry.position\r\n\t\"dojo/dom-style\", // domStyle.style\r\n\t\"dojo/_base/event\", // event.stop\r\n\t\"dojo/_base/kernel\", // kernel.deprecated\r\n\t\"dojo/_base/lang\", // lang.extend lang.hitch\r\n\t\"dojo/on\",\r\n\t\"dojo/sniff\", // has(\"mozilla\")\r\n\t\"../registry\",\t// registry.getUniqueId()\r\n\t\"../_WidgetBase\",\r\n\t\"./_LayoutWidget\"\r\n], function(array, cookie, declare, dom, domClass, domConstruct, domGeometry, domStyle,\r\n\t\t\tevent, kernel, lang, on, has, registry, _WidgetBase, _LayoutWidget){\r\n\r\n// module:\r\n//\t\tdijit/layout/SplitContainer\r\n\r\n//\r\n// FIXME: make it prettier\r\n// FIXME: active dragging upwards doesn't always shift other bars (direction calculation is wrong in this case)\r\n// FIXME: sizeWidth should be a CSS attribute (at 7 because css wants it to be 7 until we fix to css)\r\n//\r\n\r\nvar SplitContainer = declare(\"dijit.layout.SplitContainer\", _LayoutWidget, {\r\n\t// summary:\r\n\t//\t\tDeprecated.  Use `dijit/layout/BorderContainer` instead.\r\n\t// description:\r\n\t//\t\tA Container widget with sizing handles in-between each child.\r\n\t//\t\tContains multiple children widgets, all of which are displayed side by side\r\n\t//\t\t(either horizontally or vertically); there's a bar between each of the children,\r\n\t//\t\tand you can adjust the relative size of each child by dragging the bars.\r\n\t//\r\n\t//\t\tYou must specify a size (width and height) for the SplitContainer.\r\n\t//\r\n\t//\t\tSee `SplitContainer.ChildWidgetProperties` for details on the properties that can be set on\r\n\t//\t\tchildren of a `SplitContainer`.\r\n\t// tags:\r\n\t//\t\tdeprecated\r\n\r\n\tconstructor: function(){\r\n\t\tkernel.deprecated(\"dijit.layout.SplitContainer is deprecated\", \"use BorderContainer with splitter instead\", 2.0);\r\n\t},\r\n\r\n\t// activeSizing: Boolean\r\n\t//\t\tIf true, the children's size changes as you drag the bar;\r\n\t//\t\totherwise, the sizes don't change until you drop the bar (by mouse-up)\r\n\tactiveSizing: false,\r\n\r\n\t// sizerWidth: Integer\r\n\t//\t\tSize in pixels of the bar between each child\r\n\tsizerWidth: 7,\r\n\r\n\t// orientation: String\r\n\t//\t\teither 'horizontal' or vertical; indicates whether the children are\r\n\t//\t\tarranged side-by-side or up/down.\r\n\torientation: 'horizontal',\r\n\r\n\t// persist: Boolean\r\n\t//\t\tSave splitter positions in a cookie\r\n\tpersist: true,\r\n\r\n\tbaseClass: \"dijitSplitContainer\",\r\n\r\n\tpostMixInProperties: function(){\r\n\t\tthis.inherited(\"postMixInProperties\",arguments);\r\n\t\tthis.isHorizontal = (this.orientation == 'horizontal');\r\n\t},\r\n\r\n\tpostCreate: function(){\r\n\t\tthis.inherited(arguments);\r\n\t\tthis.sizers = [];\r\n\r\n\t\t// overflow has to be explicitly hidden for splitContainers using gekko (trac #1435)\r\n\t\t// to keep other combined css classes from inadvertantly making the overflow visible\r\n\t\tif(has(\"mozilla\")){\r\n\t\t\tthis.domNode.style.overflow = '-moz-scrollbars-none'; // hidden doesn't work\r\n\t\t}\r\n\r\n\t\t// create the fake dragger\r\n\t\tif(typeof this.sizerWidth == \"object\"){\r\n\t\t\ttry{ //FIXME: do this without a try/catch\r\n\t\t\t\tthis.sizerWidth = parseInt(this.sizerWidth.toString());\r\n\t\t\t}catch(e){ this.sizerWidth = 7; }\r\n\t\t}\r\n\t\tvar sizer = this.ownerDocument.createElement('div');\r\n\t\tthis.virtualSizer = sizer;\r\n\t\tsizer.style.position = 'relative';\r\n\r\n\t\t// #1681: work around the dreaded 'quirky percentages in IE' layout bug\r\n\t\t// If the splitcontainer's dimensions are specified in percentages, it\r\n\t\t// will be resized when the virtualsizer is displayed in _showSizingLine\r\n\t\t// (typically expanding its bounds unnecessarily). This happens because\r\n\t\t// we use position: relative for .dijitSplitContainer.\r\n\t\t// The workaround: instead of changing the display style attribute,\r\n\t\t// switch to changing the zIndex (bring to front/move to back)\r\n\r\n\t\tsizer.style.zIndex = 10;\r\n\t\tsizer.className = this.isHorizontal ? 'dijitSplitContainerVirtualSizerH' : 'dijitSplitContainerVirtualSizerV';\r\n\t\tthis.domNode.appendChild(sizer);\r\n\t\tdom.setSelectable(sizer, false);\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\t\tdelete this.virtualSizer;\r\n\t\tif(this._ownconnects){\r\n\t\t\tvar h;\r\n\t\t\twhile(h = this._ownconnects.pop()){ h.remove(); }\r\n\t\t}\r\n\t\tthis.inherited(arguments);\r\n\t},\r\n\tstartup: function(){\r\n\t\tif(this._started){ return; }\r\n\r\n\t\tarray.forEach(this.getChildren(), function(child, i, children){\r\n\t\t\t// attach the children and create the draggers\r\n\t\t\tthis._setupChild(child);\r\n\r\n\t\t\tif(i < children.length-1){\r\n\t\t\t\tthis._addSizer();\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tif(this.persist){\r\n\t\t\tthis._restoreState();\r\n\t\t}\r\n\r\n\t\tthis.inherited(arguments);\r\n\t},\r\n\r\n\t_setupChild: function(/*dijit/_WidgetBase*/ child){\r\n\t\tthis.inherited(arguments);\r\n\t\tchild.domNode.style.position = \"absolute\";\r\n\t\tdomClass.add(child.domNode, \"dijitSplitPane\");\r\n\t},\r\n\r\n\t_onSizerMouseDown: function(e){\r\n\t\tif(e.target.id){\r\n\t\t\tfor(var i=0;i<this.sizers.length;i++){\r\n\t\t\t\tif(this.sizers[i].id == e.target.id){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(i<this.sizers.length){\r\n\t\t\t\tthis.beginSizing(e,i);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_addSizer: function(index){\r\n\t\tindex = index === undefined ? this.sizers.length : index;\r\n\r\n\t\t// TODO: use a template for this!!!\r\n\t\tvar sizer = this.ownerDocument.createElement('div');\r\n\t\tsizer.id=registry.getUniqueId('dijit_layout_SplitterContainer_Splitter');\r\n\t\tthis.sizers.splice(index,0,sizer);\r\n\t\tthis.domNode.appendChild(sizer);\r\n\r\n\t\tsizer.className = this.isHorizontal ? 'dijitSplitContainerSizerH' : 'dijitSplitContainerSizerV';\r\n\r\n\t\t// add the thumb div\r\n\t\tvar thumb = this.ownerDocument.createElement('div');\r\n\t\tthumb.className = 'thumb';\r\n\t\tsizer.appendChild(thumb);\r\n\r\n\t\t// FIXME: are you serious? why aren't we using mover start/stop combo?\r\n\t\tthis.connect(sizer, \"onmousedown\", '_onSizerMouseDown');\r\n\r\n\t\tdom.setSelectable(sizer, false);\r\n\t},\r\n\r\n\tremoveChild: function(widget){\r\n\t\t// summary:\r\n\t\t//\t\tRemove sizer, but only if widget is really our child and\r\n\t\t//\t\twe have at least one sizer to throw away\r\n\t\tif(this.sizers.length){\r\n\t\t\tvar i = array.indexOf(this.getChildren(), widget);\r\n\t\t\tif(i != -1){\r\n\t\t\t\tif(i == this.sizers.length){\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t\tdomConstruct.destroy(this.sizers[i]);\r\n\t\t\t\tthis.sizers.splice(i,1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove widget and repaint\r\n\t\tthis.inherited(arguments);\r\n\t\tif(this._started){\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\t},\r\n\r\n\taddChild: function(/*dijit/_WidgetBase*/ child, /*Integer?*/ insertIndex){\r\n\t\t// summary:\r\n\t\t//\t\tAdd a child widget to the container\r\n\t\t// child:\r\n\t\t//\t\ta widget to add\r\n\t\t// insertIndex:\r\n\t\t//\t\tposition in the \"stack\" to add the child widget\r\n\r\n\t\t// SplitContainer puts all the child widgets first, and all the splitters at the end.\r\n\t\t// (This is not ideal for accessibility but not going to fix because the widget is deprecated.)\r\n\t\t// So, just need to maintain that order so that _Container.addChild() puts the widgets where expected.\r\n\t\tif(typeof insertIndex == \"undefined\" || insertIndex == \"last\"){\r\n\t\t\tinsertIndex = this.getChildren().length;\r\n\t\t}\r\n\r\n\t\tthis.inherited(arguments, [child, insertIndex]);\r\n\r\n\t\tif(this._started){\r\n\t\t\t// Do the stuff that startup() does for each widget\r\n\t\t\tvar children = this.getChildren();\r\n\t\t\tif(children.length > 1){\r\n\t\t\t\tthis._addSizer(insertIndex);\r\n\t\t\t}\r\n\r\n\t\t\t// and then reposition (ie, shrink) every pane to make room for the new guy\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\t},\r\n\r\n\tlayout: function(){\r\n\t\t// summary:\r\n\t\t//\t\tDo layout of panels\r\n\r\n\t\t// base class defines this._contentBox on initial creation and also\r\n\t\t// on resize\r\n\t\tthis.paneWidth = this._contentBox.w;\r\n\t\tthis.paneHeight = this._contentBox.h;\r\n\r\n\t\tvar children = this.getChildren();\r\n\t\tif(!children.length){ return; }\r\n\r\n\t\t//\r\n\t\t// calculate space\r\n\t\t//\r\n\r\n\t\tvar space = this.isHorizontal ? this.paneWidth : this.paneHeight;\r\n\t\tif(children.length > 1){\r\n\t\t\tspace -= this.sizerWidth * (children.length - 1);\r\n\t\t}\r\n\r\n\t\t//\r\n\t\t// calculate total of SizeShare values\r\n\t\t//\r\n\t\tvar outOf = 0;\r\n\t\tarray.forEach(children, function(child){\r\n\t\t\toutOf += child.sizeShare;\r\n\t\t});\r\n\r\n\t\t//\r\n\t\t// work out actual pixels per sizeshare unit\r\n\t\t//\r\n\t\tvar pixPerUnit = space / outOf;\r\n\r\n\t\t//\r\n\t\t// set the SizeActual member of each pane\r\n\t\t//\r\n\t\tvar totalSize = 0;\r\n\t\tarray.forEach(children.slice(0, children.length - 1), function(child){\r\n\t\t\tvar size = Math.round(pixPerUnit * child.sizeShare);\r\n\t\t\tchild.sizeActual = size;\r\n\t\t\ttotalSize += size;\r\n\t\t});\r\n\r\n\t\tchildren[children.length-1].sizeActual = space - totalSize;\r\n\r\n\t\t//\r\n\t\t// make sure the sizes are ok\r\n\t\t//\r\n\t\tthis._checkSizes();\r\n\r\n\t\t//\r\n\t\t// now loop, positioning each pane and letting children resize themselves\r\n\t\t//\r\n\r\n\t\tvar pos = 0;\r\n\t\tvar size = children[0].sizeActual;\r\n\t\tthis._movePanel(children[0], pos, size);\r\n\t\tchildren[0].position = pos;\r\n\t\tpos += size;\r\n\r\n\t\t// if we don't have any sizers, our layout method hasn't been called yet\r\n\t\t// so bail until we are called..TODO: REVISIT: need to change the startup\r\n\t\t// algorithm to guaranteed the ordering of calls to layout method\r\n\t\tif(!this.sizers){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tarray.some(children.slice(1), function(child, i){\r\n\t\t\t// error-checking\r\n\t\t\tif(!this.sizers[i]){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// first we position the sizing handle before this pane\r\n\t\t\tthis._moveSlider(this.sizers[i], pos, this.sizerWidth);\r\n\t\t\tthis.sizers[i].position = pos;\r\n\t\t\tpos += this.sizerWidth;\r\n\r\n\t\t\tsize = child.sizeActual;\r\n\t\t\tthis._movePanel(child, pos, size);\r\n\t\t\tchild.position = pos;\r\n\t\t\tpos += size;\r\n\t\t}, this);\r\n\t},\r\n\r\n\t_movePanel: function(panel, pos, size){\r\n\t\tvar box;\r\n\t\tif(this.isHorizontal){\r\n\t\t\tpanel.domNode.style.left = pos + 'px';\t// TODO: resize() takes l and t parameters too, don't need to set manually\r\n\t\t\tpanel.domNode.style.top = 0;\r\n\t\t\tbox = {w: size, h: this.paneHeight};\r\n\t\t\tif(panel.resize){\r\n\t\t\t\tpanel.resize(box);\r\n\t\t\t}else{\r\n\t\t\t\tdomGeometry.setMarginBox(panel.domNode, box);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tpanel.domNode.style.left = 0;\t// TODO: resize() takes l and t parameters too, don't need to set manually\r\n\t\t\tpanel.domNode.style.top = pos + 'px';\r\n\t\t\tbox = {w: this.paneWidth, h: size};\r\n\t\t\tif(panel.resize){\r\n\t\t\t\tpanel.resize(box);\r\n\t\t\t}else{\r\n\t\t\t\tdomGeometry.setMarginBox(panel.domNode, box);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_moveSlider: function(slider, pos, size){\r\n\t\tif(this.isHorizontal){\r\n\t\t\tslider.style.left = pos + 'px';\r\n\t\t\tslider.style.top = 0;\r\n\t\t\tdomGeometry.setMarginBox(slider, { w: size, h: this.paneHeight });\r\n\t\t}else{\r\n\t\t\tslider.style.left = 0;\r\n\t\t\tslider.style.top = pos + 'px';\r\n\t\t\tdomGeometry.setMarginBox(slider, { w: this.paneWidth, h: size });\r\n\t\t}\r\n\t},\r\n\r\n\t_growPane: function(growth, pane){\r\n\t\tif(growth > 0){\r\n\t\t\tif(pane.sizeActual > pane.sizeMin){\r\n\t\t\t\tif((pane.sizeActual - pane.sizeMin) > growth){\r\n\r\n\t\t\t\t\t// stick all the growth in this pane\r\n\t\t\t\t\tpane.sizeActual = pane.sizeActual - growth;\r\n\t\t\t\t\tgrowth = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// put as much growth in here as we can\r\n\t\t\t\t\tgrowth -= pane.sizeActual - pane.sizeMin;\r\n\t\t\t\t\tpane.sizeActual = pane.sizeMin;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn growth;\r\n\t},\r\n\r\n\t_checkSizes: function(){\r\n\r\n\t\tvar totalMinSize = 0;\r\n\t\tvar totalSize = 0;\r\n\t\tvar children = this.getChildren();\r\n\r\n\t\tarray.forEach(children, function(child){\r\n\t\t\ttotalSize += child.sizeActual;\r\n\t\t\ttotalMinSize += child.sizeMin;\r\n\t\t});\r\n\r\n\t\t// only make adjustments if we have enough space for all the minimums\r\n\r\n\t\tif(totalMinSize <= totalSize){\r\n\r\n\t\t\tvar growth = 0;\r\n\r\n\t\t\tarray.forEach(children, function(child){\r\n\t\t\t\tif(child.sizeActual < child.sizeMin){\r\n\t\t\t\t\tgrowth += child.sizeMin - child.sizeActual;\r\n\t\t\t\t\tchild.sizeActual = child.sizeMin;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(growth > 0){\r\n\t\t\t\tvar list = this.isDraggingLeft ? children.reverse() : children;\r\n\t\t\t\tarray.forEach(list, function(child){\r\n\t\t\t\t\tgrowth = this._growPane(growth, child);\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tarray.forEach(children, function(child){\r\n\t\t\t\tchild.sizeActual = Math.round(totalSize * (child.sizeMin / totalMinSize));\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tbeginSizing: function(e, i){\r\n\t\t// summary:\r\n\t\t//\t\tBegin dragging the splitter between child[i] and child[i+1]\r\n\r\n\t\tvar children = this.getChildren();\r\n\r\n\t\tthis.paneBefore = children[i];\r\n\t\tthis.paneAfter = children[i+1];\r\n\r\n\t\tthis.paneBefore.sizeBeforeDrag = this.paneBefore.sizeActual;\r\n\t\tthis.paneAfter.sizeBeforeDrag = this.paneAfter.sizeActual;\r\n\t\tthis.paneAfter.positionBeforeDrag = this.paneAfter.position;\r\n\r\n\t\tthis.isSizing = true;\r\n\t\tthis.sizingSplitter = this.sizers[i];\r\n\t\tthis.sizingSplitter.positionBeforeDrag = domStyle.get(this.sizingSplitter,(this.isHorizontal ? \"left\" : \"top\"));\r\n\r\n\t\tif(!this.cover){\r\n\t\t\tthis.cover = domConstruct.create('div', {\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tposition:'absolute',\r\n\t\t\t\t\tzIndex:5,\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\theight: \"100%\"\r\n\t\t\t\t}\r\n\t\t\t}, this.domNode);\r\n\t\t}else{\r\n\t\t\tthis.cover.style.zIndex = 5;\r\n\t\t}\r\n\t\tthis.sizingSplitter.style.zIndex = 6;\r\n\r\n\t\t// startPoint is the e.pageX or e.pageY at start of drag\r\n\t\tthis.startPoint = this.lastPoint = (this.isHorizontal ? e.pageX : e.pageY);\r\n\r\n\t\t// Calculate maximum to the left or right that splitter is allowed to be dragged\r\n\t\t// minDelta is negative to indicate left/upward drag where end.pageX < start.pageX.\r\n\t\tthis.maxDelta = this.paneAfter.sizeActual - this.paneAfter.sizeMin;\r\n\t\tthis.minDelta = -1 * (this.paneBefore.sizeActual - this.paneBefore.sizeMin);\r\n\r\n\t\tif(!this.activeSizing){\r\n\t\t\tthis._showSizingLine();\r\n\t\t}\r\n\r\n\t\t// attach mouse events\r\n\t\tthis._ownconnects = [\r\n\t\t\ton(this.ownerDocument.documentElement, \"mousemove\", lang.hitch(this, \"changeSizing\")),\r\n\t\t\ton(this.ownerDocument.documentElement, \"mouseup\", lang.hitch(this, \"endSizing\"))\r\n\t\t];\r\n\r\n\t\tevent.stop(e);\r\n\t},\r\n\r\n\tchangeSizing: function(e){\r\n\t\t// summary:\r\n\t\t//\t\tCalled on mousemove while dragging the splitter\r\n\r\n\t\tif(!this.isSizing){ return; }\r\n\r\n\t\t// lastPoint is the most recent e.pageX or e.pageY during the drag\r\n\t\tthis.lastPoint = this.isHorizontal ? e.pageX : e.pageY;\r\n\t\tvar delta = Math.max(Math.min(this.lastPoint - this.startPoint, this.maxDelta), this.minDelta);\r\n\r\n\t\tif(this.activeSizing){\r\n\t\t\tthis._updateSize(delta);\r\n\t\t}else{\r\n\t\t\tthis._moveSizingLine(delta);\r\n\t\t}\r\n\t\tevent.stop(e);\r\n\t},\r\n\r\n\tendSizing: function(){\r\n\t\tif(!this.isSizing){ return; }\r\n\t\tif(this.cover){\r\n\t\t\tthis.cover.style.zIndex = -1;\r\n\t\t}\r\n\t\tif(!this.activeSizing){\r\n\t\t\tthis._hideSizingLine();\r\n\t\t}\r\n\r\n\t\tvar delta = Math.max(Math.min(this.lastPoint - this.startPoint, this.maxDelta), this.minDelta);\r\n\t\tthis._updateSize(delta);\r\n\r\n\t\tthis.isSizing = false;\r\n\r\n\t\tif(this.persist){\r\n\t\t\tthis._saveState(this);\r\n\t\t}\r\n\r\n\t\tvar h;\r\n\t\twhile(h = this._ownconnects.pop()){ h.remove(); }\r\n\t},\r\n\r\n\t_updateSize: function(/*Number*/ delta){\r\n\t\t// summary:\r\n\t\t//\t\tResets sizes of panes before and after splitter being dragged.\r\n\t\t//\t\tCalled during a drag, for active sizing, or at the end of a drag otherwise.\r\n\t\t// delta: Number\r\n\t\t//\t\tChange in slider position compared to start of drag.   But note that\r\n\t\t//\t\tthis function may be called multiple times during drag.\r\n\r\n\t\tthis.paneBefore.sizeActual = this.paneBefore.sizeBeforeDrag + delta;\r\n\t\tthis.paneAfter.position\t= this.paneAfter.positionBeforeDrag + delta;\r\n\t\tthis.paneAfter.sizeActual = this.paneAfter.sizeBeforeDrag - delta;\r\n\r\n\t\tarray.forEach(this.getChildren(), function(child){\r\n\t\t\tchild.sizeShare = child.sizeActual;\r\n\t\t});\r\n\r\n\t\tif(this._started){\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\t},\r\n\r\n\t_showSizingLine: function(){\r\n\t\t// summary:\r\n\t\t//\t\tShow virtual splitter, for non-active resizing\r\n\r\n\t\tthis._moveSizingLine(0);\r\n\r\n\t\tdomGeometry.setMarginBox(this.virtualSizer,\r\n\t\t\tthis.isHorizontal ? { w: this.sizerWidth, h: this.paneHeight } : { w: this.paneWidth, h: this.sizerWidth });\r\n\r\n\t\tthis.virtualSizer.style.display = 'block';\r\n\t},\r\n\r\n\t_hideSizingLine: function(){\r\n\t\tthis.virtualSizer.style.display = 'none';\r\n\t},\r\n\r\n\t_moveSizingLine: function(/*Number*/ delta){\r\n\t\t// summary:\r\n\t\t//\t\tCalled for non-active resizing, to move the virtual splitter without adjusting the size of the panes\r\n\t\tvar pos = delta + this.sizingSplitter.positionBeforeDrag;\r\n\t\tdomStyle.set(this.virtualSizer,(this.isHorizontal ? \"left\" : \"top\"),pos+\"px\");\r\n\t},\r\n\r\n\t_getCookieName: function(i){\r\n\t\treturn this.id + \"_\" + i;\r\n\t},\r\n\r\n\t_restoreState: function(){\r\n\t\tarray.forEach(this.getChildren(), function(child, i){\r\n\t\t\tvar cookieName = this._getCookieName(i);\r\n\t\t\tvar cookieValue = cookie(cookieName);\r\n\t\t\tif(cookieValue){\r\n\t\t\t\tvar pos = parseInt(cookieValue);\r\n\t\t\t\tif(typeof pos == \"number\"){\r\n\t\t\t\t\tchild.sizeShare = pos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\r\n\t_saveState: function(){\r\n\t\tif(!this.persist){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tarray.forEach(this.getChildren(), function(child, i){\r\n\t\t\tcookie(this._getCookieName(i), child.sizeShare, {expires:365});\r\n\t\t}, this);\r\n\t}\r\n});\r\n\r\nSplitContainer.ChildWidgetProperties = {\r\n\t// summary:\r\n\t//\t\tThese properties can be specified for the children of a SplitContainer.\r\n\r\n\t// sizeMin: [deprecated] Integer\r\n\t//\t\tMinimum size (width or height) of a child of a SplitContainer.\r\n\t//\t\tThe value is relative to other children's sizeShare properties.\r\n\tsizeMin: 10,\r\n\r\n\t// sizeShare: [deprecated] Integer\r\n\t//\t\tSize (width or height) of a child of a SplitContainer.\r\n\t//\t\tThe value is relative to other children's sizeShare properties.\r\n\t//\t\tFor example, if there are two children and each has sizeShare=10, then\r\n\t//\t\teach takes up 50% of the available space.\r\n\tsizeShare: 10\r\n};\r\n\r\n// Since any widget can be specified as a SplitContainer child, mix them\r\n// into the base widget class.  (This is a hack, but it's effective.)\r\n// This is for the benefit of the parser.   Remove for 2.0.  Also, hide from doc viewer.\r\nlang.extend(_WidgetBase, /*===== {} || =====*/ SplitContainer.ChildWidgetProperties);\r\n\r\nreturn SplitContainer;\r\n\r\n});\r\n"]}