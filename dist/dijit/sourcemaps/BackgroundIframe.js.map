{"version":3,"sources":["BackgroundIframe.js"],"names":["define","require","dijit","config","domConstruct","domStyle","lang","on","has","add","test","navigator","userAgent","_frames","queue","this","pop","iframe","length","style","display","html","toUrl","document","createElement","create","src","className","setAttribute","set","tabIndex","push","BackgroundIframe","node","id","Error","appendChild","resize","_conn","hitch","width","height","extend","offsetWidth","offsetHeight","destroy","remove","parentNode","removeChild"],"mappings":";;;;;;;AAAAA,QACC,UACA,WACA,oBACA,qBACA,iBACA,kBACA,UACA,cACE,SAASC,QAASC,EAAOC,EAAQC,EAAcC,EAAUC,EAAMC,EAAIC,GAYrEA,EAAIC,IAAI,kBACND,EAAI,QAAU,kBAAkBE,KAAKC,UAAUC,YAC/CJ,EAAI,YAAc,oBAAoBE,KAAKC,UAAUC,YAEvD,IAAIC,EAAU,IAAI,WAIjB,IAAIC,KAEJC,KAAKC,IAAM,WACV,IAAIC,EACJ,GAAGH,EAAMI,QACRD,EAASH,EAAME,OACRG,MAAMC,QAAQ,OACjB,CAEJ,GAAGZ,EAAI,MAAQ,EAAE,CAChB,IACIa,EAAK,iBADElB,EAAyB,kBAAKF,QAAQqB,MAAM,8BAAgC,iBACrD,mHAGlCL,EAASM,SAASC,cAAcH,QAEhCJ,EAASb,EAAaqB,OAAO,WACtBC,IAAM,gBACbT,EAAOU,UAAY,wBACnBV,EAAOW,aAAa,OAAQ,gBAC5BvB,EAASwB,IAAIZ,EAAQ,UAAW,IAEjCA,EAAOa,UAAY,EAEpB,OAAOb,GAGRF,KAAKgB,KAAO,SAASd,GACpBA,EAAOE,MAAMC,QAAQ,OACrBN,EAAMiB,KAAKd,KA0Db,OArDAf,EAAM8B,iBAAmB,SAAqBC,GAU7C,IAAIA,EAAKC,GAAK,MAAM,IAAIC,MAAM,SAC9B,GAAG3B,EAAI,mBAAmB,CACzB,IAAIS,EAAUF,KAAKE,OAASJ,EAAQG,MACpCiB,EAAKG,YAAYnB,GACdT,EAAI,MAAM,GAAKA,EAAI,WACrBO,KAAKsB,OAAOJ,GACZlB,KAAKuB,MAAQ/B,EAAG0B,EAAM,SAAU3B,EAAKiC,MAAMxB,KAAM,SAAUkB,KAE3D5B,EAASwB,IAAIZ,GACZuB,MAAO,OACPC,OAAQ,WAMZnC,EAAKoC,OAAOxC,EAAM8B,kBACjBK,OAAQ,SAASJ,GAIblB,KAAKE,QACPZ,EAASwB,IAAId,KAAKE,QACjBuB,MAAOP,EAAKU,YAAc,KAC1BF,OAAQR,EAAKW,aAAe,QAI/BC,QAAS,WAGL9B,KAAKuB,QACPvB,KAAKuB,MAAMQ,SACX/B,KAAKuB,MAAQ,MAEXvB,KAAKE,SACPF,KAAKE,OAAO8B,WAAWC,YAAYjC,KAAKE,QACxCJ,EAAQkB,KAAKhB,KAAKE,eACXF,KAAKE,WAKRf,EAAM8B","file":"../BackgroundIframe.js","sourcesContent":["define([\r\n\t\"require\",\t\t\t// require.toUrl\r\n\t\"./_dijit\",\t// to export dijit.BackgroundIframe\r\n\t\"dojo/_base/config\",\r\n\t\"dojo/dom-construct\", // domConstruct.create\r\n\t\"dojo/dom-style\", // domStyle.set\r\n\t\"dojo/_base/lang\", // lang.extend lang.hitch\r\n\t\"dojo/on\",\r\n\t\"dojo/sniff\" // has(\"ie\"), has(\"trident\"), has(\"quirks\")\r\n], function(require, dijit, config, domConstruct, domStyle, lang, on, has){\r\n\r\n\t// module:\r\n\t//\t\tdijit/BackgroundIFrame\r\n\r\n\t// Flag for whether to create background iframe behind popups like Menus and Dialog.\r\n\t// A background iframe is useful to prevent problems with popups appearing behind applets/pdf files,\r\n\t// and is also useful on older versions of IE (IE6 and IE7) to prevent the \"bleed through select\" problem.\r\n\t// By default, it's enabled for IE6-10, excluding Windows Phone 8,\r\n\t// and it's also enabled for IE11 on Windows 7 and Windows 2008 Server.\r\n\t// TODO: For 2.0, make this false by default.  Also, possibly move definition to has.js so that this module can be\r\n\t// conditionally required via  dojo/has!bgIfame?dijit/BackgroundIframe\r\n\thas.add(\"config-bgIframe\",\r\n\t\t(has(\"ie\") && !/IEMobile\\/10\\.0/.test(navigator.userAgent)) || // No iframe on WP8, to match 1.9 behavior\r\n\t\t(has(\"trident\") && /Windows NT 6.[01]/.test(navigator.userAgent)));\r\n\r\n\tvar _frames = new function(){\r\n\t\t// summary:\r\n\t\t//\t\tcache of iframes\r\n\r\n\t\tvar queue = [];\r\n\r\n\t\tthis.pop = function(){\r\n\t\t\tvar iframe;\r\n\t\t\tif(queue.length){\r\n\t\t\t\tiframe = queue.pop();\r\n\t\t\t\tiframe.style.display=\"\";\r\n\t\t\t}else{\r\n\t\t\t\t// transparency needed for DialogUnderlay and for tooltips on IE (to see screen near connector)\r\n\t\t\t\tif(has(\"ie\") < 9){\r\n\t\t\t\t\tvar burl = config[\"dojoBlankHtmlUrl\"] || require.toUrl(\"dojo/resources/blank.html\") || \"javascript:\\\"\\\"\";\r\n\t\t\t\t\tvar html=\"<iframe src='\" + burl + \"' role='presentation'\"\r\n\t\t\t\t\t\t+ \" style='position: absolute; left: 0px; top: 0px;\"\r\n\t\t\t\t\t\t+ \"z-index: -1; filter:Alpha(Opacity=\\\"0\\\");'>\";\r\n\t\t\t\t\tiframe = document.createElement(html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tiframe = domConstruct.create(\"iframe\");\r\n\t\t\t\t\tiframe.src = 'javascript:\"\"';\r\n\t\t\t\t\tiframe.className = \"dijitBackgroundIframe\";\r\n\t\t\t\t\tiframe.setAttribute(\"role\", \"presentation\");\r\n\t\t\t\t\tdomStyle.set(iframe, \"opacity\", 0.1);\r\n\t\t\t\t}\r\n\t\t\t\tiframe.tabIndex = -1; // Magic to prevent iframe from getting focus on tab keypress - as style didn't work.\r\n\t\t\t}\r\n\t\t\treturn iframe;\r\n\t\t};\r\n\r\n\t\tthis.push = function(iframe){\r\n\t\t\tiframe.style.display=\"none\";\r\n\t\t\tqueue.push(iframe);\r\n\t\t}\r\n\t}();\r\n\r\n\r\n\tdijit.BackgroundIframe = function(/*DomNode*/ node){\r\n\t\t// summary:\r\n\t\t//\t\tFor IE/FF z-index shenanigans. id attribute is required.\r\n\t\t//\r\n\t\t// description:\r\n\t\t//\t\tnew dijit.BackgroundIframe(node).\r\n\t\t//\r\n\t\t//\t\tMakes a background iframe as a child of node, that fills\r\n\t\t//\t\tarea (and position) of node\r\n\r\n\t\tif(!node.id){ throw new Error(\"no id\"); }\r\n\t\tif(has(\"config-bgIframe\")){\r\n\t\t\tvar iframe = (this.iframe = _frames.pop());\r\n\t\t\tnode.appendChild(iframe);\r\n\t\t\tif(has(\"ie\")<7 || has(\"quirks\")){\r\n\t\t\t\tthis.resize(node);\r\n\t\t\t\tthis._conn = on(node, 'resize', lang.hitch(this, \"resize\", node));\r\n\t\t\t}else{\r\n\t\t\t\tdomStyle.set(iframe, {\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\theight: '100%'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tlang.extend(dijit.BackgroundIframe, {\r\n\t\tresize: function(node){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tResize the iframe so it's the same size as node.\r\n\t\t\t//\t\tNeeded on IE6 and IE/quirks because height:100% doesn't work right.\r\n\t\t\tif(this.iframe){\r\n\t\t\t\tdomStyle.set(this.iframe, {\r\n\t\t\t\t\twidth: node.offsetWidth + 'px',\r\n\t\t\t\t\theight: node.offsetHeight + 'px'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tdestroy the iframe\r\n\t\t\tif(this._conn){\r\n\t\t\t\tthis._conn.remove();\r\n\t\t\t\tthis._conn = null;\r\n\t\t\t}\r\n\t\t\tif(this.iframe){\r\n\t\t\t\tthis.iframe.parentNode.removeChild(this.iframe);\r\n\t\t\t\t_frames.push(this.iframe);\r\n\t\t\t\tdelete this.iframe;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn dijit.BackgroundIframe;\r\n});\r\n"]}