{"version":3,"sources":["PopupMenuItem.js"],"names":["define","declare","domStyle","lang","query","pm","registry","MenuItem","baseClass","_fillContent","this","srcNodeRef","nodes","inherited","arguments","dropDownContainer","_openPopup","params","focus","popup","open","delegate","around","domNode","_closePopup","close","parentMenu","startup","_started","node","byNode","ownerDocumentBody","appendChild","setAttribute","containerNode","id","style","display","arrowWrapper","set","focusNode","destroyDescendants","preserveDom","_destroyed","destroyRecursive"],"mappings":";;;;;;;AAAAA,QACC,qBACA,iBACA,kBACA,aACA,UACA,aACA,aACA,WACE,SAASC,EAASC,EAAUC,EAAMC,EAAOC,EAAIC,EAAUC,GAKzD,OAAON,EAAQ,sBAAuBM,GAIrCC,UAAW,mCAEXC,aAAc,WAeb,GAAGC,KAAKC,WAAW,CAClB,IAAIC,EAAQR,EAAM,IAAKM,KAAKC,YAC5BD,KAAKG,UAAUC,WAAYF,EAAM,KAGjCF,KAAKK,kBAAoBL,KAAKC,aAIhCK,WAAY,SAAoBC,EAAoBC,GAMnD,IAAIC,EAAQT,KAAKS,MAEjBd,EAAGe,KAAKjB,EAAKkB,SAASJ,GACrBE,MAAOT,KAAKS,MACZG,OAAQZ,KAAKa,WAGXL,GAASC,EAAMD,OACjBC,EAAMD,SAIRM,YAAa,WACZnB,EAAGoB,MAAMf,KAAKS,OACdT,KAAKS,MAAMO,WAAa,MAGzBC,QAAS,WACR,IAAGjB,KAAKkB,SAAR,CAKA,GAJAlB,KAAKG,UAAUC,YAIXJ,KAAKS,MAAM,CACd,IAAIU,EAAOzB,EAAM,aAAcM,KAAKK,mBAAmB,GACvDL,KAAKS,MAAQb,EAASwB,OAAOD,GAE9BnB,KAAKqB,kBAAkBC,YAAYtB,KAAKS,MAAMI,SAC9Cb,KAAKS,MAAMI,QAAQU,aAAa,kBAAmBvB,KAAKwB,cAAcC,IACtEzB,KAAKS,MAAMQ,UAEXjB,KAAKS,MAAMI,QAAQa,MAAMC,QAAQ,OAC9B3B,KAAK4B,cACPpC,EAASqC,IAAI7B,KAAK4B,aAAc,aAAc,IAE/C5B,KAAK8B,UAAUP,aAAa,gBAAiB,UAG9CQ,mBAAoB,SAAqBC,GACrChC,KAAKS,QAGHT,KAAKS,MAAMwB,YACdjC,KAAKS,MAAMyB,iBAAiBF,UAEtBhC,KAAKS,OAEbT,KAAKG,UAAUC","file":"../PopupMenuItem.js","sourcesContent":["define([\r\n\t\"dojo/_base/declare\", // declare\r\n\t\"dojo/dom-style\", // domStyle.set\r\n\t\"dojo/_base/lang\",\r\n\t\"dojo/query\", // query\r\n\t\"./popup\",\r\n\t\"./registry\",\t// registry.byNode\r\n\t\"./MenuItem\",\r\n\t\"./hccss\"\r\n], function(declare, domStyle, lang, query, pm, registry, MenuItem){\r\n\r\n\t// module:\r\n\t//\t\tdijit/PopupMenuItem\r\n\r\n\treturn declare(\"dijit.PopupMenuItem\", MenuItem, {\r\n\t\t// summary:\r\n\t\t//\t\tAn item in a Menu that spawn a drop down (usually a drop down menu)\r\n\r\n\t\tbaseClass: \"dijitMenuItem dijitPopupMenuItem\",\r\n\r\n\t\t_fillContent: function(){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tWhen Menu is declared in markup, this code gets the menu label and\r\n\t\t\t//\t\tthe popup widget from the srcNodeRef.\r\n\t\t\t// description:\r\n\t\t\t//\t\tsrcNodeRef.innerHTML contains both the menu item text and a popup widget\r\n\t\t\t//\t\tThe first part holds the menu item text and the second part is the popup\r\n\t\t\t// example:\r\n\t\t\t// |\t<div data-dojo-type=\"dijit/PopupMenuItem\">\r\n\t\t\t// |\t\t<span>pick me</span>\r\n\t\t\t// |\t\t<popup> ... </popup>\r\n\t\t\t// |\t</div>\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\r\n\t\t\tif(this.srcNodeRef){\r\n\t\t\t\tvar nodes = query(\"*\", this.srcNodeRef);\r\n\t\t\t\tthis.inherited(arguments, [nodes[0]]);\r\n\r\n\t\t\t\t// save pointer to srcNode so we can grab the drop down widget after it's instantiated\r\n\t\t\t\tthis.dropDownContainer = this.srcNodeRef;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_openPopup: function(/*Object*/ params, /*Boolean*/ focus){\r\n\t\t\t// summary:\r\n\t\t\t//\t\tOpen the popup to the side of/underneath this MenuItem, and optionally focus first item\r\n\t\t\t// tags:\r\n\t\t\t//\t\tprotected\r\n\r\n\t\t\tvar popup = this.popup;\r\n\r\n\t\t\tpm.open(lang.delegate(params, {\r\n\t\t\t\tpopup: this.popup,\r\n\t\t\t\taround: this.domNode\r\n\t\t\t}));\r\n\r\n\t\t\tif(focus && popup.focus){\r\n\t\t\t\tpopup.focus();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_closePopup: function(){\r\n\t\t\tpm.close(this.popup);\r\n\t\t\tthis.popup.parentMenu = null;\r\n\t\t},\r\n\r\n\t\tstartup: function(){\r\n\t\t\tif(this._started){ return; }\r\n\t\t\tthis.inherited(arguments);\r\n\r\n\t\t\t// We didn't copy the dropdown widget from the this.srcNodeRef, so it's in no-man's\r\n\t\t\t// land now.  Move it to <body>.\r\n\t\t\tif(!this.popup){\r\n\t\t\t\tvar node = query(\"[widgetId]\", this.dropDownContainer)[0];\r\n\t\t\t\tthis.popup = registry.byNode(node);\r\n\t\t\t}\r\n\t\t\tthis.ownerDocumentBody.appendChild(this.popup.domNode);\r\n\t\t\tthis.popup.domNode.setAttribute(\"aria-labelledby\", this.containerNode.id);\r\n\t\t\tthis.popup.startup();\r\n\r\n\t\t\tthis.popup.domNode.style.display=\"none\";\r\n\t\t\tif(this.arrowWrapper){\r\n\t\t\t\tdomStyle.set(this.arrowWrapper, \"visibility\", \"\");\r\n\t\t\t}\r\n\t\t\tthis.focusNode.setAttribute(\"aria-haspopup\", \"true\");\r\n\t\t},\r\n\r\n\t\tdestroyDescendants: function(/*Boolean*/ preserveDom){\r\n\t\t\tif(this.popup){\r\n\t\t\t\t// Destroy the popup, unless it's already been destroyed.  This can happen because\r\n\t\t\t\t// the popup is a direct child of <body> even though it's logically my child.\r\n\t\t\t\tif(!this.popup._destroyed){\r\n\t\t\t\t\tthis.popup.destroyRecursive(preserveDom);\r\n\t\t\t\t}\r\n\t\t\t\tdelete this.popup;\r\n\t\t\t}\r\n\t\t\tthis.inherited(arguments);\r\n\t\t}\r\n\t});\r\n});\r\n"]}