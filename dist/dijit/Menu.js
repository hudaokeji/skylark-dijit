/**
 * dijit - A version of dijit.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dijit/
 * @license MIT
 */
define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(require,e,t,n,o,i,d,r,s,a,c,u,h,f,m,l){return c("dijit-legacy-requires")&&l(0,function(){require(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])}),t("dijit.Menu",m,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):e.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(e){return h.get(this._iframeContentDocument(e))||this._iframeContentDocument(e).__parent__||e.name&&document.frames[e.name]||null},_iframeContentDocument:function(e){return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.name&&document.frames[e.name]&&document.frames[e.name].document||null},bindDomNode:function(e){var t;if("iframe"==(e=n.byId(e,this.ownerDocument)).tagName.toLowerCase()){var i=e,d=this._iframeContentWindow(i);t=u.body(d.document)}else t=e==u.body(this.ownerDocument)?this.ownerDocument.documentElement:e;var c={node:e,iframe:i};o.set(e,"_dijitMenu"+this.id,this._bindings.push(c));var h=s.hitch(this,function(e){var t=this.selector,n=t?function(e){return a.selector(t,e)}:function(e){return e},o=this;return[a(e,n(this.leftClickToOpen?"click":"contextmenu"),function(e){e.stopPropagation(),e.preventDefault(),(new Date).getTime()<this._lastKeyDown+500||o._scheduleOpen(this,i,{x:e.pageX,y:e.pageY},e.target)}),a(e,n("keydown"),function(e){(93==e.keyCode||e.shiftKey&&e.keyCode==r.F10||this.leftClickToOpen&&e.keyCode==r.SPACE)&&(e.stopPropagation(),e.preventDefault(),o._scheduleOpen(this,i,null,e.target),this._lastKeyDown=(new Date).getTime())})]});c.connects=t?h(t):[],i&&(c.onloadHandler=s.hitch(this,function(){var e=this._iframeContentWindow(i),t=u.body(e.document);c.connects=h(t)}),i.addEventListener?i.addEventListener("load",c.onloadHandler,!1):i.attachEvent("onload",c.onloadHandler))},unBindDomNode:function(e){var t;try{t=n.byId(e,this.ownerDocument)}catch(e){return}var i="_dijitMenu"+this.id;if(t&&o.has(t,i)){for(var d,r=o.get(t,i)-1,s=this._bindings[r];d=s.connects.pop();)d.remove();var a=s.iframe;a&&(a.removeEventListener?a.removeEventListener("load",s.onloadHandler,!1):a.detachEvent("onload",s.onloadHandler)),o.remove(t,i),delete this._bindings[r]}},_scheduleOpen:function(e,t,n,o){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:o,delegatedTarget:e,iframe:t,coords:n})},1))},_openMyself:function(e){var t=e.target,o=e.iframe,r=e.coords,s=!r;if(this.currentTarget=e.delegatedTarget,r){if(o){var a=i.position(o,!0),u=this._iframeContentWindow(o),h=i.docScroll(u.document),m=d.getComputedStyle(o),l=d.toPixelValue,p=(c("ie")&&c("quirks")?0:l(o,m.paddingLeft))+(c("ie")&&c("quirks")?l(o,m.borderLeftWidth):0),_=(c("ie")&&c("quirks")?0:l(o,m.paddingTop))+(c("ie")&&c("quirks")?l(o,m.borderTopWidth):0);r.x+=a.x+p-h.x,r.y+=a.y+_-h.y}}else(r=i.position(t,!0)).x+=10,r.y+=10;var g=this,y=this._focusManager.get("prevNode"),v=this._focusManager.get("curNode"),w=!v||n.isDescendant(v,this.domNode)?y:v;function D(){g.refocus&&w&&w.focus(),f.close(g)}f.open({popup:this,x:r.x,y:r.y,onExecute:D,onCancel:D,orient:this.isLeftToRight()?"L":"R"}),this.focus(),s||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),f.close(this)}},destroy:function(){e.forEach(this._bindings,function(e){e&&this.unBindDomNode(e.node)},this),this.inherited(arguments)}})});
//# sourceMappingURL=sourcemaps/Menu.js.map
