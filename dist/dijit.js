/**
 * dijit - A version of dijit.js framework that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/dijit/
 * @license MIT
 */
!function(t,e){var i=e.define,o=e.require,n="function"==typeof i&&i.amd,s=!n&&"undefined"!=typeof exports;if(!n&&!i){var r={};i=e.define=function(t,e,i){"function"==typeof i?(r[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),o=t.split("/");i.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?i.pop():i.push(o[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},o(t)):r[t]={factory:null,resolved:!0,exports:i}},o=e.require=function(t){if(!r.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var i=r[t];if(!i.resolved){var n=[];i.deps.forEach(function(t){n.push(o(t))}),i.exports=i.factory.apply(e,n)||null,i.resolved=!0}return i.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,e){t("dijit/a11y",["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(t,e,i,o,n,s,r){var a={_isElementShown:function(t){var e=o.get(t);return"hidden"!=e.visibility&&"collapsed"!=e.visibility&&"none"!=e.display&&"hidden"!=i.get(t,"type")},hasDefaultTabStop:function(t){switch(t.nodeName.toLowerCase()){case"a":return i.has(t,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var e;try{var o=t.contentDocument;if("designMode"in o&&"on"==o.designMode)return!0;e=o.body}catch(i){try{e=t.contentWindow.document.body}catch(t){return!1}}return e&&("true"==e.contentEditable||e.firstChild&&"true"==e.firstChild.contentEditable);default:return"true"==t.contentEditable}},effectiveTabIndex:function(t){return i.get(t,"disabled")?void 0:i.has(t,"tabIndex")?+i.get(t,"tabIndex"):a.hasDefaultTabStop(t)?0:void 0},isTabNavigable:function(t){return a.effectiveTabIndex(t)>=0},isFocusable:function(t){return a.effectiveTabIndex(t)>=-1},_getTabNavigable:function(t){var e,o,n,r,d,h,l={};function c(t){return t&&"input"==t.tagName.toLowerCase()&&t.type&&"radio"==t.type.toLowerCase()&&t.name&&t.name.toLowerCase()}var u=a._isElementShown,f=a.effectiveTabIndex,p=function(t){for(var a=t.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||s("ie")<=9&&"HTML"!==a.scopeName)&&u(a)){var m=f(a);if(m>=0){0==m?(e||(e=a),o=a):m>0&&((!n||m<r)&&(r=m,n=a),(!d||m>=h)&&(h=m,d=a));var g=c(a);i.get(a,"checked")&&g&&(l[g]=a)}"SELECT"!=a.nodeName.toUpperCase()&&p(a)}};function m(t){return l[c(t)]||t}return u(t)&&p(t),{first:m(e),last:m(o),lowest:m(n),highest:m(d)}},getFirstInTabbingOrder:function(t,i){var o=a._getTabNavigable(e.byId(t,i));return o.lowest?o.lowest:o.first},getLastInTabbingOrder:function(t,i){var o=a._getTabNavigable(e.byId(t,i));return o.last?o.last:o.highest}};return s("extend-dojo")&&n.mixin(r,a),a}),t("dijit/registry",["dojo/_base/array","dojo/_base/window","./main"],function(t,e,i){var o={},n={},s={length:0,add:function(t){if(n[t.id])throw new Error("Tried to register widget with id=="+t.id+" but that id is already registered");n[t.id]=t,this.length++},remove:function(t){n[t]&&(delete n[t],this.length--)},byId:function(t){return"string"==typeof t?n[t]:t},byNode:function(t){return n[t.getAttribute("widgetId")]},toArray:function(){var t=[];for(var e in n)t.push(n[e]);return t},getUniqueId:function(t){var e;do{e=t+"_"+(t in o?++o[t]:o[t]=0)}while(n[e]);return"dijit"==i._scopeName?e:i._scopeName+"_"+e},findWidgets:function(t,e){var i=[];return function t(o){for(var s=o.firstChild;s;s=s.nextSibling)if(1==s.nodeType){var r=s.getAttribute("widgetId");if(r){var a=n[r];a&&i.push(a)}else s!==e&&t(s)}}(t),i},_destroyAll:function(){i._curFocus=null,i._prevFocus=null,i._activeStack=[],t.forEach(s.findWidgets(e.body()),function(t){t._destroyed||(t.destroyRecursive?t.destroyRecursive():t.destroy&&t.destroy())})},getEnclosingWidget:function(t){for(;t;){var e=1==t.nodeType&&t.getAttribute("widgetId");if(e)return n[e];t=t.parentNode}return null},_hash:n};return i.registry=s,s}),t("dijit/WidgetSet",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(t,e,i,o){var n=e("dijit.WidgetSet",null,{constructor:function(){this._hash={},this.length=0},add:function(t){if(this._hash[t.id])throw new Error("Tried to register widget with id=="+t.id+" but that id is already registered");this._hash[t.id]=t,this.length++},remove:function(t){this._hash[t]&&(delete this._hash[t],this.length--)},forEach:function(t,e){e=e||i.global;var o,n=0;for(o in this._hash)t.call(e,this._hash[o],n++,this._hash);return this},filter:function(t,e){e=e||i.global;var o,s=new n,r=0;for(o in this._hash){var a=this._hash[o];t.call(e,a,r++,this._hash)&&s.add(a)}return s},byId:function(t){return this._hash[t]},byClass:function(t){var e,i,o=new n;for(e in this._hash)(i=this._hash[e]).declaredClass==t&&o.add(i);return o},toArray:function(){var t=[];for(var e in this._hash)t.push(this._hash[e]);return t},map:function(e,i){return t.map(this.toArray(),e,i)},every:function(t,e){e=e||i.global;var o,n=0;for(o in this._hash)if(!t.call(e,this._hash[o],n++,this._hash))return!1;return!0},some:function(t,e){e=e||i.global;var o,n=0;for(o in this._hash)if(t.call(e,this._hash[o],n++,this._hash))return!0;return!1}});return t.forEach(["forEach","filter","byClass","map","every","some"],function(t){o[t]=n.prototype[t]}),n}),t("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g){var _,b,v=e([c,r],{curNode:null,activeStack:[],constructor:function(){var e=a.hitch(this,function(t){i.isDescendant(this.curNode,t)&&this.set("curNode",null),i.isDescendant(this.prevNode,t)&&this.set("prevNode",null)});t.before(s,"empty",e),t.before(s,"destroy",e)},registerIframe:function(t){return this.registerWin(t.contentWindow,t)},registerWin:function(t,e){var i=this,o=t.document&&t.document.body;if(o){var n=l("pointer-events")?"pointerdown":l("MSPointer")?"MSPointerDown":l("touch-events")?"mousedown, touchstart":"mousedown",s=d(t.document,n,function(t){t&&t.target&&null==t.target.parentNode||i._onTouchNode(e||t.target,"mouse")}),r=d(o,"focusin",function(t){if(t.target.tagName){var o=t.target.tagName.toLowerCase();"#document"!=o&&"body"!=o&&(p.isFocusable(t.target)?i._onFocusNode(e||t.target):i._onTouchNode(e||t.target))}}),a=d(o,"focusout",function(t){i._onBlurNode(e||t.target)});return{remove:function(){s.remove(),r.remove(),a.remove(),s=r=a=null,o=null}}}},_onBlurNode:function(t){var e=(new Date).getTime();e<_+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(a.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),e<b+100||(this._clearActiveWidgetsTimer=setTimeout(a.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0)))},_onTouchNode:function(t,e){b=(new Date).getTime(),this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),n.contains(t,"dijitPopup")&&(t=t.firstChild);var i=[];try{for(;t;){var s=o.get(t,"dijitPopupParent");if(s)t=m.byId(s).domNode;else if(t.tagName&&"body"==t.tagName.toLowerCase()){if(t===u.body())break;t=f.get(t.ownerDocument).frameElement}else{var r=t.getAttribute&&t.getAttribute("widgetId"),a=r&&m.byId(r);!a||"mouse"==e&&a.get("disabled")||i.unshift(r),t=t.parentNode}}}catch(t){}this._setStack(i,e)},_onFocusNode:function(t){t&&9!=t.nodeType&&(_=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(t),t!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",t)))},_setStack:function(t,e){var i=this.activeStack,o=i.length-1,n=t.length-1;if(t[n]!=i[o]){var s,r;for(this.set("activeStack",t),r=o;r>=0&&i[r]!=t[r];r--)(s=m.byId(i[r]))&&(s._hasBeenBlurred=!0,s.set("focused",!1),s._focusManager==this&&s._onBlur(e),this.emit("widget-blur",s,e));for(r++;r<=n;r++)(s=m.byId(t[r]))&&(s.set("focused",!0),s._focusManager==this&&s._onFocus(e),this.emit("widget-focus",s,e))}},focus:function(t){if(t)try{t.focus()}catch(t){}}}),y=new v;for(var C in h(function(){var t=y.registerWin(f.get(document));l("ie")&&d(window,"unload",function(){t&&(t.remove(),t=null)})}),g.focus=function(t){y.focus(t)},y)/^_/.test(C)||(g.focus[C]="function"==typeof y[C]?a.hitch(y,C):y[C]);return y.watch(function(t,e,i){g.focus[t]=i}),y}),t("dijit/selection",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","dijit/focus"],function(t,e,i,o,n,s){var r=function(r){var a=r.document;this.getType=function(){if(a.getSelection){var t,e="text";try{t=r.getSelection()}catch(t){}if(t&&1==t.rangeCount){var i=t.getRangeAt(0);i.startContainer==i.endContainer&&i.endOffset-i.startOffset==1&&3!=i.startContainer.nodeType&&(e="control")}return e}return a.selection.type.toLowerCase()},this.getSelectedText=function(){if(a.getSelection){var t=r.getSelection();return t?t.toString():""}return"control"==this.getType()?null:a.selection.createRange().text},this.getSelectedHtml=function(){if(a.getSelection){var t=r.getSelection();if(t&&t.rangeCount){var e,i="";for(e=0;e<t.rangeCount;e++){var o=t.getRangeAt(e).cloneContents(),n=a.createElement("div");n.appendChild(o),i+=n.innerHTML}return i}return null}return"control"==this.getType()?null:a.selection.createRange().htmlText},this.getSelectedElement=function(){if("control"==this.getType()){if(a.getSelection){var t=r.getSelection();return t.anchorNode.childNodes[t.anchorOffset]}var e=a.selection.createRange();if(e&&e.item)return a.selection.createRange().item(0)}return null},this.getParentElement=function(){if("control"==this.getType()){var t=this.getSelectedElement();if(t)return t.parentNode}else{if(!a.getSelection){var e=a.selection.createRange();return e.collapse(!0),e.parentElement()}var i=a.getSelection();if(i){for(var o=i.anchorNode;o&&1!=o.nodeType;)o=o.parentNode;return o}}return null},this.hasAncestorElement=function(t){return null!=this.getAncestorElement.apply(this,arguments)},this.getAncestorElement=function(t){var e=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(e,arguments)},this.isTag=function(t,e){if(t&&t.tagName)for(var i=t.tagName.toLowerCase(),o=0;o<e.length;o++){var n=String(e[o]).toLowerCase();if(i==n)return n}return""},this.getParentOfType=function(t,e){for(;t;){if(this.isTag(t,e).length)return t;t=t.parentNode}return null},this.collapse=function(t){if(a.getSelection){var e=r.getSelection();e.removeAllRanges?t?e.collapseToStart():e.collapseToEnd():e.collapse(t)}else{var i=a.selection.createRange();i.collapse(t),i.select()}},this.remove=function(){var t=a.selection;return a.getSelection?((t=r.getSelection()).deleteFromDocument(),t):("none"!=t.type.toLowerCase()&&t.clear(),t)},this.selectElementChildren=function(t,i){var n;if(t=e.byId(t),a.getSelection){var s=r.getSelection();o("opera")?((n=s.rangeCount?s.getRangeAt(0):a.createRange()).setStart(t,0),n.setEnd(t,3==t.nodeType?t.length:t.childNodes.length),s.addRange(n)):s.selectAllChildren(t)}else if((n=t.ownerDocument.body.createTextRange()).moveToElementText(t),!i)try{n.select()}catch(t){}},this.selectElement=function(t,i){var s;if(t=e.byId(t),a.getSelection){var r=a.getSelection();s=a.createRange(),r.removeAllRanges&&(o("opera")&&r.getRangeAt(0)&&(s=r.getRangeAt(0)),s.selectNode(t),r.removeAllRanges(),r.addRange(s))}else try{var d=t.tagName?t.tagName.toLowerCase():"";(s="img"===d||"table"===d?n.body(a).createControlRange():n.body(a).createRange()).addElement(t),i||s.select()}catch(e){this.selectElementChildren(t,i)}},this.inSelection=function(t){var e,i;if(t)if(a.getSelection){var o=r.getSelection();if(o&&o.rangeCount>0&&(i=o.getRangeAt(0)),i&&i.compareBoundaryPoints&&a.createRange)try{if((e=a.createRange()).setStart(t,0),1===i.compareBoundaryPoints(i.START_TO_END,e))return!0}catch(t){}}else{i=a.selection.createRange();try{(e=t.ownerDocument.body.createTextRange()).moveToElementText(t)}catch(t){}if(i&&e&&1===i.compareEndPoints("EndToStart",e))return!0}return!1},this.getBookmark=function(){var t,e,i,o=a.selection,n=s.curNode;if(a.getSelection){if(o=r.getSelection())if(o.isCollapsed){if((i=n?n.tagName:"")&&("textarea"==(i=i.toLowerCase())||"input"==i&&(!n.type||"text"==n.type.toLowerCase())))return{isCollapsed:(o={start:n.selectionStart,end:n.selectionEnd,node:n,pRange:!0}).end<=o.start,mark:o};t={isCollapsed:!0},o.rangeCount&&(t.mark=o.getRangeAt(0).cloneRange())}else e=o.getRangeAt(0),t={isCollapsed:!1,mark:e.cloneRange()}}else if(o){if(i=(i=n?n.tagName:"").toLowerCase(),n&&i&&("button"==i||"textarea"==i||"input"==i))return o.type&&"none"==o.type.toLowerCase()?{isCollapsed:!0,mark:null}:{isCollapsed:!(e=o.createRange()).text||!e.text.length,mark:{range:e,pRange:!0}};t={};try{e=o.createRange(),t.isCollapsed=!("Text"==o.type?e.htmlText.length:e.length)}catch(e){return t.isCollapsed=!0,t}if("CONTROL"==o.type.toUpperCase())if(e.length){t.mark=[];for(var d=0,h=e.length;d<h;)t.mark.push(e.item(d++))}else t.isCollapsed=!0,t.mark=null;else t.mark=e.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return t},this.moveToBookmark=function(e){var o=e.mark;if(o)if(a.getSelection){var n=r.getSelection();if(n&&n.removeAllRanges)if(o.pRange){var s=o.node;s.selectionStart=o.start,s.selectionEnd=o.end}else n.removeAllRanges(),n.addRange(o);else console.warn("No idea how to restore selection for this browser!")}else if(a.selection&&o){var d;o.pRange?d=o.range:i.isArray(o)?(d=a.body.createControlRange(),t.forEach(o,function(t){d.addElement(t)})):(d=a.body.createTextRange()).moveToBookmark(o),d.select()}},this.isCollapsed=function(){return this.getBookmark().isCollapsed}},a=new r(window);return a.SelectionManager=r,a}),t("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../selection","../main"],function(t,e,i,o,n,s,r,a){var d={_curFocus:null,_prevFocus:null,isCollapsed:function(){return a.getBookmark().isCollapsed},getBookmark:function(){var t=n.global==window?r:new r.SelectionManager(n.global);return t.getBookmark()},moveToBookmark:function(t){var e=n.global==window?r:new r.SelectionManager(n.global);return e.moveToBookmark(t)},getFocus:function(t,i){var o=!s.curNode||t&&e.isDescendant(s.curNode,t.domNode)?a._prevFocus:s.curNode;return{node:o,bookmark:o&&o==s.curNode&&n.withGlobal(i||n.global,a.getBookmark),openedForWindow:i}},_activeStack:[],registerIframe:function(t){return s.registerIframe(t)},unregisterIframe:function(t){t&&t.remove()},registerWin:function(t,e){return s.registerWin(t,e)},unregisterWin:function(t){t&&t.remove()}};return s.focus=function(t){if(t){var e="node"in t?t.node:t,i=t.bookmark,o=t.openedForWindow,r=!!i&&i.isCollapsed;if(e){var d="iframe"==e.tagName.toLowerCase()?e.contentWindow:e;if(d&&d.focus)try{d.focus()}catch(t){}s._onFocusNode(e)}if(i&&n.withGlobal(o||n.global,a.isCollapsed)&&!r){o&&o.focus();try{n.withGlobal(o||n.global,a.moveToBookmark,null,[i])}catch(t){}}}},s.watch("curNode",function(t,e,i){a._curFocus=i,a._prevFocus=e,i&&o.publish("focusNode",i)}),s.watch("activeStack",function(t,e,i){a._activeStack=i}),s.on("widget-blur",function(t,e){o.publish("widgetBlur",t,e)}),s.on("widget-focus",function(t,e){o.publish("widgetFocus",t,e)}),i.mixin(a,d),a}),t("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(t,e,i,o,n){var s={};return t.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(t){s[t]=o[t]}),i.mixin(s,{defaultDuration:e.defaultDuration||200}),i.mixin(n,s),n}),t("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(t,e,i,o,n){var s,r=new t;return i(function(){var t=n.getBox();if(r._rlh=e(window,"resize",function(){var e=n.getBox();t.h==e.h&&t.w==e.w||(t=e,r.emit("resize"))}),8==o("ie")){var i=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=i&&(i=screen.deviceXDPI,r.emit("resize"))},500)}o("ios")&&(e(document,"focusin",function(t){s=t.target}),e(document,"focusout",function(t){s=null}))}),r.getEffectiveBox=function(t){var e=n.getBox(t),i=s&&s.tagName&&s.tagName.toLowerCase();if(o("ios")&&s&&!s.readOnly&&("textarea"==i||"input"==i&&/^(color|email|number|password|search|tel|text|url)$/.test(s.type))){e.h*=0==orientation||180==orientation?.66:.4;var r=s.getBoundingClientRect();e.h=Math.max(e.h,r.top+r.height)}return e},r}),t("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(t,e,i,o,n,s,r){function a(o,r,a,d){var h=s.getEffectiveBox(o.ownerDocument);o.parentNode&&"body"==String(o.parentNode.tagName).toLowerCase()||n.body(o.ownerDocument).appendChild(o);var l=null;t.some(r,function(t){var i=t.corner,n=t.pos,s=0,r={w:{L:h.l+h.w-n.x,R:n.x-h.l,M:h.w}[i.charAt(1)],h:{T:h.t+h.h-n.y,B:n.y-h.t,M:h.h}[i.charAt(0)]},c=o.style;if(c.left=c.right="auto",a){var u=a(o,t.aroundCorner,i,r,d);s=void 0===u?0:u}var f=o.style,p=f.display,m=f.visibility;"none"==f.display&&(f.visibility="hidden",f.display="");var g=e.position(o);f.display=p,f.visibility=m;var _={L:n.x,R:n.x-g.w,M:Math.max(h.l,Math.min(h.l+h.w,n.x+(g.w>>1))-g.w)}[i.charAt(1)],b={T:n.y,B:n.y-g.h,M:Math.max(h.t,Math.min(h.t+h.h,n.y+(g.h>>1))-g.h)}[i.charAt(0)],v=Math.max(h.l,_),y=Math.max(h.t,b),C=Math.min(h.l+h.w,_+g.w),x=Math.min(h.t+h.h,b+g.h),j=C-v,N=x-y;return s+=g.w-j+(g.h-N),(null==l||s<l.overflow)&&(l={corner:i,aroundCorner:t.aroundCorner,x:v,y:y,w:j,h:N,overflow:s,spaceAvailable:r}),!s}),l.overflow&&a&&a(o,l.aroundCorner,l.corner,l.spaceAvailable,d);var c=l.y,u=l.x,f=n.body(o.ownerDocument);/relative|absolute/.test(i.get(f,"position"))&&(c-=i.get(f,"marginTop"),u-=i.get(f,"marginLeft"));var p=o.style;return p.top=c+"px",p.left=u+"px",p.right="auto",l}var d={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},h={at:function(e,i,o,n,s){var r=t.map(o,function(t){var e={corner:t,aroundCorner:d[t],pos:{x:i.x,y:i.y}};return n&&(e.pos.x+="L"==t.charAt(1)?n.x:-n.x,e.pos.y+="T"==t.charAt(0)?n.y:-n.y),e});return a(e,r,s)},around:function(n,s,r,d,h){var l;if("string"==typeof s||"offsetWidth"in s||"ownerSVGElement"in s){if(l=e.position(s,!0),/^(above|below)/.test(r[0])){var c=e.getBorderExtents(s),u=s.firstChild?e.getBorderExtents(s.firstChild):{t:0,l:0,b:0,r:0},f=e.getBorderExtents(n),p=n.firstChild?e.getBorderExtents(n.firstChild):{t:0,l:0,b:0,r:0};l.y+=Math.min(c.t+u.t,f.t+p.t),l.h-=Math.min(c.t+u.t,f.t+p.t)+Math.min(c.b+u.b,f.b+p.b)}}else l=s;if(s.parentNode)for(var m="absolute"==i.getComputedStyle(s).position,g=s.parentNode;g&&1==g.nodeType&&"BODY"!=g.nodeName;){var _=e.position(g,!0),b=i.getComputedStyle(g);if(/relative|absolute/.test(b.position)&&(m=!1),!m&&/hidden|auto|scroll/.test(b.overflow)){var v=Math.min(l.y+l.h,_.y+_.h),y=Math.min(l.x+l.w,_.x+_.w);l.x=Math.max(l.x,_.x),l.y=Math.max(l.y,_.y),l.h=v-l.y,l.w=y-l.x}"absolute"==b.position&&(m=!0),g=g.parentNode}var C=l.x,x=l.y,j="w"in l?l.w:l.w=l.width,N="h"in l?l.h:(o.deprecated("place.around: dijit/place.__Rectangle: { x:"+C+", y:"+x+", height:"+l.height+", width:"+j+" } has been deprecated.  Please use { x:"+C+", y:"+x+", h:"+l.height+", w:"+j+" }","","2.0"),l.h=l.height),w=[];function D(t,e){w.push({aroundCorner:t,corner:e,pos:{x:{L:C,R:C+j,M:C+(j>>1)}[t.charAt(1)],y:{T:x,B:x+N,M:x+(N>>1)}[t.charAt(0)]}})}t.forEach(r,function(t){var e=d;switch(t){case"above-centered":D("TM","BM");break;case"below-centered":D("BM","TM");break;case"after-centered":e=!e;case"before-centered":D(e?"ML":"MR",e?"MR":"ML");break;case"after":e=!e;case"before":D(e?"TL":"TR",e?"TR":"TL"),D(e?"BL":"BR",e?"BR":"BL");break;case"below-alt":e=!e;case"below":D(e?"BL":"BR",e?"TL":"TR"),D(e?"BR":"BL",e?"TR":"TL");break;case"above-alt":e=!e;case"above":D(e?"TL":"TR",e?"BL":"BR"),D(e?"TR":"TL",e?"BR":"BL");break;default:D(t.aroundCorner,t.corner)}});var S=a(n,w,h,{w:j,h:N});return S.aroundNodePos=l,S}};return r.place=h}),t("dijit/_base/place",["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(t,e,i,o,n){var s={getViewport:function(){return i.getBox()}};return s.placeOnScreen=o.at,s.placeOnScreenAroundElement=function(t,i,n,s){var r;if(e.isArray(n))r=n;else for(var a in r=[],n)r.push({aroundCorner:a,corner:n[a]});return o.around(t,i,r,!0,s)},s.placeOnScreenAroundNode=s.placeOnScreenAroundElement,s.placeOnScreenAroundRectangle=s.placeOnScreenAroundElement,s.getPopupAroundAlignment=function(e,i){var o={};return t.forEach(e,function(t){var e=i;switch(t){case"after":o[i?"BR":"BL"]=i?"BL":"BR";break;case"before":o[i?"BL":"BR"]=i?"BR":"BL";break;case"below-alt":e=!e;case"below":o[e?"BL":"BR"]=e?"TL":"TR",o[e?"BR":"BL"]=e?"TR":"TL";break;case"above-alt":e=!e;case"above":default:o[e?"TL":"TR"]=e?"BL":"BR",o[e?"TR":"TL"]=e?"BR":"BL"}}),o},e.mixin(n,s),n}),t("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(t,e,i,o,n,s,r,a){a.add("config-bgIframe",a("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||a("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var d=new function(){var e=[];this.pop=function(){var s;if(e.length)(s=e.pop()).style.display="";else{if(a("ie")<9){var r=i.dojoBlankHtmlUrl||t.toUrl("dojo/resources/blank.html")||'javascript:""',d="<iframe src='"+r+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";s=document.createElement(d)}else(s=o.create("iframe")).src='javascript:""',s.className="dijitBackgroundIframe",s.setAttribute("role","presentation"),n.set(s,"opacity",.1);s.tabIndex=-1}return s},this.push=function(t){t.style.display="none",e.push(t)}};return e.BackgroundIframe=function(t){if(!t.id)throw new Error("no id");if(a("config-bgIframe")){var e=this.iframe=d.pop();t.appendChild(e),a("ie")<7||a("quirks")?(this.resize(t),this._conn=r(t,"resize",s.hitch(this,"resize",t))):n.set(e,{width:"100%",height:"100%"})}},s.extend(e.BackgroundIframe,{resize:function(t){this.iframe&&n.set(this.iframe,{width:t.offsetWidth+"px",height:t.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}}),e.BackgroundIframe}),t("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){function g(){this._popupWrapper&&(s.destroy(this._popupWrapper),delete this._popupWrapper)}var _=i(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var t=this._firstAroundPosition,e=r.position(this._firstAroundNode,!0),i=e.x-t.x,o=e.y-t.y;if(i||o){this._firstAroundPosition=e;for(var n=0;n<this._stack.length;n++){var s=this._stack[n].wrapper.style;s.top=parseFloat(s.top)+o+"px","auto"==s.right?s.left=parseFloat(s.left)+i+"px":s.right=parseFloat(s.right)-i+"px"}}this._aroundMoveListener=setTimeout(l.hitch(this,"_repositionAll"),i||o?10:50)}},_createWrapper:function(t){var i=t._popupWrapper,o=t.domNode;if(!i){(i=s.create("div",{class:"dijitPopup",style:{display:"none"},role:"region","aria-label":t["aria-label"]||t.label||t.name||t.id},t.ownerDocumentBody)).appendChild(o);var n=o.style;n.display="",n.visibility="",n.position="",n.top="0px",t._popupWrapper=i,e.after(t,"destroy",g,!0),"ontouchend"in document&&c(i,"touchend",function(t){/^(input|button|textarea)$/i.test(t.target.tagName)||t.preventDefault()})}return i},moveOffScreen:function(t){var e=this._createWrapper(t),i=r.isBodyLtr(t.ownerDocument),o={visibility:"hidden",top:"-9999px",display:""};return o[i?"left":"right"]="-9999px",o[i?"right":"left"]="auto",a.set(e,o),e},hide:function(t){var e=this._createWrapper(t);a.set(e,{display:"none",height:"auto",overflow:"visible",border:""});var i=t.domNode;"_originalStyle"in i&&(i.style.cssText=i._originalStyle)},getTopPopup:function(){for(var t=this._stack,e=t.length-1;e>0&&t[e].parent===t[e-1].widget;e--);return t[e]},open:function(t){for(var e=this._stack,i=t.popup,s=i.domNode,m=t.orient||["below","below-alt","above","above-alt"],g=t.parent?t.parent.isLeftToRight():r.isBodyLtr(i.ownerDocument),_=t.around,b=t.around&&t.around.id?t.around.id+"_dropdown":"popup_"+this._idGen++;e.length&&(!t.parent||!o.isDescendant(t.parent.domNode,e[e.length-1].widget.domNode));)this.close(e[e.length-1].widget);var v=this.moveOffScreen(i);i.startup&&!i._started&&i.startup();var y,C=r.position(s);if("maxHeight"in t&&-1!=t.maxHeight)y=t.maxHeight||1/0;else{var x=p.getEffectiveBox(this.ownerDocument),j=_?r.position(_,!1):{y:t.y-(t.padding||0),h:2*(t.padding||0)};y=Math.floor(Math.max(j.y,x.h-(j.y+j.h)))}if(C.h>y){var N=a.getComputedStyle(s),w=N.borderLeftWidth+" "+N.borderLeftStyle+" "+N.borderLeftColor;a.set(v,{overflowY:"scroll",height:y+"px",border:w}),s._originalStyle=s.style.cssText,s.style.border="none"}n.set(v,{id:b,style:{zIndex:this._beginZIndex+e.length},class:"dijitPopup "+(i.baseClass||i.class||"").split(" ")[0]+"Popup",dijitPopupParent:t.parent?t.parent.id:""}),0==e.length&&_&&(this._firstAroundNode=_,this._firstAroundPosition=r.position(_,!0),this._aroundMoveListener=setTimeout(l.hitch(this,"_repositionAll"),50)),d("config-bgIframe")&&!i.bgIframe&&(i.bgIframe=new f(v));var D=i.orient?l.hitch(i,"orient"):null,S=_?u.around(v,_,m,g,D):u.at(v,t,"R"==m?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],t.padding,D);v.style.visibility="visible",s.style.visibility="visible";var T=[];return T.push(c(v,"keydown",l.hitch(this,function(e){if(e.keyCode==h.ESCAPE&&t.onCancel)e.stopPropagation(),e.preventDefault(),t.onCancel();else if(e.keyCode==h.TAB){e.stopPropagation(),e.preventDefault();var i=this.getTopPopup();i&&i.onCancel&&i.onCancel()}}))),i.onCancel&&t.onCancel&&T.push(i.on("cancel",t.onCancel)),T.push(i.on(i.onExecute?"execute":"change",l.hitch(this,function(){var t=this.getTopPopup();t&&t.onExecute&&t.onExecute()}))),e.push({widget:i,wrapper:v,parent:t.parent,onExecute:t.onExecute,onCancel:t.onCancel,onClose:t.onClose,handlers:T}),i.onOpen&&i.onOpen(S),S},close:function(e){for(var i=this._stack;e&&t.some(i,function(t){return t.widget==e})||!e&&i.length;){var o,n=i.pop(),s=n.widget,r=n.onClose;for(s.bgIframe&&(s.bgIframe.destroy(),delete s.bgIframe),s.onClose&&s.onClose();o=n.handlers.pop();)o.remove();s&&s.domNode&&this.hide(s),r&&r()}0==i.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return m.popup=new _}),t("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(t,e,i){var o=i._createWrapper;i._createWrapper=function(i){return i.declaredClass||(i={_popupWrapper:i.parentNode&&t.contains(i.parentNode,"dijitPopup")?i.parentNode:null,domNode:i,destroy:function(){},ownerDocument:i.ownerDocument,ownerDocumentBody:e.body(i.ownerDocument)}),o.call(this,i)};var n=i.open;return i.open=function(t){if(t.orient&&"string"!=typeof t.orient&&!("length"in t.orient)){var e=[];for(var i in t.orient)e.push({aroundCorner:i,corner:t.orient[i]});t.orient=e}return n.call(this,t)},i}),t("dijit/_base/scroll",["dojo/window","../main"],function(t,e){e.scrollIntoView=function(e,i){t.scrollIntoView(e,i)}}),t("dijit/_base/sniff",["dojo/uacss"],function(){}),t("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(t,e,i,o,n,s){var r=s.typematic={_fireEventAndReload:function(){this._timer=null,this._callback(++this._count,this._node,this._evt),this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay),this._timer=setTimeout(i.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(t,e,o,n,s,r,a,d){if(s!=this._obj){for(var h in this.stop(),this._initialDelay=a||500,this._subsequentDelay=r||.9,this._minDelay=d||10,this._obj=s,this._node=o,this._currentTimeout=-1,this._count=-1,this._callback=i.hitch(e,n),this._evt={faux:!0},t)if("layerX"!=h&&"layerY"!=h){var l=t[h];"function"!=typeof l&&void 0!==l&&(this._evt[h]=l)}this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(n,s,a,d,h,l,c){var u="keyCode"in s?"keydown":"charCode"in s?"keypress":e._keypress,f="keyCode"in s?"keyCode":"charCode"in s?"charCode":"charOrCode",p=[o(n,u,i.hitch(this,function(t){t[f]!=s[f]||void 0!==s.ctrlKey&&s.ctrlKey!=t.ctrlKey||void 0!==s.altKey&&s.altKey!=t.altKey||void 0!==s.metaKey&&s.metaKey!=(t.metaKey||!1)||void 0!==s.shiftKey&&s.shiftKey!=t.shiftKey?r._obj==s&&r.stop():(t.stopPropagation(),t.preventDefault(),r.trigger(t,a,n,d,s,h,l,c))})),o(n,"keyup",i.hitch(this,function(){r._obj==s&&r.stop()}))];return{remove:function(){t.forEach(p,function(t){t.remove()})}}},addMouseListener:function(e,s,a,d,h,l){var c=[o(e,"mousedown",i.hitch(this,function(t){t.preventDefault(),r.trigger(t,s,e,a,e,d,h,l)})),o(e,"mouseup",i.hitch(this,function(t){this._obj&&t.preventDefault(),r.stop()})),o(e,"mouseout",i.hitch(this,function(t){this._obj&&t.preventDefault(),r.stop()})),o(e,"dblclick",i.hitch(this,function(t){t.preventDefault(),n("ie")<9&&(r.trigger(t,s,e,a,e,d,h,l),setTimeout(i.hitch(this,r.stop),50))}))];return{remove:function(){t.forEach(c,function(t){t.remove()})}}},addListener:function(e,i,o,n,s,r,a,d){var h=[this.addKeyListener(i,o,n,s,r,a,d),this.addMouseListener(e,n,s,r,a,d)];return{remove:function(){t.forEach(h,function(t){t.remove()})}}}};return r}),t("dijit/_base/typematic",["../typematic"],function(){}),t("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(t,e,i,o){return i(function(){e("highcontrast")&&t.add(o.body(),"dijit_a11y")}),e}),t("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(t,e,i){var o={hasWaiRole:function(t,e){var i=this.getWaiRole(t);return e?i.indexOf(e)>-1:i.length>0},getWaiRole:function(i){return e.trim((t.get(i,"role")||"").replace("wairole:",""))},setWaiRole:function(e,i){t.set(e,"role",i)},removeWaiRole:function(i,o){var n=t.get(i,"role");if(n)if(o){var s=e.trim((" "+n+" ").replace(" "+o+" "," "));t.set(i,"role",s)}else i.removeAttribute("role")},hasWaiState:function(t,e){return t.hasAttribute?t.hasAttribute("aria-"+e):!!t.getAttribute("aria-"+e)},getWaiState:function(t,e){return t.getAttribute("aria-"+e)||""},setWaiState:function(t,e,i){t.setAttribute("aria-"+e,i)},removeWaiState:function(t,e){t.removeAttribute("aria-"+e)}};return e.mixin(i,o),i}),t("dijit/_base/window",["dojo/window","../main"],function(t,e){e.getDocumentWindow=function(e){return t.get(e)}}),t("dijit/_base",["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(t){return t._base}),t("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(t,e,i){return i("dijit.Destroyable",null,{destroy:function(t){this._destroyed=!0},own:function(){var i=["destroyRecursive","destroy","remove"];return t.forEach(arguments,function(o){var n,s=e.before(this,"destroy",function(t){o[n](t)}),r=[];function a(){s.remove(),t.forEach(r,function(t){t.remove()})}o.then?(n="cancel",o.then(a,a)):t.forEach(i,function(t){"function"==typeof o[t]&&(n||(n=t),r.push(e.after(o,t,a,!0)))})},this),arguments}})}),t("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x){u.add("dijit-legacy-requires",!f.isAsync),u.add("dojo-bidi",!1),u("dijit-legacy-requires")&&g(0,function(){t(["dijit/_base/manager"])});var j={};function N(t){return function(e){a[e?"set":"remove"](this.domNode,t,e),this._set(t,e)}}var w=s("dijit._WidgetBase",[_,y],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:N("lang"),dir:"",_setDirAttr:N("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(t){this._set("ownerDocument",t)},attributeMap:{},_blankGif:o.blankGif||t.toUrl("dojo/resources/blank.gif"),_introspect:function(){var t=this.constructor;if(!t._setterAttrs){var e=t.prototype,i=t._setterAttrs=[],o=t._onMap={};for(var n in e.attributeMap)i.push(n);for(n in e)/^on/.test(n)&&(o[n.substring(2).toLowerCase()]=n),/^_set[A-Z](.*)Attr$/.test(n)&&(n=n.charAt(4).toLowerCase()+n.substr(5,n.length-9),e.attributeMap&&n in e.attributeMap||i.push(n))}},postscript:function(t,e){this.create(t,e)},create:function(t,e){var i;if(this._introspect(),this.srcNodeRef=r.byId(e),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),t&&(this.params=t,p.mixin(this,t)),this.postMixInProperties(),this.id||(this.id=x.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=v.body(this.ownerDocument),x.add(this),this.buildRendering(),this.domNode){this._applyAttributes();var o=this.srcNodeRef;o&&o.parentNode&&this.domNode!==o&&(o.parentNode.replaceChild(this.domNode,o),i=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),i&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var t={};for(var i in this.params||{})t[i]=this._get(i);for(i in e.forEach(this.constructor._setterAttrs,function(e){if(!(e in t)){var i=this._get(e);i&&this.set(e,i)}},this),t)this.set(i,t[i])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var t=this.baseClass.split(" ");this.isLeftToRight()||(t=t.concat(e.map(t,function(t){return t+"Rtl"}))),d.add(this.domNode,t)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,e.forEach(this.getChildren(),function(t){t._started||t._destroyed||!p.isFunction(t.startup)||(t.startup(),t._started=!0)}))},destroyRecursive:function(t){this._beingDestroyed=!0,this.destroyDescendants(t),this.destroy(t)},destroy:function(t){function i(e){e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t)}this._beingDestroyed=!0,this.uninitialize(),e.forEach(this._connects,p.hitch(this,"disconnect")),e.forEach(this._supportingWidgets,i),this.domNode&&e.forEach(x.findWidgets(this.domNode,this.containerNode),i),this.destroyRendering(t),x.remove(this.id),this._destroyed=!0},destroyRendering:function(t){this.bgIframe&&(this.bgIframe.destroy(t),delete this.bgIframe),this.domNode&&(t?a.remove(this.domNode,"widgetId"):h.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(t||h.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(t){e.forEach(this.getChildren(),function(e){e.destroyRecursive&&e.destroyRecursive(t)})},uninitialize:function(){return!1},_setStyleAttr:function(t){var e=this.domNode;p.isObject(t)?c.set(e,t):e.style.cssText?e.style.cssText+="; "+t:e.style.cssText=t,this._set("style",t)},_attrToDom:function(t,i,o){o=arguments.length>=3?o:this.attributeMap[t],e.forEach(p.isArray(o)?o:[o],function(e){var o=this[e.node||e||"domNode"],n=e.type||"attribute";switch(n){case"attribute":p.isFunction(i)&&(i=p.hitch(this,i));var s=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(t)?t.toLowerCase():t;o.tagName?a.set(o,s,i):o.set(s,i);break;case"innerText":o.innerHTML="",o.appendChild(this.ownerDocument.createTextNode(i));break;case"innerHTML":o.innerHTML=i;break;case"class":d.replace(o,i,this[t])}},this)},get:function(t){var e=this._getAttrNames(t);return this[e.g]?this[e.g]():this._get(t)},set:function(t,e){if("object"==typeof t){for(var i in t)this.set(i,t[i]);return this}var o=this._getAttrNames(t),n=this[o.s];if(p.isFunction(n))var s=n.apply(this,Array.prototype.slice.call(arguments,1));else{var r=this.focusNode&&!p.isFunction(this.focusNode)?"focusNode":"domNode",a=this[r]&&this[r].tagName,d=a&&(j[a]||(j[a]=function(t){var e={};for(var i in t)e[i.toLowerCase()]=!0;return e}(this[r]))),h=t in this.attributeMap?this.attributeMap[t]:o.s in this?this[o.s]:d&&o.l in d&&"function"!=typeof e||/^aria-|^data-|^role$/.test(t)?r:null;null!=h&&this._attrToDom(t,e,h),this._set(t,e)}return s||this},_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;if(e[t])return e[t];var i=t.replace(/^[a-z]|-[a-zA-Z]/g,function(t){return t.charAt(t.length-1).toUpperCase()});return e[t]={n:t+"Node",s:"_set"+i+"Attr",g:"_get"+i+"Attr",l:i.toLowerCase()}},_set:function(t,e){var i,o,n=this[t];this[t]=e,!this._created||((i=n)===(o=e)||i!=i&&o!=o)||(this._watchCallbacks&&this._watchCallbacks(t,n,e),this.emit("attrmodified-"+t,{detail:{prevValue:n,newValue:e}}))},_get:function(t){return this[t]},emit:function(t,e,i){void 0===(e=e||{}).bubbles&&(e.bubbles=!0),void 0===e.cancelable&&(e.cancelable=!0),e.detail||(e.detail={}),e.detail.widget=this;var o,n=this["on"+t];return n&&(o=n.apply(this,i||[e])),this._started&&!this._beingDestroyed&&m.emit(this.domNode,t.toLowerCase(),e),o},on:function(t,e){var o=this._onMap(t);return o?i.after(this,o,e,!0):this.own(m(this.domNode,t,e))[0]},_onMap:function(t){var e=this.constructor,i=e._onMap;if(!i)for(var o in i=e._onMap={},e.prototype)/^on/.test(o)&&(i[o.replace(/^on/,"").toLowerCase()]=o);return i["string"==typeof t&&t.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?x.findWidgets(this.containerNode):[]},getParent:function(){return x.getEnclosingWidget(this.domNode.parentNode)},connect:function(t,e,i){return this.own(n.connect(t,e,this,i))[0]},disconnect:function(t){t.remove()},subscribe:function(t,e){return this.own(b.subscribe(t,p.hitch(this,e)))[0]},unsubscribe:function(t){t.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():l.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=c.get(this.domNode,"display")},placeAt:function(t,e){var i=!t.tagName&&x.byId(t);if(!i||!i.addChild||e&&"number"!=typeof e){var o=i&&"domNode"in i?i.containerNode&&!/after|before|replace/.test(e||"")?i.containerNode:i.domNode:r.byId(t,this.ownerDocument);h.place(this.domNode,o,e),!this._started&&(this.getParent()||{})._started&&this.startup()}else i.addChild(this,e);return this},defer:function(t,e){var i=setTimeout(p.hitch(this,function(){i&&(i=null,this._destroyed||p.hitch(this,t)())}),e||0);return{remove:function(){return i&&(clearTimeout(i),i=null),null}}}});return u("dojo-bidi")&&w.extend(C),w}),t("dijit/a11yclick",["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(t,e,i,o){function n(e){if((e.keyCode===t.ENTER||e.keyCode===t.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName))for(var i=e.target;i;i=i.parentNode)if(i.dojoClick)return!0}var s;i(document,"keydown",function(t){n(t)?(s=t.target,t.preventDefault()):s=null}),i(document,"keyup",function(t){n(t)&&t.target==s&&(s=null,i.emit(t.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,altKey:t.altKey,_origType:t.type}))});var r=function(t,e){return t.dojoClick=!0,i(t,"click",e)};return r.click=r,r.press=function(n,s){var r=i(n,o.press,function(t){("mousedown"!=t.type||e.isLeft(t))&&s(t)}),a=i(n,"keydown",function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||s(e)});return{remove:function(){r.remove(),a.remove()}}},r.release=function(n,s){var r=i(n,o.release,function(t){("mouseup"!=t.type||e.isLeft(t))&&s(t)}),a=i(n,"keyup",function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||s(e)});return{remove:function(){r.remove(),a.remove()}}},r.move=o.move,r}),t("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(t,e,i,o,n,s){var r=o("dijit._OnDijitClickMixin",null,{connect:function(t,e,i){return this.inherited(arguments,[t,"ondijitclick"==e?s:e,i])}});return r.a11yclick=s,r}),t("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(t,e,i,o){return o.extend(e,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),i("dijit._FocusMixin",null,{_focusManager:t})}),t("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(t,i,o,n,s,r,a,d,h,l,c,u,f){function p(){}function m(t){return function(e,i,n,s){return e&&"string"==typeof i&&e[i]==p?e.on(i.substring(2).toLowerCase(),a.hitch(n,s)):t.apply(o,arguments)}}t.around(o,"connect",m),r.connect&&t.around(r,"connect",m);var g=n("dijit._Widget",[c,u,f],{onClick:p,onDblClick:p,onKeyDown:p,onKeyPress:p,onKeyUp:p,onMouseDown:p,onMouseMove:p,onMouseOut:p,onMouseOver:p,onMouseLeave:p,onMouseEnter:p,onMouseUp:p,constructor:function(t){for(var e in this._toConnect={},t)this[e]===p&&(this._toConnect[e.replace(/^on/,"").toLowerCase()]=t[e],delete t[e])},postCreate:function(){for(var t in this.inherited(arguments),this._toConnect)this.on(t,this._toConnect[t]);delete this._toConnect},on:function(t,e){return this[this._onMap(t)]===p?o.connect(this.domNode,t.toLowerCase(),this,e):this.inherited(arguments)},_setFocusedAttr:function(t){this._focused=t,this._set("focused",t)},setAttribute:function(t,e){r.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(t,e)},attr:function(t,e){var i=arguments.length;return i>=2||"object"==typeof t?this.set.apply(this,arguments):this.get(t)},getDescendants:function(){return r.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?d("[widgetId]",this.containerNode).map(l.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return s("dijit-legacy-requires")&&h(0,function(){e(["dijit/_base"])}),g}),t("dijit/_AttachMixin",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(t,e,i,o,n,s,r,a,d){var h,l=n.delegate(a,{mouseenter:s.enter,mouseleave:s.leave,keypress:i._keypress}),c=o("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){this.inherited(arguments),this._attachTemplateNodes(this.domNode),this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(t){for(var e=t;;)if(1==e.nodeType&&(this._processTemplateNode(e,function(t,e){return t.getAttribute(e)},this._attach)||this.searchContainerNode)&&e.firstChild)e=e.firstChild;else{if(e==t)return;for(;!e.nextSibling;)if((e=e.parentNode)==t)return;e=e.nextSibling}},_processTemplateNode:function(t,e,i){var o=!0,s=this.attachScope||this,r=e(t,"dojoAttachPoint")||e(t,"data-dojo-attach-point");if(r)for(var a,d=r.split(/\s*,\s*/);a=d.shift();)n.isArray(s[a])?s[a].push(t):s[a]=t,o="containerNode"!=a,this._attachPoints.push(a);var h=e(t,"dojoAttachEvent")||e(t,"data-dojo-attach-event");if(h)for(var l,c=h.split(/\s*,\s*/),u=n.trim;l=c.shift();)if(l){var f=null;if(-1!=l.indexOf(":")){var p=l.split(":");l=u(p[0]),f=u(p[1])}else l=u(l);f||(f=l),this._attachEvents.push(i(t,l,n.hitch(s,f)))}return o},_attach:function(e,i,o){return i="dijitclick"==(i=i.replace(/^on/,"").toLowerCase())?h||(h=t("./a11yclick")):l[i]||i,r(e,i,o)},_detachTemplateNodes:function(){var t=this.attachScope||this;e.forEach(this._attachPoints,function(e){delete t[e]}),this._attachPoints=[],e.forEach(this._attachEvents,function(t){t.remove()}),this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes(),this.inherited(arguments)}});return n.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""}),c}),t("dijit/_TemplatedMixin",["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(t,e,i,o,n,s,r,a){var d=e("dijit._TemplatedMixin",a,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(t){var e=this.declaredClass,i=this;return r.substitute(t,this,function(t,n){if("!"==n.charAt(0)&&(t=o.getObject(n.substr(1),!1,i)),void 0===t)throw new Error(e+" template:"+n);return null==t?"":"!"==n.charAt(0)?t:this._escapeValue(""+t)},this)},_escapeValue:function(t){return t.replace(/["'<>&]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}[t]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=t(this.templatePath,{sanitize:!0}));var e,n=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(o.isString(n)){if(1!=(e=i.toDom(this._stringRepl(n),this.ownerDocument)).nodeType)throw new Error("Invalid template: "+n)}else e=n.cloneNode(!0);this.domNode=e}this.inherited(arguments),this._rendered||this._fillContent(this.srcNodeRef),this._rendered=!0},_fillContent:function(t){var e=this.containerNode;if(t&&e)for(;t.hasChildNodes();)e.appendChild(t.firstChild)}});return d._templateCache={},d.getCachedTemplate=function(t,e,o){var n=d._templateCache,s=t,a=n[s];if(a){try{if(!a.ownerDocument||a.ownerDocument==(o||document))return a}catch(t){}i.destroy(a)}if(t=r.trim(t),e||t.match(/\$\{([^\}]+)\}/g))return n[s]=t;var h=i.toDom(t,o);if(1!=h.nodeType)throw new Error("Invalid template: "+t);return n[s]=h},s("ie")&&n(window,"unload",function(){var t=d._templateCache;for(var e in t){var o=t[e];"object"==typeof o&&i.destroy(o),delete t[e]}}),d}),t("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(t,e,i,o){return e("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(t,e){var o=this.containerNode;if(e>0){for(o=o.firstChild;e>0;)1==o.nodeType&&e--,o=o.nextSibling;o?e="before":(o=this.containerNode,e="last")}i.place(t.domNode,o,e),this._started&&!t._started&&t.startup()},removeChild:function(t){if("number"==typeof t&&(t=this.getChildren()[t]),t){var e=t.domNode;e&&e.parentNode&&e.parentNode.removeChild(e)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(e,i){o.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var n=this.getChildren(),s=t.indexOf(n,e);return n[s+i]},getIndexOfChild:function(e){return t.indexOf(this.getChildren(),e)}})}),t("dijit/_Contained",["dojo/_base/declare","./registry"],function(t,e){return t("dijit._Contained",null,{_getSibling:function(t){var i=this.domNode;do{i=i[t+"Sibling"]}while(i&&1!=i.nodeType);return i&&e.byNode(i)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var t=this.getParent();return t&&t.getIndexOfChild?t.getIndexOfChild(this):-1}})}),t("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(t,e,i,o,n,s,r,a,d){return s("dijit.layout._LayoutWidget",[e,i,o],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments),r.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var e=this.getParent&&this.getParent();e&&e.isLayoutContainer||(this.resize(),this.own(n.on("resize",t.hitch(this,"resize"))))}},resize:function(e,i){var o=this.domNode;e&&a.setMarginBox(o,e);var n=i||{};t.mixin(n,e||{}),"h"in n&&"w"in n||(n=t.mixin(a.getMarginBox(o),n));var s=d.getComputedStyle(o),r=a.getMarginExtents(o,s),h=a.getBorderExtents(o,s),l=this._borderBox={w:n.w-(r.w+h.w),h:n.h-(r.h+h.h)},c=a.getPadExtents(o,s);this._contentBox={l:d.toPixelValue(o,s.paddingLeft),t:d.toPixelValue(o,s.paddingTop),w:l.w-c.w,h:l.h-c.h},this.layout()},layout:function(){},_setupChild:function(t){var e=this.baseClass+"-child "+(t.baseClass?this.baseClass+"-"+t.baseClass:"");r.add(t.domNode,e)},addChild:function(t,e){this.inherited(arguments),this._started&&this._setupChild(t)},removeChild:function(t){var e=this.baseClass+"-child"+(t.baseClass?" "+this.baseClass+"-"+t.baseClass:"");r.remove(t.domNode,e),this.inherited(arguments)}})}),t("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(t,e,i,o,n,s,r,a,d,h,l,c){var u=e("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){for(var e in this.inherited(arguments),t.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(t){this.watch(t,s.hitch(this,"_setStateClass"))},this),this.cssStateNodes||{})this._trackMouseState(this[e],this.cssStateNodes[e]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(t){if(!this.disabled)switch(t.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){var e=this.baseClass.split(" ");function i(i){e=e.concat(t.map(e,function(t){return t+i}),"dijit"+i)}this.isLeftToRight()||i("Rtl");var o="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&i(o),this.state&&i(this.state),this.selected&&i("Selected"),this._opened&&i("Opened"),this.disabled?i("Disabled"):this.readOnly?i("ReadOnly"):this.active?i("Active"):this.hovering&&i("Hover"),this.focused&&i("Focused");var n=this.stateNode||this.domNode,s={};t.forEach(n.className.split(" "),function(t){s[t]=!0}),"_stateClasses"in this&&t.forEach(this._stateClasses,function(t){delete s[t]}),t.forEach(e,function(t){s[t]=!0});var r=[];for(var a in s)r.push(a);n.className=r.join(" "),this._stateClasses=e},_subnodeCssMouseEvent:function(t,e,i){if(!this.disabled&&!this.readOnly)switch(i.type){case"mouseover":case"MSPointerOver":case"pointerover":n(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":n(!1),s(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":s(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":s(!1);break;case"focus":case"focusin":r(!0);break;case"blur":case"focusout":r(!1)}function n(i){o.toggle(t,e+"Hover",i)}function s(i){o.toggle(t,e+"Active",i)}function r(i){o.toggle(t,e+"Focused",i)}},_trackMouseState:function(t,e){t._cssState=e}});return a(function(){function t(t,e,o){if(!o||!i.isDescendant(o,e))for(var n=e;n&&n!=o;n=n.parentNode)if(n._cssState){var s=c.getEnclosingWidget(n);s&&(n==s.domNode?s._cssMouseEvent(t):s._subnodeCssMouseEvent(n,n._cssState,t))}}var e,o=h.body();r(o,d.over,function(e){t(e,e.target,e.relatedTarget)}),r(o,d.out,function(e){t(e,e.target,e.relatedTarget)}),r(o,l.press,function(i){e=i.target,t(i,e)}),r(o,l.release,function(i){t(i,e),e=null}),r(o,"focusin, focusout",function(t){var e=t.target;if(e._cssState&&!e.getAttribute("widgetId")){var i=c.getEnclosingWidget(e);i&&i._subnodeCssMouseEvent(e,e._cssState,t)}})}),u}),t("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(t,e,i,o,n,s,r,a,d,h){return e("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(e){if(this._set("disabled",e),i.set(this.focusNode,"disabled",e),this.valueNode&&i.set(this.valueNode,"disabled",e),this.focusNode.setAttribute("aria-disabled",e?"true":"false"),e){this._set("hovering",!1),this._set("active",!1);var o="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";t.forEach(n.isArray(o)?o:[o],function(t){var e=this[t];a("webkit")||h.hasDefaultTabStop(e)?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex")},this)}else""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(t){if("mouse"==t&&this.isFocusable())var e=this.own(r(this.focusNode,"focus",function(){o.remove(),e.remove()}))[0],i=a("pointer-events")?"pointerup":a("MSPointer")?"MSPointerUp":a("touch-events")?"touchend, mouseup":"mouseup",o=this.own(r(this.ownerDocumentBody,i,n.hitch(this,function(t){o.remove(),e.remove(),this.focused&&("touchend"==t.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=o.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(t){}},compare:function(t,e){return"number"==typeof t&&"number"==typeof e?isNaN(t)&&isNaN(e)?0:t-e:t>e?1:t<e?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(t,e){void 0!=this._lastValueReported||null!==e&&this._onChangeActive||(this._resetValue=this._lastValueReported=t),this._pendingOnChange=this._pendingOnChange||typeof t!=typeof this._lastValueReported||0!=this.compare(t,this._lastValueReported),(this.intermediateChanges||e||void 0===e)&&this._pendingOnChange&&(this._lastValueReported=t,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(t)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})}),t("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(t,i,o,n,s,r,a,d){return i("dijit-legacy-requires")&&n(0,function(){e(["dijit/form/_FormValueWidget"])}),t("dijit.form._FormWidget",[s,a,r,d],{setDisabled:function(t){o.deprecated("setDisabled("+t+") is deprecated. Use set('disabled',"+t+") instead.","","2.0"),this.set("disabled",t)},setValue:function(t){o.deprecated("dijit.form._FormWidget:setValue("+t+") is deprecated.  Use set('value',"+t+") instead.","","2.0"),this.set("value",t)},getValue:function(){return o.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!i("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)}})}),t("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","./_FormWidgetMixin"],function(t,e,i,o,n,s){return t("dijit.form._FormValueMixin",s,{readOnly:!1,_setReadOnlyAttr:function(t){e.set(this.focusNode,"readOnly",t),this._set("readOnly",t)},postCreate:function(){this.inherited(arguments),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(t,e){this._handleOnChange(t,e)},_handleOnChange:function(t,e){this._set("value",t),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})}),t("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(t,e,i,o){return t("dijit.form._FormValueWidget",[i,o],{_layoutHackIE7:function(){if(7==e("ie"))for(var t=this.domNode,i=t.parentNode,o=t.firstChild||t,n=o.style.filter,s=this;i&&0==i.clientHeight;)!function(){var t=s.connect(i,"onscroll",function(){s.disconnect(t),o.style.filter=(new Date).getMilliseconds(),s.defer(function(){o.style.filter=n})})}(),i=i.parentNode}})}),t("dijit/dijit",["./main","./_base","dojo/parser","./_Widget","./_TemplatedMixin","./_Container","./layout/_LayoutWidget","./form/_FormWidget","./form/_FormValueWidget"],function(t){return t}),t("dijit/_PaletteMixin",["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","./_CssStateMixin","./a11yclick","./focus","./typematic"],function(t,e,i,o,n,s,r,a,d,h,l){var c=t("dijit._PaletteMixin",a,{defaultTimeout:500,timeoutChangeRate:.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(t){var e="string"==typeof this.dyeClass?s.getObject(this.dyeClass):this.dyeClass;return new e(t)},_preparePalette:function(t,e){this._cells=[];var i=this._blankGif;this.own(r(this.gridNode,d,s.hitch(this,"_onCellClick")));for(var a=0;a<t.length;a++)for(var h=o.create("tr",{tabIndex:"-1",role:"row"},this.gridNode),c=0;c<t[a].length;c++){var u=t[a][c];if(u){var f=this._dyeFactory(u,a,c,e[u]),p=o.create("td",{class:this.cellClass,tabIndex:"-1",title:e[u],role:"gridcell"},h);f.fillCell(p,i),p.idx=this._cells.length,this._cells.push({node:p,dye:f})}}this._xDim=t[0].length,this._yDim=t.length;var m={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var g in m)this.own(l.addKeyListener(this.domNode,{keyCode:n[g],ctrlKey:!1,altKey:!1,shiftKey:!1},this,function(){var t=m[g];return function(e){this._navigateByKey(t,e)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments),this._setCurrent(this._cells[0].node)},focus:function(){h.focus(this._currentFocus)},_onCellClick:function(t){for(var e=t.target;"TD"!=e.tagName;){if(!e.parentNode||e==this.gridNode)return;e=e.parentNode}var i=this._getDye(e).getValue();this._setCurrent(e),h.focus(e),this._setValueAttr(i,!0),t.stopPropagation(),t.preventDefault()},_setCurrent:function(t){"_currentFocus"in this&&e.set(this._currentFocus,"tabIndex","-1"),this._currentFocus=t,t&&e.set(t,"tabIndex",this.tabIndex)},_setValueAttr:function(t,e){if(this._selectedCell>=0&&i.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected"),this._selectedCell=-1,t)for(var o=0;o<this._cells.length;o++)if(t==this._cells[o].dye.getValue()){this._selectedCell=o,i.add(this._cells[o].node,this.cellClass+"Selected");break}this._set("value",this._selectedCell>=0?t:null),(e||void 0===e)&&this.onChange(t)},onChange:function(){},_navigateByKey:function(t,e){if(-1!=e){var i=this._currentFocus.idx+t;if(i<this._cells.length&&i>-1){var o=this._cells[i].node;this._setCurrent(o),this.defer(s.hitch(h,"focus",o))}}},_getDye:function(t){return this._cells[t.idx].dye}});return c}),t("dojo/colors",["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(t,e,i,o){var n={};e.setObject("dojo.colors",n);var s=function(t,e,i){i<0&&++i,i>1&&--i;var o=6*i;return o<1?t+(e-t)*o:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t};t.colorFromRgb=i.fromRgb=function(t,e){var n=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){var r,a=n[2].split(/\s*,\s*/),d=a.length,h=n[1];if("rgb"==h&&3==d||"rgba"==h&&4==d){var l=a[0];return"%"==l.charAt(l.length-1)?(r=o.map(a,function(t){return 2.56*parseFloat(t)}),4==d&&(r[3]=a[3]),i.fromArray(r,e)):i.fromArray(a,e)}if("hsl"==h&&3==d||"hsla"==h&&4==d){var c=(parseFloat(a[0])%360+360)%360/360,u=parseFloat(a[1])/100,f=parseFloat(a[2])/100,p=f<=.5?f*(u+1):f+u-f*u,m=2*f-p;return r=[256*s(m,p,c+1/3),256*s(m,p,c),256*s(m,p,c-1/3),1],4==d&&(r[3]=a[3]),i.fromArray(r,e)}}return null};var r=function(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t};return i.prototype.sanitize=function(){var t=this;return t.r=Math.round(r(t.r,0,255)),t.g=Math.round(r(t.g,0,255)),t.b=Math.round(r(t.b,0,255)),t.a=r(t.a,0,1),this},n.makeGrey=i.makeGrey=function(t,e){return i.fromArray([t,t,t,e])},e.mixin(i.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]}),i}),t("dijit/ColorPalette",["require","dojo/text!./templates/ColorPalette.html","./_Widget","./_TemplatedMixin","./_PaletteMixin","./hccss","dojo/i18n","dojo/_base/Color","dojo/_base/declare","dojo/dom-construct","dojo/string","dojo/i18n!dojo/nls/colors","dojo/colors"],function(t,e,i,o,n,s,r,a,d,h,l){var c=d("dijit.ColorPalette",[i,o,n],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:e,baseClass:"dijitColorPalette",_dyeFactory:function(t,e,i,o){return new this._dyeClass(t,e,i,o)},buildRendering:function(){this.inherited(arguments),this._dyeClass=d(c._Color,{palette:this.palette}),this._preparePalette(this._palettes[this.palette],r.getLocalization("dojo","colors",this.lang))}});return c._Color=d("dijit._Color",a,{template:"<span class='dijitInline dijitPaletteImg'><img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/></span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'><img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/></span>",_imagePaths:{"7x10":t.toUrl("./themes/a11y/colors7x10.png"),"3x4":t.toUrl("./themes/a11y/colors3x4.png")},constructor:function(t,e,i,o){this._title=o,this._row=e,this._col=i,this.setColor(a.named[t])},getValue:function(){return this.toHex()},fillCell:function(t,e){var i=l.substitute(s("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:e,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:-20*this._col-5,top:-20*this._row-5,size:"7x10"==this.palette?"height: 145px; width: 206px":"height: 64px; width: 86px"});h.place(i,t)}}),c}),t("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(t,e,i,o,n){return i("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var t=this.domNode;if(this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),n.parse(t,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(o.hitch(this,function(t){this._startupWidgets=t;for(var e=0;e<t.length;e++)this._processTemplateNode(t[e],function(t,e){return t[e]},function(t,e,i){return e in t?t.connect(t,e,i):t.on(e,i,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser})),!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(t,e,i){return!(!e(t,"dojoType")&&!e(t,"data-dojo-type"))||this.inherited(arguments)},startup:function(){t.forEach(this._startupWidgets,function(t){t&&!t._started&&t.startup&&t.startup()}),this._startupWidgets=null,this.inherited(arguments)}})}),t("dijit/Declaration",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser","dojo/query","./_Widget","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/NodeList-dom"],function(t,e,i,o,n,s,r,a,d){return i("dijit.Declaration",r,{_noScript:!0,stopParser:!0,widgetClass:"",defaults:null,mixins:[],buildRendering:function(){var h=this.srcNodeRef.parentNode.removeChild(this.srcNodeRef),l=s("> script[type='dojo/method']",h).orphan(),c=s("> script[type='dojo/connect']",h).orphan(),u=s("> script[type='dojo/aspect']",h).orphan(),f=h.nodeName,p=this.defaults||{};t.forEach(l,function(t){var e=t.getAttribute("event")||t.getAttribute("data-dojo-event"),i=n._functionFromScript(t,"data-dojo-");e?p[e]=i:u.push(t)}),this.mixins.length?this.mixins=t.map(this.mixins,function(t){return o.getObject(t)}):this.mixins=[r,a,d],p._skipNodeCache=!0,p.templateString="<"+f+" class='"+h.className+"' data-dojo-attach-point='"+(h.getAttribute("data-dojo-attach-point")||h.getAttribute("dojoAttachPoint")||"")+"' data-dojo-attach-event='"+(h.getAttribute("data-dojo-attach-event")||h.getAttribute("dojoAttachEvent")||"")+"' >"+h.innerHTML.replace(/\%7B/g,"{").replace(/\%7D/g,"}")+"</"+f+">";var m=i(this.widgetClass,this.mixins,p);t.forEach(u,function(t){t.getAttribute("data-dojo-advice");var i=t.getAttribute("data-dojo-method")||"postscript",o=n._functionFromScript(t);e.after(m.prototype,i,o,!0)}),t.forEach(c,function(t){var i=t.getAttribute("event")||t.getAttribute("data-dojo-event"),o=n._functionFromScript(t);e.after(m.prototype,i,o,!0)})}})}),t("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(t,e,i,o,n,s){return e("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(e){var i=[];return t.forEach(e||this.getChildren(),function(t){"value"in t?i.push(t):i=i.concat(this._getDescendantFormWidgets(t.getChildren()))},this),i},reset:function(){t.forEach(this._getDescendantFormWidgets(),function(t){t.reset&&t.reset()})},validate:function(){var e=!1;return t.every(t.map(this._getDescendantFormWidgets(),function(t){t._hasBeenBlurred=!0;var i=t.disabled||!t.validate||t.validate();return i||e||(s.scrollIntoView(t.containerNode||t.domNode),t.focus(),e=!0),i}),function(t){return t})},setValues:function(t){return i.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0"),this.set("value",t)},_setValueAttr:function(e){var i={};for(var n in t.forEach(this._getDescendantFormWidgets(),function(t){if(t.name){var e=i[t.name]||(i[t.name]=[]);e.push(t)}}),i)if(i.hasOwnProperty(n)){var s=i[n],r=o.getObject(n,!1,e);void 0!==r&&(r=[].concat(r),"boolean"==typeof s[0].checked?t.forEach(s,function(e){e.set("value",-1!=t.indexOf(r,e._get("value")))}):s[0].multiple?s[0].set("value",r):t.forEach(s,function(t,e){t.set("value",r[e])}))}},getValues:function(){return i.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},_getValueAttr:function(){var e={};return t.forEach(this._getDescendantFormWidgets(),function(t){var i=t.name;if(i&&!t.disabled){var n=t.get("value");if("boolean"==typeof t.checked)if(/Radio/.test(t.declaredClass))!1!==n?o.setObject(i,n,e):void 0===(n=o.getObject(i,!1,e))&&o.setObject(i,null,e);else{var s=o.getObject(i,!1,e);s||(s=[],o.setObject(i,s,e)),!1!==n&&s.push(n)}else{var r=o.getObject(i,!1,e);void 0!==r?o.isArray(r)?r.push(n):o.setObject(i,[r,n],e):o.setObject(i,n,e)}}}),e},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var e=t.map(this._descendants,function(t){return t.get("state")||""});return t.indexOf(e,"Error")>=0?"Error":t.indexOf(e,"Incomplete")>=0?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(e){this._descendants=this._getDescendantFormWidgets(),t.forEach(this._descendants,function(t){t._started||t.startup()}),e||this._onChildChange()},_onChildChange:function(t){t&&"state"!=t&&"disabled"!=t||this._set("state",this._getState()),t&&"value"!=t&&"disabled"!=t&&"checked"!=t||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer,this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments),this._descendants=this._getDescendantFormWidgets(),this.value=this.get("value"),this.state=this._getState();var t=this;this.own(n(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(e){e.target!=t.domNode&&t._onChildChange(e.type.replace("attrmodified-",""))})),this.watch("state",function(t,e,i){this.onValidStateChange(""==i)})},destroy:function(){this.inherited(arguments)}})}),t("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(t,e){return t("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute(),this.execute(this.get("value"))},_getFocusItems:function(){var t=e._getTabNavigable(this.domNode);this._firstFocusItem=t.lowest||t.first||this.closeButtonNode||this.domNode,this._lastFocusItem=t.last||t.highest||this._firstFocusItem}})}),t("dijit/DialogUnderlay",["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(t,e,i,o,n,s,r,a,d,h,l,c){var u=t("dijit.DialogUnderlay",[a,d],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"",class:"",_modalConnects:[],_setDialogIdAttr:function(t){o.set(this.node,"id",t+"_underlay"),this._set("dialogId",t)},_setClassAttr:function(t){this.node.className="dijitDialogUnderlay "+t,this._set("class",t)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.own(s(this.domNode,"keydown",e.hitch(this,"_onKeyDown"))),this.inherited(arguments)},layout:function(){var t=this.node.style,e=this.domNode.style;e.display="none";var i=r.getBox(this.ownerDocument);e.top=i.t+"px",e.left=i.l+"px",t.width=i.w+"px",t.height=i.h+"px",e.display="block"},show:function(){this.domNode.style.display="block",this.open=!0,this.layout(),this.bgIframe=new h(this.domNode);var t=r.get(this.ownerDocument);this._modalConnects=[l.on("resize",e.hitch(this,"layout")),s(t,"scroll",e.hitch(this,"layout"))]},hide:function(){for(this.bgIframe.destroy(),delete this.bgIframe,this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});return u.show=function(t,e){var i=u._singleton;!i||i._destroyed?i=c._underlay=u._singleton=new u(t):t&&i.set(t),n.set(i.domNode,"zIndex",e),i.open||i.show()},u.hide=function(){var t=u._singleton;t&&!t._destroyed&&t.hide()},u}),t("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(t,e,i,o,n){function s(t,e){var o=t.resize?t.resize(e):i.setMarginBox(t.domNode,e);o?n.mixin(t,o):(n.mixin(t,i.getMarginBox(t.domNode)),n.mixin(t,e))}var r={marginBox2contentBox:function(t,e){var n=o.getComputedStyle(t),s=i.getMarginExtents(t,n),r=i.getPadBorderExtents(t,n);return{l:o.toPixelValue(t,n.paddingLeft),t:o.toPixelValue(t,n.paddingTop),w:e.w-(s.w+r.w),h:e.h-(s.h+r.h)}},layoutChildren:function(i,o,r,a,d){o=n.mixin({},o),e.add(i,"dijitLayoutContainer"),r=t.filter(r,function(t){return"center"!=t.region&&"client"!=t.layoutAlign}).concat(t.filter(r,function(t){return"center"==t.region||"client"==t.layoutAlign})),t.forEach(r,function(t){var i=t.domNode,n=t.region||t.layoutAlign;if(!n)throw new Error("No region setting for "+t.id);var r,h=i.style;h.left=o.l+"px",h.top=o.t+"px",h.position="absolute",e.add(i,"dijitAlign"+((r=n).substring(0,1).toUpperCase()+r.substring(1)));var l={};a&&a==t.id&&(l["top"==t.region||"bottom"==t.region?"h":"w"]=d),"leading"==n&&(n=t.isLeftToRight()?"left":"right"),"trailing"==n&&(n=t.isLeftToRight()?"right":"left"),"top"==n||"bottom"==n?(l.w=o.w,s(t,l),o.h-=t.h,"top"==n?o.t+=t.h:h.top=o.t+o.h+"px"):"left"==n||"right"==n?(l.h=o.h,s(t,l),o.w-=t.w,"left"==n?o.l+=t.w:h.left=o.l+o.w+"px"):"client"!=n&&"center"!=n||s(t,o)})}};return n.setObject("dijit.layout.utils",r),r}),t("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","../registry","../Viewport","./utils"],function(t,e,i,o,n,s,r,a,d,h){return e("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var t=this.getParent();this._childOfLayoutWidget=t&&t.isLayoutContainer,this._needLayout=!this._childOfLayoutWidget,this.inherited(arguments),this._isShown()&&this._onShow(),this._childOfLayoutWidget||this.own(d.on("resize",s.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var t=[],e=!1;r("> *",this.containerNode).some(function(i){var o=a.byNode(i);o&&o.resize?t.push(o):!/script|link|style/i.test(i.nodeName)&&i.offsetHeight&&(e=!0)}),this._singleChild=1!=t.length||e?null:t[0],i.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(t,e){this._resizeCalled=!0,this._scheduleLayout(t,e)},_scheduleLayout:function(t,e){this._isShown()?this._layout(t,e):(this._needLayout=!0,this._changeSize=t,this._resultSize=e)},_layout:function(t,e){delete this._needLayout,this._wasShown||!1===this.open||this._onShow(),t&&o.setMarginBox(this.domNode,t);var i=this.containerNode;if(i===this.domNode){var n=e||{};s.mixin(n,t||{}),"h"in n&&"w"in n||(n=s.mixin(o.getMarginBox(i),n)),this._contentBox=h.marginBox2contentBox(i,n)}else this._contentBox=o.getContentBox(i);this._layoutChildren()},_layoutChildren:function(){if(this._checkIfSingleChild(),this._singleChild&&this._singleChild.resize){var t=this._contentBox||o.getContentBox(this.containerNode);this._singleChild.resize({w:t.w,h:t.h})}else for(var e,i=this.getChildren(),n=0;e=i[n++];)e.resize&&e.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var t=this.domNode,e=this.domNode.parentNode;return"none"!=t.style.display&&"hidden"!=t.style.visibility&&!i.contains(t,"dijitHidden")&&e&&e.style&&"none"!=e.style.display},_onShow:function(){this._wasShown=!0,this._needLayout&&this._layout(this._changeSize,this._resultSize),this.inherited(arguments)}})}),t("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g){return h("dijit.layout.ContentPane",[i,o,n],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:t._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(t,e,i){var o=new i(t,e);return!o.href&&o._contentSetter&&o._contentSetter.parseDeferred&&!o._contentSetter.parseDeferred.isFulfilled()?o._contentSetter.parseDeferred.then(function(){return o}):o},create:function(t,i){if((!t||!t.template)&&i&&!("href"in t)&&!("content"in t)){for(var o=(i=c.byId(i)).ownerDocument.createDocumentFragment();i.firstChild;)o.appendChild(i.firstChild);t=e.delegate(t,{content:o})}this.inherited(arguments,[t,i])},postMixInProperties:function(){this.inherited(arguments);var t=m.getLocalization("dijit","loading",this.lang);this.loadingMessage=s.substitute(this.loadingMessage,t),this.errorMessage=s.substitute(this.errorMessage,t)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!e.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),function(t){t._started||t._destroyed||!e.isFunction(t.startup)||(t.startup(),t._started=!0)}),this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!e.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},setHref:function(e){return t.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",e)},_setHrefAttr:function(t){return this.cancel(),this.onLoadDeferred=new l(e.hitch(this,"cancel")),this.onLoadDeferred.then(e.hitch(this,"onLoad")),this._set("href",t),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(e){t.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",e)},_setContentAttr:function(t){return this._set("href",""),this.cancel(),this.onLoadDeferred=new l(e.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(e.hitch(this,"onLoad")),this._setContent(t||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(t){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){if(this.inherited(arguments),this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new l(e.hitch(this,"cancel")),this.onLoadDeferred.then(e.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var t=this,i={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};e.isObject(this.ioArgs)&&e.mixin(i,this.ioArgs);var o,n=this._xhrDfd=(this.ioMethod||p.get)(i);n.then(function(e){o=e;try{return t._isDownloaded=!0,t._setContent(e,!1)}catch(e){t._onError("Content",e)}},function(e){return n.canceled||t._onError("Download",e),delete t._xhrDfd,e}).then(function(){return t.onDownloadEnd(),delete t._xhrDfd,o}),delete this._hrefChanged},_onLoadHandler:function(t){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(t)}catch(t){console.error("Error "+this.widgetId+" running custom onLoad code: "+t.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(t){console.error("Error "+this.widgetId+" running custom onUnload code: "+t.message)}},destroyDescendants:function(t){this.isLoaded&&this._onUnloadHandler();var e=this._contentSetter;d.forEach(this.getChildren(),function(e){e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t),e._destroyed=!0}),e&&(d.forEach(e.parseResults,function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t),e._destroyed=!0)}),delete e.parseResults),t||f.empty(this.containerNode),delete this._singleChild},_setContent:function(t,i){this.destroyDescendants();var o=this._contentSetter;o&&o instanceof r._ContentSetter||(o=this._contentSetter=new r._ContentSetter({node:this.containerNode,_onError:e.hitch(this,this._onError),onContentError:e.hitch(this,function(t){var e=this.onContentError(t);try{this.containerNode.innerHTML=e}catch(t){console.error("Fatal "+this.id+" could not change content due to "+t.message,t)}})}));var n=e.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!t.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),s=o.set(e.isObject(t)&&t.domNode?t.domNode:t,n),a=this;return g(s&&s.then?s:o.parseDeferred,function(){delete a._contentSetterParams,i||(a._started&&(a._startChildren(),a._scheduleLayout()),a._onLoadHandler(t))})},_onError:function(t,e,i){this.onLoadDeferred.reject(e);var o=this["on"+t+"Error"].call(this,e);i?console.error(i,e):o&&this._setContent(o,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})}),t("dijit/Dialog",["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","./layout/utils","dojo/text!./templates/Dialog.html","./a11yclick","dojo/i18n!./nls/common"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x,j,N,w,D,S,T,k){var A=new n;A.resolve(!0);var I=o("dijit._DialogBase"+(m("dojo-bidi")?"_NoBidi":""),[x,N,w,j],{templateString:k,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(t){this._set("draggable",t)},maxRatio:.9,closable:!0,_setClosableAttr:function(t){this.closeButtonNode.style.display=t?"":"none",this._set("closable",t)},postMixInProperties:function(){var t=l.getLocalization("dijit","common");u.mixin(this,t),this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"}),this.ownerDocumentBody.appendChild(this.domNode),this.inherited(arguments),i.after(this,"onExecute",u.hitch(this,"hide"),!0),i.after(this,"onCancel",u.hitch(this,"hide"),!0),this._modalconnects=[]},onLoad:function(){this.resize(),this._position(),this.autofocus&&M.isTop(this)&&(this._getFocusItems(),v.focus(this._firstFocusItem)),this.inherited(arguments)},focus:function(){this._getFocusItems(),v.focus(this._firstFocusItem)},_endDrag:function(){var t=a.position(this.domNode),e=g.getBox(this.ownerDocument);t.y=Math.min(Math.max(t.y,0),e.h-t.h),t.x=Math.min(Math.max(t.x,0),e.w-t.w),this._relativePosition=t,this._position()},_setup:function(){var t=this.domNode;this.titleBar&&this.draggable?(this._moveable=new(6==m("ie")?b:_)(t,{handle:this.titleBar}),i.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):r.add(t,"dijitDialogFixed"),this.underlayAttrs={dialogId:this.id,class:e.map(this.class.split(/\s/),function(t){return t+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!r.contains(this.ownerDocumentBody,"dojoMove")){var t=this.domNode,e=g.getBox(this.ownerDocument),i=this._relativePosition,o=i?null:a.position(t),n=Math.floor(e.l+(i?i.x:(e.w-o.w)/2)),s=Math.floor(e.t+(i?i.y:(e.h-o.h)/2));d.set(t,{left:n+"px",top:s+"px"})}},_onKey:function(t){if(t.keyCode==c.TAB){this._getFocusItems();var e=t.target;this._firstFocusItem==this._lastFocusItem?(t.stopPropagation(),t.preventDefault()):e==this._firstFocusItem&&t.shiftKey?(v.focus(this._lastFocusItem),t.stopPropagation(),t.preventDefault()):e!=this._lastFocusItem||t.shiftKey||(v.focus(this._firstFocusItem),t.stopPropagation(),t.preventDefault())}else this.closable&&t.keyCode==c.ESCAPE&&(this.onCancel(),t.stopPropagation(),t.preventDefault())},show:function(){if(this.open)return A.promise;this._started||this.startup(),this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0),this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),M.hide(this));var t,e=g.get(this.ownerDocument);this._modalconnects.push(f(e,"scroll",u.hitch(this,"resize",null))),this._modalconnects.push(f(this.domNode,"keydown",u.hitch(this,"_onKey"))),d.set(this.domNode,{opacity:0,display:""}),this._set("open",!0),this._onShow(),this.resize(),this._position(),this._fadeInDeferred=new n(u.hitch(this,function(){t.stop(),delete this._fadeInDeferred}));var i=this._fadeInDeferred.promise;return t=h.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:u.hitch(this,function(){M.show(this,this.underlayAttrs)}),onEnd:u.hitch(this,function(){this.autofocus&&M.isTop(this)&&(this._getFocusItems(),v.focus(this._firstFocusItem)),this._fadeInDeferred.resolve(!0),delete this._fadeInDeferred})}).play(),i},hide:function(){if(!this._alreadyInitialized||!this.open)return A.promise;var t;this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred=new n(u.hitch(this,function(){t.stop(),delete this._fadeOutDeferred})),this._fadeOutDeferred.then(u.hitch(this,"onHide"));var e,i=this._fadeOutDeferred.promise;for(t=h.fadeOut({node:this.domNode,duration:this.duration,onEnd:u.hitch(this,function(){this.domNode.style.display="none",M.hide(this),this._fadeOutDeferred.resolve(!0),delete this._fadeOutDeferred})}).play(),this._scrollConnected&&(this._scrollConnected=!1);e=this._modalconnects.pop();)e.remove();return this._relativePosition&&delete this._relativePosition,this._set("open",!1),i},resize:function(t){if("none"!=this.domNode.style.display){if(this._checkIfSingleChild(),!t){this._shrunk&&(this._singleChild&&void 0!==this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),e.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(t){t&&d.set(t,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var i=g.getBox(this.ownerDocument);i.w*=this.maxRatio,i.h*=this.maxRatio;var o=a.position(this.domNode);o.w>=i.w||o.h>=i.h?(t={w:Math.min(o.w,i.w),h:Math.min(o.h,i.h)},this._shrunk=!0):this._shrunk=!1}if(t){a.setMarginBox(this.domNode,t);var n=[];this.titleBar&&n.push({domNode:this.titleBar,region:"top"}),this.actionBarNode&&n.push({domNode:this.actionBarNode,region:"bottom"});var s={domNode:this.containerNode,region:"center"};n.push(s);var r=T.marginBox2contentBox(this.domNode,t);if(T.layoutChildren(this.domNode,r,n),this._singleChild){var h=T.marginBox2contentBox(this.containerNode,s);this._singleChild.resize({w:h.w,h:h.h})}else this.containerNode.style.overflow="auto",this._layoutChildren()}else this._layoutChildren();m("touch")||t||this._position()}},_layoutChildren:function(){e.forEach(this.getChildren(),function(t){t.resize&&t.resize()})},destroy:function(){var t;for(this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred&&this._fadeOutDeferred.cancel(),this._moveable&&this._moveable.destroy();t=this._modalconnects.pop();)t.remove();M.hide(this),this.inherited(arguments)}});m("dojo-bidi")&&(I=o("dijit._DialogBase",I,{_setTitleAttr:function(t){this._set("title",t),this.titleNode.innerHTML=t,this.applyTextDir(this.titleNode)},_setTextDirAttr:function(t){this._created&&this.textDir!=t&&(this._set("textDir",t),this.set("title",this.title))}}));var E=o("dijit.Dialog",[S,I],{});E._DialogBase=I;var M=E._DialogLevelManager={_beginZIndex:950,show:function(t,e){B[B.length-1].focus=v.curNode;var i=B[B.length-1].dialog?B[B.length-1].zIndex+2:E._DialogLevelManager._beginZIndex;d.set(t.domNode,"zIndex",i),D.show(e,i-1),B.push({dialog:t,underlayAttrs:e,zIndex:i})},hide:function(t){if(B[B.length-1].dialog==t){B.pop();var i=B[B.length-1];if(1==B.length?D.hide():D.show(i.underlayAttrs,i.zIndex-1),t.refocus){var o=i.focus;if(!i.dialog||o&&s.isDescendant(o,i.dialog.domNode)||(i.dialog._getFocusItems(),o=i.dialog._firstFocusItem),o)try{o.focus()}catch(t){}}}else{var n=e.indexOf(e.map(B,function(t){return t.dialog}),t);-1!=n&&B.splice(n,1)}},isTop:function(t){return B[B.length-1].dialog==t}},B=E._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];return v.watch("curNode",function(t,e,i){var o=B[B.length-1].dialog;if(i&&o&&!o._fadeOutDeferred&&i.ownerDocument==o.ownerDocument){do{if(i==o.domNode||r.contains(i,"dijitPopup"))return}while(i=i.parentNode);o.focus()}}),m("dijit-legacy-requires")&&p(0,function(){t(["dijit/TooltipDialog"])}),E}),t("dijit/TooltipDialog",["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(t,e,i,o,n,s,r,a,d,h,l,c,u){var f=t("dijit.TooltipDialog",[a,l,h,d],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:c,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments),this.own(s(this.domNode,"keydown",n.hitch(this,"_onKey")))},orient:function(t,i,o){var n={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[i+"-"+o];e.replace(this.domNode,n,this._currentOrientClass||""),this._currentOrientClass=n},focus:function(){this._getFocusItems(),r.focus(this._firstFocusItem)},onOpen:function(t){this.orient(this.domNode,t.aroundCorner,t.corner);var e=t.aroundNodePos;"M"==t.corner.charAt(0)&&"M"==t.aroundCorner.charAt(0)?(this.connectorNode.style.top=e.y+(e.h-this.connectorNode.offsetHeight>>1)-t.y+"px",this.connectorNode.style.left=""):"M"==t.corner.charAt(1)&&"M"==t.aroundCorner.charAt(1)&&(this.connectorNode.style.left=e.x+(e.w-this.connectorNode.offsetWidth>>1)-t.x+"px"),this._onShow()},onClose:function(){this.onHide()},_onKey:function(t){if(t.keyCode==o.ESCAPE)this.defer("onCancel"),t.stopPropagation(),t.preventDefault();else if(t.keyCode==o.TAB){var e=t.target;this._getFocusItems(),this._firstFocusItem==this._lastFocusItem?(t.stopPropagation(),t.preventDefault()):e==this._firstFocusItem&&t.shiftKey?(r.focus(this._lastFocusItem),t.stopPropagation(),t.preventDefault()):e!=this._lastFocusItem||t.shiftKey?t.stopPropagation():(r.focus(this._firstFocusItem),t.stopPropagation(),t.preventDefault())}}});return i("dojo-bidi")&&f.extend({_setTitleAttr:function(t){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,t):t,this._set("title",t)},_setTextDirAttr:function(t){this._created&&this.textDir==t||(this._set("textDir",t),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}}),f}),t("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(t,e,i,o,n,s,r,a){return e("dijit._KeyNavMixin",a,{tabIndex:"0",childSelector:null,postCreate:function(){if(this.inherited(arguments),i.set(this.domNode,"tabIndex",this.tabIndex),!this._keyNavCodes){var t=this._keyNavCodes={};t[o.HOME]=n.hitch(this,"focusFirstChild"),t[o.END]=n.hitch(this,"focusLastChild"),t[this.isLeftToRight()?o.LEFT_ARROW:o.RIGHT_ARROW]=n.hitch(this,"_onLeftArrow"),t[this.isLeftToRight()?o.RIGHT_ARROW:o.LEFT_ARROW]=n.hitch(this,"_onRightArrow"),t[o.UP_ARROW]=n.hitch(this,"_onUpArrow"),t[o.DOWN_ARROW]=n.hitch(this,"_onDownArrow")}var e=this,a="string"==typeof this.childSelector?this.childSelector:n.hitch(this,"childSelector");this.own(s(this.domNode,"keypress",n.hitch(this,"_onContainerKeypress")),s(this.domNode,"keydown",n.hitch(this,"_onContainerKeydown")),s(this.domNode,"focus",n.hitch(this,"_onContainerFocus")),s(this.containerNode,s.selector(a,"focusin"),function(t){e._onChildFocus(r.getEnclosingWidget(this),t)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(t,e){t&&(this.focusedChild&&t!==this.focusedChild&&this._onChildBlur(this.focusedChild),t.set("tabIndex",this.tabIndex),t.focus(e?"end":"start"))},_onContainerFocus:function(t){t.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){i.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(t){i.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(t){t&&t!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),t.set("tabIndex",this.tabIndex),this.lastFocused=t,this._set("focusedChild",t))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(t,e,i,o){t&&this.focusChild(t)},_keyboardSearchCompare:function(t,e){var i=t.domNode,o=t.label||(i.focusNode?i.focusNode.label:"")||i.innerText||i.textContent||"",n=o.replace(/^\s+/,"").substr(0,e.length).toLowerCase();return e.length&&n==e?-1:0},_onContainerKeydown:function(t){var e=this._keyNavCodes[t.keyCode];e?(e(t,this.focusedChild),t.stopPropagation(),t.preventDefault(),this._searchString=""):t.keyCode==o.SPACE&&this._searchTimer&&!(t.ctrlKey||t.altKey||t.metaKey)&&(t.stopImmediatePropagation(),t.preventDefault(),this._keyboardSearch(t," "))},_onContainerKeypress:function(t){t.charCode<=o.SPACE||t.ctrlKey||t.altKey||t.metaKey||(t.preventDefault(),t.stopPropagation(),this._keyboardSearch(t,String.fromCharCode(t.charCode).toLowerCase()))},_keyboardSearch:function(t,e){var i,o=null,s=0,r=n.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=e;var t=/^(.)\1*$/.test(this._searchString),n=t?1:this._searchString.length;i=this._searchString.substr(0,n),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var r=this.focusedChild||null;if(1!=n&&r||(r=this._getNextFocusableChild(r,1))){var a=r;do{var d=this._keyboardSearchCompare(r,i);if(d&&0==s++&&(o=r),-1==d){s=-1;break}r=this._getNextFocusableChild(r,1)}while(r!=a)}});r(),this.onKeyboardSearch(o,t,i,s)},_onChildBlur:function(){},_getNextFocusableChild:function(t,e){var i=t;do{if(t)t=this._getNext(t,e);else if(!(t=this[e>0?"_getFirst":"_getLast"]()))break;if(null!=t&&t!=i&&t.isFocusable())return t}while(t!=i);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(t,e){if(t)for(t=t.domNode;t;)if((t=t[e<0?"previousSibling":"nextSibling"])&&"getAttribute"in t){var i=r.byNode(t);if(i)return i}return null}})}),t("dijit/_KeyNavContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(t,e,i,o,n,s,r,a,d,h){return e("dijit._KeyNavContainer",[d,h,a],{connectKeyNavHandlers:function(e,i){var o=this._keyNavCodes={},r=s.hitch(this,"focusPrev"),a=s.hitch(this,"focusNext");t.forEach(e,function(t){o[t]=r}),t.forEach(i,function(t){o[t]=a}),o[n.HOME]=s.hitch(this,"focusFirstChild"),o[n.END]=s.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){o.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments),t.forEach(this.getChildren(),s.hitch(this,"_startupChild"))},addChild:function(t,e){this.inherited(arguments),this._startupChild(t)},_startupChild:function(t){t.set("tabIndex","-1")},_getFirst:function(){var t=this.getChildren();return t.length?t[0]:null},_getLast:function(){var t=this.getChildren();return t.length?t[t.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(t){var t=r.byNode(t);return t&&t.getParent()==this}})}),t("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(t,e,i,o,n,s,r,a){return i("dijit-legacy-requires")&&n(0,function(){t(["dijit/ToolbarSeparator"])}),e("dijit.Toolbar",[s,a,r],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})}),t("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(t,e,i,o){return t("dijit.ToolbarSeparator",[i,o],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments),e.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})}),t("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(t,e,i,o){var n=t("dijit.form._ButtonMixin"+(i("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(t){return t.stopPropagation(),t.preventDefault(),this.disabled||this.valueNode.click(t),!1},_onClick:function(t){if(this.disabled)return t.stopPropagation(),t.preventDefault(),!1;!1===this.onClick(t)&&t.preventDefault();var e=t.defaultPrevented;if(!e&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var i=this.domNode;i.parentNode;i=i.parentNode){var n=o.byNode(i);if(n&&"function"==typeof n._onSubmit){n._onSubmit(t),t.preventDefault(),e=!0;break}}return!e},postCreate:function(){this.inherited(arguments),e.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(t){this._set("label",t);var e=this.containerNode||this.focusNode;e.innerHTML=t}});return i("dojo-bidi")&&(n=t("dijit.form._ButtonMixin",n,{_setLabelAttr:function(){this.inherited(arguments);var t=this.containerNode||this.focusNode;this.applyTextDir(t)}})),n}),t("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick"],function(t,e,i,o,n,s,r,a,d,h){o("dijit-legacy-requires")&&r(0,function(){t(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});var l=e("dijit.form.Button"+(o("dojo-bidi")?"_NoBidi":""),[a,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:h,_setValueAttr:"valueNode",_setNameAttr:function(t){this.valueNode&&this.valueNode.setAttribute("name",t)},_fillContent:function(t){if(t&&(!this.params||!("label"in this.params))){var e=s.trim(t.innerHTML);e&&(this.label=e)}},_setShowLabelAttr:function(t){this.containerNode&&i.toggle(this.containerNode,"dijitDisplayNone",!t),this._set("showLabel",t)},setLabel:function(t){n.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",t)},_setLabelAttr:function(t){this.inherited(arguments),this.showLabel||"title"in this.params||(this.titleNode.title=s.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});return o("dojo-bidi")&&(l=e("dijit.form.Button",l,{_setLabelAttr:function(t){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(t){this._created&&this.textDir!=t&&(this._set("textDir",t),this._setLabelAttr(this.label))}})),l}),t("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(t,e){return t("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(t){var e=this.checked;this._set("checked",!e);var i=this.inherited(arguments);return this.set("checked",i?this.checked:e),i},_setCheckedAttr:function(t,i){this._set("checked",t);var o=this.focusNode||this.domNode;this._created&&e.get(o,"checked")!=!!t&&e.set(o,"checked",!!t),o.setAttribute(this._aria_attr,String(t)),this._handleOnChange(t,i)},postCreate:function(){this.inherited(arguments);var t=this.focusNode||this.domNode;this.checked&&t.setAttribute("checked","checked"),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})}),t("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(t,e,i,o){return t("dijit.form.ToggleButton",[i,o],{baseClass:"dijitToggleButton",setChecked:function(t){e.deprecated("setChecked("+t+") is deprecated. Use set('checked',"+t+") instead.","","2.0"),this.set("checked",t)}})}),t("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(t,e,i,o,n){var s=e("dijit._editor._Plugin",o,{constructor:function(t){this.params=t||{},i.mixin(this,this.params),this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:n,disabled:!1,getLabel:function(t){return this.editor.commands[t]},_initButton:function(){if(this.command.length){var t=this.getLabel(this.command),e=this.editor,o=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var n=i.mixin({label:t,ownerDocument:e.ownerDocument,dir:e.dir,lang:e.lang,showLabel:!1,iconClass:o,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});delete n.name,this.button=new this.buttonClass(n)}}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive(),this.inherited(arguments)},connect:function(e,i,o){this.own(t.connect(e,i,this,o))},updateState:function(){var t,e,i=this.editor,o=this.command;if(i&&i.isLoaded&&o.length){var n=this.get("disabled");if(this.button)try{e=!n&&i.queryCommandEnabled(o),this.enabled!==e&&(this.enabled=e,this.button.set("disabled",!e)),e&&"boolean"==typeof this.button.checked&&(t=i.queryCommandState(o),this.checked!==t&&(this.checked=t,this.button.set("checked",i.queryCommandState(o))))}catch(i){console.log(i)}}},setEditor:function(t){this.editor=t,this._initButton(),this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",i.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none"),this.own(this.editor.on("NormalizedDisplayChanged",i.hitch(this,"updateState")))},setToolbar:function(t){this.button&&t.addChild(this.button)},set:function(t,e){if("object"==typeof t){for(var i in t)this.set(i,t[i]);return this}var o=this._getAttrNames(t);if(this[o.s])var n=this[o.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(t,e);return n||this},get:function(t){var e=this._getAttrNames(t);return this[e.g]?this[e.g]():this[t]},_setDisabledAttr:function(t){this._set("disabled",t),this.updateState()},_getAttrNames:function(t){var e=this._attrPairNames;if(e[t])return e[t];var i=t.charAt(0).toUpperCase()+t.substr(1);return e[t]={s:"_set"+i+"Attr",g:"_get"+i+"Attr"}},_set:function(t,e){this[t]=e}});return s.registry={},s}),t("dojo/_base/unload",["./kernel","./lang","../on"],function(t,e,i){var o=window,n={addOnWindowUnload:function(n,s){t.windowUnloaded||i(o,"unload",t.windowUnloaded=function(){}),i(o,"unload",e.hitch(n,s))},addOnUnload:function(t,n){i(o,"beforeunload",e.hitch(t,n))}};return t.addOnWindowUnload=n.addOnWindowUnload,t.addOnUnload=n.addOnUnload,n}),t("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(t,e,i){var o={getIndex:function(t,e){for(var i,o,n=[],s=[],r=t;t!=e;){var a=0;for(i=t.parentNode;o=i.childNodes[a++];)if(o===t){--a;break}n.unshift(a),s.unshift(a-i.childNodes.length),t=i}if(n.length>0&&3==r.nodeType){for(o=r.previousSibling;o&&3==o.nodeType;)n[n.length-1]--,o=o.previousSibling;for(o=r.nextSibling;o&&3==o.nodeType;)s[s.length-1]++,o=o.nextSibling}return{o:n,r:s}},getNode:function(e,o){if(!i.isArray(e)||0==e.length)return o;var n=o;return t.every(e,function(t){return t>=0&&t<n.childNodes.length?(n=n.childNodes[t],!0):(n=null,!1)}),n},getCommonAncestor:function(t,e,i){i=i||t.ownerDocument.body;for(var o=function(t){for(var e=[];t&&(e.unshift(t),t!==i);)t=t.parentNode;return e},n=o(t),s=o(e),r=Math.min(n.length,s.length),a=n[0],d=1;d<r&&n[d]===s[d];d++)a=n[d];return a},getAncestor:function(t,e,i){for(i=i||t.ownerDocument.body;t&&t!==i;){var o=t.nodeName.toUpperCase();if(e.test(o))return t;t=t.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(t,e,i){i=i||t.ownerDocument.body,e=e||o.BlockTagNames;for(var n,s=null;t&&t!==i;){var r=t.nodeName.toUpperCase();!s&&e.test(r)&&(s=t),!n&&/^(?:BODY|TD|TH|CAPTION)$/.test(r)&&(n=t),t=t.parentNode}return{blockNode:s,blockContainer:n||t.ownerDocument.body}},atBeginningOfContainer:function(t,e,i){var o=!1,n=0==i;if(n||3!=e.nodeType||/^[\s\xA0]+$/.test(e.nodeValue.substr(0,i))&&(n=!0),n){var s=e;for(o=!0;s&&s!==t;){if(s.previousSibling){o=!1;break}s=s.parentNode}}return o},atEndOfContainer:function(t,e,i){var o=!1,n=i==(e.length||e.childNodes.length);if(n||3!=e.nodeType||/^[\s\xA0]+$/.test(e.nodeValue.substr(i))&&(n=!0),n){var s=e;for(o=!0;s&&s!==t;){if(s.nextSibling){o=!1;break}s=s.parentNode}}return o},adjacentNoneTextNode:function(t,e){for(var i=t,o=0-t.length||0,n=e?"nextSibling":"previousSibling";i&&3==i.nodeType;)o+=i.length,i=i[n];return[i,o]},create:function(t){return(t=t||window).getSelection?t.document.createRange():new s},getSelection:function(t,e){if(t.getSelection)return t.getSelection();var i=new n.selection(t);return e||i._getCurrentSelection(),i}};if(!window.getSelection)var n=o.ie={cachedSelection:{},selection:function(t){this._ranges=[],this.addRange=function(t,e){this._ranges.push(t),e||t._select(),this.rangeCount=this._ranges.length},this.removeAllRanges=function(){this._ranges=[],this.rangeCount=0};this.getRangeAt=function(t){return this._ranges[t]},this._getCurrentSelection=function(){this.removeAllRanges();var e=function(){var e=t.document.selection.createRange();return"CONTROL"==t.document.selection.type.toUpperCase()?new s(n.decomposeControlRange(e)):new s(n.decomposeTextRange(e))}();e?(this.addRange(e,!0),this.isCollapsed=e.collapsed):this.isCollapsed=!0}},decomposeControlRange:function(t){var e=t.item(0),i=t.item(t.length-1),n=e.parentNode,s=i.parentNode,r=o.getIndex(e,n).o[0],a=o.getIndex(i,s).o[0]+1;return[n,r,s,a]},getEndPoint:function(e,i){var n=e.duplicate();n.collapse(!i);var s,r,a,d="EndTo"+(i?"End":"Start"),h=n.parentElement();if(h.childNodes.length>0?t.every(h.childNodes,function(t,i){var l;if(3!=t.nodeType){if(n.moveToElementText(t),n.compareEndPoints(d,e)>0){if(!a||3!=a.nodeType)return s=h,r=i,!1;s=a,l=!0}else if(i==h.childNodes.length-1)return s=h,r=h.childNodes.length,!1}else i==h.childNodes.length-1&&(s=t,l=!0);if(l&&s){var c=o.adjacentNoneTextNode(s)[0];s=c?c.nextSibling:h.firstChild;var u=o.adjacentNoneTextNode(s);c=u[0];var f=u[1];return c?(n.moveToElementText(c),n.collapse(!1)):n.moveToElementText(h),n.setEndPoint(d,e),r=n.text.length-f,!1}return a=t,!0}):(s=h,r=0),!i&&1==s.nodeType&&r==s.childNodes.length){var l=s.nextSibling;l&&3==l.nodeType&&(s=l,r=0)}return[s,r]},setEndPoint:function(t,e,i){var n,s,r=t.duplicate();if(3!=e.nodeType)if(i>0){if(n=e.childNodes[i-1])if(3==n.nodeType)e=n,i=n.length;else if(n.nextSibling&&3==n.nextSibling.nodeType)e=n.nextSibling,i=0;else{r.moveToElementText(n.nextSibling?n:e);var a=n.parentNode,d=a.insertBefore(n.ownerDocument.createTextNode(" "),n.nextSibling);r.collapse(!1),a.removeChild(d)}}else r.moveToElementText(e),r.collapse(!0);if(3==e.nodeType){var h=o.adjacentNoneTextNode(e),l=h[0];s=h[1],l?(r.moveToElementText(l),r.collapse(!1),"inherit"!=l.contentEditable&&s++):(r.moveToElementText(e.parentNode),r.collapse(!0),r.move("character",1),r.move("character",-1)),(i+=s)>0&&r.move("character",i)!=i&&console.error("Error when moving!")}return r},decomposeTextRange:function(t){var e=n.getEndPoint(t),i=e[0],o=e[1],s=e[0],r=e[1];return t.htmlText.length&&(t.htmlText==t.text?r=o+t.text.length:(e=n.getEndPoint(t,!0),s=e[0],r=e[1])),[i,o,s,r]},setRange:function(t,e,i,o,s,r){var a=n.setEndPoint(t,e,i);if(t.setEndPoint("StartToStart",a),!r)var d=n.setEndPoint(t,o,s);return t.setEndPoint("EndToEnd",d||a),t}},s=o.W3CRange=e(null,{constructor:function(){arguments.length>0?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.commonAncestorContainer=null,this.startContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.startContainer!==this.endContainer?this.commonAncestorContainer=o.getCommonAncestor(this.startContainer,this.endContainer):this.commonAncestorContainer=this.startContainer,this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(t,e){e=parseInt(e),this.startContainer===t&&this.startOffset==e||(delete this._cachedBookmark,this.startContainer=t,this.startOffset=e,this.endContainer?this._updateInternal():this.setEnd(t,e))},setEnd:function(t,e){e=parseInt(e),this.endContainer===t&&this.endOffset==e||(delete this._cachedBookmark,this.endContainer=t,this.endOffset=e,this.startContainer?this._updateInternal():this.setStart(t,e))},setStartAfter:function(t,e){this._setPoint("setStart",t,e,1)},setStartBefore:function(t,e){this._setPoint("setStart",t,e,0)},setEndAfter:function(t,e){this._setPoint("setEnd",t,e,1)},setEndBefore:function(t,e){this._setPoint("setEnd",t,e,0)},_setPoint:function(t,e,i,n){var s=o.getIndex(e,e.parentNode).o;this[t](e.parentNode,s.pop()+n)},_getIERange:function(){var t=(this._body||this.endContainer.ownerDocument.body).createTextRange();return n.setRange(t,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed),t},getBookmark:function(){return this._getIERange(),this._cachedBookmark},_select:function(){var t=this._getIERange();t.select()},deleteContents:function(){var t=this.startContainer,e=this._getIERange();3!==t.nodeType||this.startOffset||this.setStartBefore(t),e.pasteHTML(""),this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.collapsed=!0},cloneRange:function(){var t=new s([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);return t._body=this._body,t},detach:function(){this._body=null,this.commonAncestorContainer=null,this.startContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0}});return i.setObject("dijit.range",o),o}),t("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(t,e,i){var o={};e.setObject("dijit._editor.html",o);var n=o.escapeXml=function(t,e){return t=t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),e||(t=t.replace(/'/gm,"&#39;")),t};return o.getNodeHtml=function(t){var e=[];return o.getNodeHtmlHelper(t,e),e.join("")},o.getNodeHtmlHelper=function(e,s){switch(e.nodeType){case 1:var r=e.nodeName.toLowerCase();if(!r||"/"==r.charAt(0))return"";s.push("<",r);var a,d=[],h={};if(i("dom-attributes-explicit")||i("dom-attributes-specified-flag"))for(var l=0;a=e.attributes[l++];){var c=a.name;if("_dj"!==c.substr(0,3)&&(!i("dom-attributes-specified-flag")||a.specified)&&!(c in h)){var u=a.value;"src"!=c&&"href"!=c||e.getAttribute("_djrealurl")&&(u=e.getAttribute("_djrealurl")),8===i("ie")&&"style"===c&&(u=u.replace("HEIGHT:","height:").replace("WIDTH:","width:")),d.push([c,u]),h[c]=u}}else{var f=/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1),p=f.outerHTML,m=p.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);p=p.substr(0,p.indexOf(">")),t.forEach(m,function(t){if(t){var i=t.indexOf("=");if(i>0){var o=t.substring(0,i);if("_dj"!=o.substr(0,3)){if(("src"==o||"href"==o)&&e.getAttribute("_djrealurl"))return void d.push([o,e.getAttribute("_djrealurl")]);var n,s;switch(o){case"style":n=e.style.cssText.toLowerCase();break;case"class":n=e.className;break;case"width":if("img"===r){(s=/width=(\S+)/i.exec(p))&&(n=s[1]);break}case"height":if("img"===r){(s=/height=(\S+)/i.exec(p))&&(n=s[1]);break}default:n=e.getAttribute(o)}null!=n&&d.push([o,n.toString()])}}}},this)}d.sort(function(t,e){return t[0]<e[0]?-1:t[0]==e[0]?0:1});for(var g=0;a=d[g++];)s.push(" ",a[0],'="',"string"==typeof a[1]?n(a[1],!0):a[1],'"');switch(r){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":s.push(" />");break;case"script":s.push(">",e.innerHTML,"</",r,">");break;default:s.push(">"),e.hasChildNodes()&&o.getChildrenHtmlHelper(e,s),s.push("</",r,">")}break;case 4:case 3:s.push(n(e.nodeValue,!0));break;case 8:s.push("\x3c!--",n(e.nodeValue,!0),"--\x3e");break;default:s.push("\x3c!-- Element not recognized - Type: ",e.nodeType," Name: ",e.nodeName,"--\x3e")}},o.getChildrenHtml=function(t){var e=[];return o.getChildrenHtmlHelper(t,e),e.join("")},o.getChildrenHtmlHelper=function(t,e){if(t)for(var n,s=t.childNodes||t,r=!i("ie")||s!==t,a=0;n=s[a++];)r&&n.parentNode!=t||o.getNodeHtmlHelper(n,e)},o}),t("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/domReady","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/window","../_Widget","../_CssStateMixin","../selection","./range","./html","../focus","../main"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x,j,N,w,D,S){var T=i("dijit._editor.RichText",[C,x],{constructor:function(t){this.contentPreFilters=[],this.contentPostFilters=[],this.contentDomPreFilters=[],this.contentDomPostFilters=[],this.editingAreaStyleSheets=[],this.events=[].concat(this.events),this._keyHandlers={},t&&u.isString(t.value)&&(this.value=t.value),this.onLoadDeferred=new o},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs."),this.contentPreFilters=[u.trim,u.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters),g("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters)),g("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters)),(g("ie")||g("trident"))&&(this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[u.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters)),this.contentDomPostFilters=[u.hitch(this,"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters),this.inherited(arguments),_.publish(S._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments),this.open(),this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var t,e=u.hitch(this,function(t,e){return function(){return!this.execCommand(t,e)}}),i={b:e("bold"),i:e("italic"),u:e("underline"),a:e("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:e("formatblock","h1"),2:e("formatblock","h2"),3:e("formatblock","h3"),4:e("formatblock","h4"),"\\":e("insertunorderedlist")};for(t in g("ie")||(i.Z=e("redo")),i)this.addKeyHandler(t,!0,!1,i[t])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(T._editorCommandsLocalized)return this._local2NativeFormatNames=T._local2NativeFormatNames,void(this._native2LocalFormatNames=T._native2LocalFormatNames);T._editorCommandsLocalized=!0,T._local2NativeFormatNames={},T._native2LocalFormatNames={},this._local2NativeFormatNames=T._local2NativeFormatNames,this._native2LocalFormatNames=T._native2LocalFormatNames;for(var t,e=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"],i="",o=0;t=e[o++];)"l"!==t.charAt(1)?i+="<"+t+"><span>content</span></"+t+"><br/>":i+="<"+t+"><li>content</li></"+t+"><br/>";var n=a.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:i});this.ownerDocumentBody.appendChild(n);var s=u.hitch(this,function(){for(var t=n.firstChild;t;)try{this.selection.selectElement(t.firstChild);var e=t.tagName.toLowerCase();this._local2NativeFormatNames[e]=document.queryCommandValue("formatblock"),this._native2LocalFormatNames[this._local2NativeFormatNames[e]]=e,t=t.nextSibling.nextSibling}catch(t){}a.destroy(n)});this.defer(s)},open:function(t){(!this.onLoadDeferred||this.onLoadDeferred.fired>=0)&&(this.onLoadDeferred=new o),this.isClosed||this.close(),_.publish(S._scopeName+"._editor.RichText::open",this),1===arguments.length&&t.nodeName&&(this.domNode=t);var i,d=this.domNode;if(u.isString(this.value))i=this.value,d.innerHTML="";else if(d.nodeName&&"textarea"==d.nodeName.toLowerCase()){var l=this.textarea=d;this.name=l.name,i=l.value,(d=this.domNode=this.ownerDocument.createElement("div")).setAttribute("widgetId",this.id),l.removeAttribute("widgetId"),d.cssText=l.cssText,d.className+=" "+l.className,a.place(d,l,"before");var c=u.hitch(this,function(){if(h.set(l,{display:"block",position:"absolute",top:"-1000px"}),g("ie")){var t=l.style;this.__overflow=t.overflow,t.overflow="hidden"}});if(g("ie")?this.defer(c,10):c(),l.form){var p=l.value;this.reset=function(){var t=this.getValue();t!==p&&this.replaceValue(p)},f(l.form,"submit",u.hitch(this,function(){s.set(l,"disabled",this.disabled),l.value=this.getValue()}))}}else i=w.getChildrenHtml(d),d.innerHTML="";if(this.value=i,d.nodeName&&"LI"===d.nodeName&&(d.innerHTML=" <br>"),this.header=d.ownerDocument.createElement("div"),d.appendChild(this.header),this.editingArea=d.ownerDocument.createElement("div"),d.appendChild(this.editingArea),this.footer=d.ownerDocument.createElement("div"),d.appendChild(this.footer),this.name||(this.name=this.id+"_AUTOGEN"),""!==this.name&&(!e.useXDomain||e.allowXdRichTextSave)){var m=n.byId(S._scopeName+"._editor.RichText.value");if(m&&""!==m.value)for(var v,y=m.value.split(this._SEPARATOR),C=0;v=y[C++];){var x=v.split(this._NAME_CONTENT_SEP);if(x[0]===this.name){this.value=x[1],y=y.splice(C,1),m.value=y.join(this._SEPARATOR);break}}T._globalSaveHandler||(T._globalSaveHandler={},b.addOnUnload(function(){var t;for(t in T._globalSaveHandler){var e=T._globalSaveHandler[t];u.isFunction(e)&&e()}})),T._globalSaveHandler[this.id]=u.hitch(this,"_saveContent")}this.isClosed=!1;var N=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");N.id=this.id+"_iframe",N.style.border="none",N.style.width="100%",this._layoutMode?N.style.height="100%":g("ie")>=7?(this.height&&(N.style.height=this.height),this.minHeight&&(N.style.minHeight=this.minHeight)):N.style.height=this.height?this.height:this.minHeight,N.frameBorder=0,N._loadFunc=u.hitch(this,function(t){this.window=t,this.document=t.document,this.selection=new j.SelectionManager(t),g("ie")&&this._localizeEditorCommands(),this.onLoad(this.get("value"))});var D,k=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");D=g("ie")<11?'javascript:document.open();try{parent.window;}catch(e){document.domain="'+document.domain+"\";}document.write('"+k+"');document.close()":"javascript: '"+k+"'",9==g("ie")?(this.editingArea.appendChild(N),N.src=D):(N.setAttribute("src",D),this.editingArea.appendChild(N)),"LI"===d.nodeName&&(d.lastChild.style.marginTop="-1.2em"),r.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var t=h.getComputedStyle(this.domNode),e=[t.fontWeight,t.fontSize,t.fontFamily].join(" "),i=t.lineHeight;i=i.indexOf("px")>=0?parseFloat(i)/parseFloat(t.fontSize):i.indexOf("em")>=0?parseFloat(i):"normal";var o="",s=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/gi,function(t){var e=(t=t.replace(/^;/gi,"")+";").split(":")[0];if(e){var i;e=(e=u.trim(e)).toLowerCase();var n="";for(i=0;i<e.length;i++){var r=e.charAt(i);switch(r){case"-":i++,r=e.charAt(i).toUpperCase();default:n+=r}}h.set(s.domNode,n,"")}o+=t+";"});var r=p('label[for="'+this.id+'"]'),a="";return r.length?a=r[0].innerHTML:this["aria-label"]?a=this["aria-label"]:this["aria-labelledby"]&&(a=n.byId(this["aria-labelledby"]).innerHTML),this.iframe.setAttribute("title",a),["<!DOCTYPE html>",this.isLeftToRight()?"<html lang='"+this.lang+"'>\n<head>\n":"<html dir='rtl' lang='"+this.lang+"'>\n<head>\n",a?"<title>"+a+"</title>":"","<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n","\t}\n","\tbody,html,#dijitEditorBody { outline: none; }","html { height: 100%; width: 100%; overflow: hidden; }\n",this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",e,";\n",this.height||g("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",i,";\n","\t}\n","\tp{ margin: 1em 0; }\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",g("ie")||g("trident")?"":"\tli{ min-height:1.2em; }\n","</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body role='main' ","onload='try{frameElement && frameElement._loadFunc(window,document)}catch(e){document.domain=\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style='"+o+"'>","<div id='dijitEditorBody'></div>","</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var t=[];this.styleSheets&&(t=this.styleSheets.split(";"),this.styleSheets=""),t=t.concat(this.editingAreaStyleSheets),this.editingAreaStyleSheets=[];for(var e,i="",o=0,n=y.get(this.ownerDocument);e=t[o++];){var s=new v(n.location,e).toString();this.editingAreaStyleSheets.push(s),i+='<link rel="stylesheet" type="text/css" href="'+s+'"/>'}return i},addStyleSheet:function(e){var i=e.toString(),o=y.get(this.ownerDocument);("."===i.charAt(0)||"/"!==i.charAt(0)&&!e.host)&&(i=new v(o.location,i).toString()),t.indexOf(this.editingAreaStyleSheets,i)>-1||(this.editingAreaStyleSheets.push(i),this.onLoadDeferred.then(u.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(i);else{var t=this.document.getElementsByTagName("head")[0],e=this.document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=i,t.appendChild(e)}})))},removeStyleSheet:function(e){var i=e.toString(),o=y.get(this.ownerDocument);("."===i.charAt(0)||"/"!==i.charAt(0)&&!e.host)&&(i=new v(o.location,i).toString());var n=t.indexOf(this.editingAreaStyleSheets,i);-1!==n&&(delete this.editingAreaStyleSheets[n],p('link[href="'+i+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(t){if(t=!!t,this._set("disabled",t),this.isLoaded){var e=g("ie")&&(this.isLoaded||!this.focusOnLoad);if(e&&(this.editNode.unselectable="on"),this.editNode.contentEditable=!t,this.editNode.tabIndex=t?"-1":this.tabIndex,e&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")}),g("mozilla")&&!t&&this._mozSettingProps){var i,o=this._mozSettingProps;for(i in o)if(o.hasOwnProperty(i))try{this.document.execCommand(i,!1,o[i])}catch(t){}}this._disabledOK=!0}},onLoad:function(e){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=D.registerIframe(this.iframe)),this.editNode=this.document.body.firstChild;var i=this;this.beforeIframeNode=a.place("<div tabIndex=-1></div>",this.iframe,"before"),this.afterIframeNode=a.place("<div tabIndex=-1></div>",this.iframe,"after"),this.iframe.onfocus=this.document.onfocus=function(){i.editNode.focus()},this.focusNode=this.editNode;var o=this.events.concat(this.captureEvents),n=this.iframe?this.document:this.editNode;if(this.own.apply(this,t.map(o,function(t){var e=t.toLowerCase().replace(/^on/,"");return f(n,e,u.hitch(this,t))},this)),this.own(f(n,"mouseup",u.hitch(this,"onClick"))),g("ie")&&(this.own(f(this.document,"mousedown",u.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1),g("webkit")&&(this._webkitListener=this.own(f(this.document,"mouseup",u.hitch(this,"onDisplayChanged")))[0],this.own(f(this.document,"mousedown",u.hitch(this,function(t){var e=t.target;!e||e!==this.document.body&&e!==this.document||this.defer("placeCursorAtEnd")})))),g("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(t){}this.isLoaded=!0,this.set("disabled",this.disabled);var s=u.hitch(this,function(){this.setValue(e),this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0),this.onDisplayChanged(),this.focusOnLoad&&m(u.hitch(this,"defer","focus",this.updateInterval)),this.value=this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(s):s()},onKeyDown:function(e){if(e.keyCode===c.SHIFT||e.keyCode===c.ALT||e.keyCode===c.META||e.keyCode===c.CTRL)return!0;if(e.keyCode===c.TAB&&this.isTabIndent&&(e.stopPropagation(),e.preventDefault(),this.queryCommandEnabled(e.shiftKey?"outdent":"indent")&&this.execCommand(e.shiftKey?"outdent":"indent")),e.keyCode==c.TAB&&!this.isTabIndent&&!e.ctrlKey&&!e.altKey)return e.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),!0;g("ie")<9&&e.keyCode===c.BACKSPACE&&"Control"===this.document.selection.type&&(e.stopPropagation(),e.preventDefault(),this.execCommand("delete")),g("ff")&&(e.keyCode!==c.PAGE_UP&&e.keyCode!==c.PAGE_DOWN||this.editNode.clientHeight>=this.editNode.scrollHeight&&e.preventDefault());var i=this._keyHandlers[e.keyCode],o=arguments;return i&&!e.altKey&&t.some(i,function(t){if(!(t.shift^e.shiftKey||t.ctrl^(e.ctrlKey||e.metaKey)))return t.handler.apply(this,o)||e.preventDefault(),!0},this),this.defer("onKeyPressed",1),!0},onKeyUp:function(){},setDisabled:function(t){l.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2),this.set("disabled",t)},_setValueAttr:function(t){this.setValue(t)},_setDisableSpellCheckAttr:function(t){this.document?s.set(this.document.body,"spellcheck",!t):this.onLoadDeferred.then(u.hitch(this,function(){s.set(this.document.body,"spellcheck",!t)})),this._set("disableSpellCheck",t)},addKeyHandler:function(t,e,i,o){"string"==typeof t&&(t=t.toUpperCase().charCodeAt(0)),u.isArray(this._keyHandlers[t])||(this._keyHandlers[t]=[]),this._keyHandlers[t].push({shift:i||!1,ctrl:e||!1,handler:o})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(t){this.onDisplayChanged(t)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(t){(g("ie")||g("trident"))&&this.defer(function(){D.curNode||this.ownerDocumentBody.focus()}),this.inherited(arguments);var e=this.getValue(!0);e!==this.value&&this.onChange(e),this._set("value",e)},_onFocus:function(t){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!g("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?g("ie")<9?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove(),this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(t,e){var i=t.toLowerCase();return"formatblock"===i?g("safari")&&void 0===e&&(i="heading"):"hilitecolor"!==i||g("mozilla")||(i="backcolor"),i},_qcaCache:{},queryCommandAvailable:function(t){var e=this._qcaCache[t];return void 0!==e?e:this._qcaCache[t]=this._queryCommandAvailable(t)},_queryCommandAvailable:function(t){var e=1,i=2,o=4,n=8;function s(t){return{ie:Boolean(t&e),mozilla:Boolean(t&i),webkit:Boolean(t&o),opera:Boolean(t&n)}}var r=null;switch(t.toLowerCase()){case"bold":case"italic":case"underline":case"subscript":case"superscript":case"fontname":case"fontsize":case"forecolor":case"hilitecolor":case"justifycenter":case"justifyfull":case"justifyleft":case"justifyright":case"delete":case"selectall":case"toggledir":r=s(i|e|o|n);break;case"createlink":case"unlink":case"removeformat":case"inserthorizontalrule":case"insertimage":case"insertorderedlist":case"insertunorderedlist":case"indent":case"outdent":case"formatblock":case"inserthtml":case"undo":case"redo":case"strikethrough":case"tabindent":r=s(i|e|n|o);break;case"blockdirltr":case"blockdirrtl":case"dirltr":case"dirrtl":case"inlinedirltr":case"inlinedirrtl":r=s(e);break;case"cut":case"copy":case"paste":r=s(e|i|o|n);break;case"inserttable":r=s(i|e);break;case"insertcell":case"insertcol":case"insertrow":case"deletecells":case"deletecols":case"deleterows":case"mergecells":case"splitcell":r=s(e|i);break;default:return!1}return(g("ie")||g("trident"))&&r.ie||g("mozilla")&&r.mozilla||g("webkit")&&r.webkit||g("opera")&&r.opera},execCommand:function(t,e){var i;if(this.focused&&this.focus(),t=this._normalizeCommand(t,e),void 0!==e){if("heading"===t)throw new Error("unimplemented");"formatblock"===t&&(g("ie")||g("trident"))&&(e="<"+e+">")}var o="_"+t+"Impl";return this[o]?i=this[o](e):((e=arguments.length>1?e:null)||"createlink"!==t)&&(i=this.document.execCommand(t,!1,e)),this.onDisplayChanged(),i},queryCommandEnabled:function(t){if(this.disabled||!this._disabledOK)return!1;var e="_"+(t=this._normalizeCommand(t))+"EnabledImpl";return this[e]?this[e](t):this._browserQueryCommandEnabled(t)},queryCommandState:function(t){if(this.disabled||!this._disabledOK)return!1;t=this._normalizeCommand(t);try{return this.document.queryCommandState(t)}catch(t){return!1}},queryCommandValue:function(t){if(this.disabled||!this._disabledOK)return!1;var e;if(t=this._normalizeCommand(t),(g("ie")||g("trident"))&&"formatblock"===t)e=this._native2LocalFormatNames[this.document.queryCommandValue(t)];else if(g("mozilla")&&"hilitecolor"===t){var i;try{i=this.document.queryCommandValue("styleWithCSS")}catch(t){i=!1}this.document.execCommand("styleWithCSS",!1,!0),e=this.document.queryCommandValue(t),this.document.execCommand("styleWithCSS",!1,i)}else e=this.document.queryCommandValue(t);return e},_sCall:function(t,e){return this.selection[t].apply(this.selection,e)},placeCursorAtStart:function(){this.focus();var t=!1;if(g("mozilla"))for(var e=this.editNode.firstChild;e;){if(3===e.nodeType){if(e.nodeValue.replace(/^\s+|\s+$/g,"").length>0){t=!0,this.selection.selectElement(e);break}}else if(1===e.nodeType){t=!0;var i=e.tagName?e.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(i)?this.selection.selectElement(e):this.selection.selectElementChildren(e);break}e=e.nextSibling}else t=!0,this.selection.selectElementChildren(this.editNode);t&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var t=!1;if(g("mozilla"))for(var e=this.editNode.lastChild;e;){if(3===e.nodeType){if(e.nodeValue.replace(/^\s+|\s+$/g,"").length>0){t=!0,this.selection.selectElement(e);break}}else if(1===e.nodeType){t=!0,this.selection.selectElement(e.lastChild||e);break}e=e.previousSibling}else t=!0,this.selection.selectElementChildren(this.editNode);t&&this.selection.collapse(!1)},getValue:function(t){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,t):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(t){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){t=this._preFilterContent(t);var e=this.isClosed?this.domNode:this.editNode;e.innerHTML=t,this._preDomFilterContent(e)}else this.textarea.value=t;this.onDisplayChanged(),this._set("value",this.getValue(!0))}else this.onLoadDeferred.then(u.hitch(this,function(){this.setValue(t)}))},replaceValue:function(t){this.isClosed?this.setValue(t):this.window&&this.window.getSelection&&!g("mozilla")?this.setValue(t):this.window&&this.window.getSelection?(t=this._preFilterContent(t),this.execCommand("selectall"),this.execCommand("inserthtml",t),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(t),this._set("value",this.getValue(!0))},_preFilterContent:function(e){var i=e;return t.forEach(this.contentPreFilters,function(t){t&&(i=t(i))}),i},_preDomFilterContent:function(e){e=e||this.editNode,t.forEach(this.contentDomPreFilters,function(t){t&&u.isFunction(t)&&t(e)},this)},_postFilterContent:function(e,i){var o;return u.isString(e)?o=e:(e=e||this.editNode,this.contentDomPostFilters.length&&(i&&(e=u.clone(e)),t.forEach(this.contentDomPostFilters,function(t){e=t(e)})),o=w.getChildrenHtml(e)),u.trim(o.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(o=""),t.forEach(this.contentPostFilters,function(t){o=t(o)}),o},_saveContent:function(){var t=n.byId(S._scopeName+"._editor.RichText.value");t&&(t.value&&(t.value+=this._SEPARATOR),t.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(t,e){return t=t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),e||(t=t.replace(/'/gm,"&#39;")),t},getNodeHtml:function(t){return l.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2),w.getNodeHtml(t)},getNodeChildrenHtml:function(t){return l.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2),w.getChildrenHtml(t)},close:function(t){if(!this.isClosed){if(arguments.length||(t=!0),t&&this._set("value",this.getValue(!0)),this.interval&&clearInterval(this.interval),this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener),g("ie")&&(this.iframe.onfocus=null),this.iframe._loadFunc=null,this._iframeRegHandle&&(this._iframeRegHandle.remove(),delete this._iframeRegHandle),this.textarea){var e=this.textarea.style;e.position="",e.left=e.top="",g("ie")&&(e.overflow=this.__overflow,this.__overflow=null),this.textarea.value=this.value,a.destroy(this.domNode),this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe,r.remove(this.domNode,this.baseClass),this.isClosed=!0,this.isLoaded=!1,delete this.editNode,delete this.focusNode,this.window&&this.window._frameElement&&(this.window._frameElement=null),this.window=null,this.document=null,this.editingArea=null,this.editorObject=null}},destroy:function(){this.isClosed||this.close(!1),this._updateTimer&&this._updateTimer.remove(),this.inherited(arguments),T._globalSaveHandler&&delete T._globalSaveHandler[this.id]},_removeMozBogus:function(t){return t.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(t){return t=(t=(t=t.replace(/\sclass="webkit-block-placeholder"/gi,"")).replace(/\sclass="apple-style-span"/gi,"")).replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(t){return t.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(t){return t.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},_browserQueryCommandEnabled:function(t){if(!t)return!1;var e=g("ie")<9?this.document.selection.createRange():this.document;try{return e.queryCommandEnabled(t)}catch(t){return!1}},_createlinkEnabledImpl:function(){var t=!0;if(g("opera")){var e=this.window.getSelection();t=!!e.isCollapsed||this.document.queryCommandEnabled("createlink")}else t=this._browserQueryCommandEnabled("createlink");return t},_unlinkEnabledImpl:function(){return g("mozilla")||g("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){return!(!g("mozilla")&&!g("webkit"))||this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var t=!0;if(g("webkit")){var e=this.window.getSelection();e&&(e=e.toString()),t=!!e}else t=this._browserQueryCommandEnabled("cut");return t},_copyEnabledImpl:function(){var t=!0;if(g("webkit")){var e=this.window.getSelection();e&&(e=e.toString()),t=!!e}else t=this._browserQueryCommandEnabled("copy");return t},_pasteEnabledImpl:function(){return!!g("webkit")||this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(t){return g("ie")?this._inserthtmlImpl("<hr>"):this.document.execCommand("inserthorizontalrule",!1,t)},_unlinkImpl:function(t){if(this.queryCommandEnabled("unlink")&&(g("mozilla")||g("webkit"))){var e=this.selection.getAncestorElement("a");return this.selection.selectElement(e),this.document.execCommand("unlink",!1,null)}return this.document.execCommand("unlink",!1,t)},_hilitecolorImpl:function(t){var e,i=this._handleTextColorOrProperties("hilitecolor",t);return i||(g("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),console.log("Executing color command."),e=this.document.execCommand("hilitecolor",!1,t),this.document.execCommand("styleWithCSS",!1,!1)):e=this.document.execCommand("hilitecolor",!1,t)),e},_backcolorImpl:function(t){g("ie")&&(t=t||null);var e=this._handleTextColorOrProperties("backcolor",t);return e||(e=this.document.execCommand("backcolor",!1,t)),e},_forecolorImpl:function(t){g("ie")&&(t=t||null);var e=!1;return(e=this._handleTextColorOrProperties("forecolor",t))||(e=this.document.execCommand("forecolor",!1,t)),e},_inserthtmlImpl:function(t){t=this._preFilterContent(t);var e=!0;if(g("ie")<9){var i=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var o=i.item(0);i.length;)i.remove(i.item(0));o.outerHTML=t}else i.pasteHTML(t);i.select()}else if(g("trident")<8){var n=N.getSelection(this.window);if(n&&n.rangeCount&&n.getRangeAt){(i=n.getRangeAt(0)).deleteContents();var s,r,d=a.create("div");d.innerHTML=t;for(var o=this.document.createDocumentFragment();s=d.firstChild;)r=o.appendChild(s);i.insertNode(o),r&&((i=i.cloneRange()).setStartAfter(r),i.collapse(!1),n.removeAllRanges(),n.addRange(i))}}else g("mozilla")&&!t.length?this.selection.remove():e=this.document.execCommand("inserthtml",!1,t);return e},_boldImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("bold")),e||(e=this.document.execCommand("bold",!1,t)),e},_italicImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("italic")),e||(e=this.document.execCommand("italic",!1,t)),e},_underlineImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("underline")),e||(e=this.document.execCommand("underline",!1,t)),e},_strikethroughImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("strikethrough")),e||(e=this.document.execCommand("strikethrough",!1,t)),e},_superscriptImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("superscript")),e||(e=this.document.execCommand("superscript",!1,t)),e},_subscriptImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("subscript")),e||(e=this.document.execCommand("subscript",!1,t)),e},_fontnameImpl:function(t){var e;return(g("ie")||g("trident"))&&(e=this._handleTextColorOrProperties("fontname",t)),e||(e=this.document.execCommand("fontname",!1,t)),e},_fontsizeImpl:function(t){var e;return(g("ie")||g("trident"))&&(e=this._handleTextColorOrProperties("fontsize",t)),e||(e=this.document.execCommand("fontsize",!1,t)),e},_insertorderedlistImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(e=this._adaptIEList("insertorderedlist",t)),e||(e=this.document.execCommand("insertorderedlist",!1,t)),e},_insertunorderedlistImpl:function(t){var e=!1;return(g("ie")||g("trident"))&&(e=this._adaptIEList("insertunorderedlist",t)),e||(e=this.document.execCommand("insertunorderedlist",!1,t)),e},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(t){var e,i=0;if(t&&t.childNodes)for(e=0;e<t.childNodes.length;e++){var o=d.position(t.childNodes[e]);i+=o.h}return i},_isNodeEmpty:function(t,e){return 1===t.nodeType?!(t.childNodes.length>0)||this._isNodeEmpty(t.childNodes[0],e):3===t.nodeType&&""===t.nodeValue.substring(e)},_removeStartingRangeFromRange:function(t,e){if(t.nextSibling)e.setStart(t.nextSibling,0);else{for(var i=t.parentNode;i&&null==i.nextSibling;)i=i.parentNode;i&&e.setStart(i.nextSibling,0)}return e},_adaptIESelection:function(){var t=N.getSelection(this.window);if(t&&t.rangeCount&&!t.isCollapsed){for(var e=t.getRangeAt(0),i=e.startContainer,o=e.startOffset;3===i.nodeType&&o>=i.length&&i.nextSibling;)o-=i.length,i=i.nextSibling;for(var n=null;this._isNodeEmpty(i,o)&&i!==n;)n=i,e=this._removeStartingRangeFromRange(i,e),i=e.startContainer,o=0;t.removeAllRanges(),t.addRange(e)}},_adaptIEFormatAreaAndExec:function(e){var i,o,n,s,r,d,h,l,c=N.getSelection(this.window),u=this.document;if(!(e&&c&&c.isCollapsed))return!1;var f=this.queryCommandValue(e);if(f){var p,m=this._tagNamesForCommand(e),g=(n=c.getRangeAt(0)).startContainer;if(3===g.nodeType){var _=n.endOffset;g.length<_&&(o=this._adjustNodeAndOffset(i,_),g=o.node,_=o.offset)}for(;g&&g!==this.editNode;){var b=g.tagName?g.tagName.toLowerCase():"";if(t.indexOf(m,b)>-1){p=g;break}g=g.parentNode}if(p){i=n.startContainer;var v=u.createElement(p.tagName);if(a.place(v,p,"after"),i&&3===i.nodeType){var y,C,x=n.endOffset;i.length<x&&(o=this._adjustNodeAndOffset(i,x),i=o.node,x=o.offset),s=i.nodeValue,r=u.createTextNode(s.substring(0,x));var j=s.substring(x,s.length);j&&(d=u.createTextNode(j)),a.place(r,i,"before"),d&&((h=u.createElement("span")).className="ieFormatBreakerSpan",a.place(h,i,"after"),a.place(d,h,"after"),d=h),a.destroy(i);for(var w,D=r.parentNode,S=[];D!==p;){var T=D.tagName;w={tagName:T},S.push(w);var k=u.createElement(T);if(D.style&&k.style&&D.style.cssText&&(k.style.cssText=D.style.cssText,w.cssText=D.style.cssText),"FONT"===D.tagName&&(D.color&&(k.color=D.color,w.color=D.color),D.face&&(k.face=D.face,w.face=D.face),D.size&&(k.size=D.size,w.size=D.size)),D.className&&(k.className=D.className,w.className=D.className),d)for(y=d;y;)C=y.nextSibling,k.appendChild(y),y=C;k.tagName==D.tagName?((h=u.createElement("span")).className="ieFormatBreakerSpan",a.place(h,D,"after"),a.place(k,h,"after")):a.place(k,D,"after"),r=D,d=k,D=D.parentNode}if(d)for((1===(y=d).nodeType||3===y.nodeType&&y.nodeValue)&&(v.innerHTML="");y;)C=y.nextSibling,v.appendChild(y),y=C;if(S.length){w=S.pop();var A=u.createElement(w.tagName);for(w.cssText&&A.style&&(A.style.cssText=w.cssText),w.className&&(A.className=w.className),"FONT"===w.tagName&&(w.color&&(A.color=w.color),w.face&&(A.face=w.face),w.size&&(A.size=w.size)),a.place(A,v,"before");S.length;){w=S.pop();var I=u.createElement(w.tagName);w.cssText&&I.style&&(I.style.cssText=w.cssText),w.className&&(I.className=w.className),"FONT"===w.tagName&&(w.color&&(I.color=w.color),w.face&&(I.face=w.face),w.size&&(I.size=w.size)),A.appendChild(I),A=I}l=u.createTextNode("."),h.appendChild(l),A.appendChild(l),(E=N.create(this.window)).setStart(l,0),E.setEnd(l,l.length),c.removeAllRanges(),c.addRange(E),this.selection.collapse(!1),l.parentNode.innerHTML=""}else(h=u.createElement("span")).className="ieFormatBreakerSpan",l=u.createTextNode("."),h.appendChild(l),a.place(h,v,"before"),(E=N.create(this.window)).setStart(l,0),E.setEnd(l,l.length),c.removeAllRanges(),c.addRange(E),this.selection.collapse(!1),l.parentNode.innerHTML="";return v.firstChild||a.destroy(v),!0}}return!1}if(n=c.getRangeAt(0),(i=n.startContainer)&&3===i.nodeType){var _=n.startOffset;i.length<_&&(o=this._adjustNodeAndOffset(i,_),i=o.node,_=o.offset),s=i.nodeValue,r=u.createTextNode(s.substring(0,_));var j=s.substring(_);""!==j&&(d=u.createTextNode(s.substring(_))),h=u.createElement("span"),l=u.createTextNode("."),h.appendChild(l),r.length?a.place(r,i,"after"):r=i,a.place(h,r,"after"),d&&a.place(d,h,"after"),a.destroy(i);var E=N.create(this.window);return E.setStart(l,0),E.setEnd(l,l.length),c.removeAllRanges(),c.addRange(E),u.execCommand(e),a.place(h.firstChild,h,"before"),a.destroy(h),E.setStart(l,0),E.setEnd(l,l.length),c.removeAllRanges(),c.addRange(E),this.selection.collapse(!1),l.parentNode.innerHTML="",!0}},_adaptIEList:function(t){var e=N.getSelection(this.window);if(e.isCollapsed&&e.rangeCount&&!this.queryCommandValue(t)){var i=e.getRangeAt(0),o=i.startContainer;if(o&&3==o.nodeType&&!i.startOffset){var n="ul";"insertorderedlist"===t&&(n="ol");var s=this.document.createElement(n),r=a.create("li",null,s);a.place(s,o,"before"),r.appendChild(o),a.create("br",null,s,"after");var d=N.create(this.window);return d.setStart(o,0),d.setEnd(o,o.length),e.removeAllRanges(),e.addRange(d),this.selection.collapse(!0),!0}}return!1},_handleTextColorOrProperties:function(t,e){var i,o,n,s,r,d,l,c,u=N.getSelection(this.window),f=this.document;if(e=e||null,t&&u&&u.isCollapsed&&u.rangeCount&&(n=u.getRangeAt(0),(i=n.startContainer)&&3===i.nodeType)){var p=n.startOffset;i.length<p&&(o=this._adjustNodeAndOffset(i,p),i=o.node,p=o.offset),s=i.nodeValue,r=f.createTextNode(s.substring(0,p));var m=s.substring(p);""!==m&&(d=f.createTextNode(s.substring(p))),l=f.createElement("span"),c=f.createTextNode("."),l.appendChild(c);var _=f.createElement("span");l.appendChild(_),r.length?a.place(r,i,"after"):r=i,a.place(l,r,"after"),d&&a.place(d,l,"after"),a.destroy(i);var b=N.create(this.window);if(b.setStart(c,0),b.setEnd(c,c.length),u.removeAllRanges(),u.addRange(b),g("webkit")){var v="color";"hilitecolor"!==t&&"backcolor"!==t||(v="backgroundColor"),h.set(l,v,e),this.selection.remove(),a.destroy(_),l.innerHTML="&#160;",this.selection.selectElement(l),this.focus()}else this.execCommand(t,e),a.place(l.firstChild,l,"before"),a.destroy(l),b.setStart(c,0),b.setEnd(c,c.length),u.removeAllRanges(),u.addRange(b),this.selection.collapse(!1),c.parentNode.removeChild(c);return!0}return!1},_adjustNodeAndOffset:function(t,e){for(;t.length<e&&t.nextSibling&&3===t.nextSibling.nodeType;)e-=t.length,t=t.nextSibling;return{node:t,offset:e}},_tagNamesForCommand:function(t){return"bold"===t?["b","strong"]:"italic"===t?["i","em"]:"strikethrough"===t?["s","strike"]:"superscript"===t?["sup"]:"subscript"===t?["sub"]:"underline"===t?["u"]:[]},_stripBreakerNodes:function(t){if(this.isLoaded)return p(".ieFormatBreakerSpan",t).forEach(function(t){for(;t.firstChild;)a.place(t.firstChild,t,"before");a.destroy(t)}),t},_stripTrailingEmptyNodes:function(t){function e(t){return/^(p|div|br)$/i.test(t.nodeName)&&0==t.children.length&&/^[\s\xA0]*$/.test(t.textContent||t.innerText||"")||3===t.nodeType&&/^[\s\xA0]*$/.test(t.nodeValue)}for(;t.lastChild&&e(t.lastChild);)a.destroy(t.lastChild);return t},_setTextDirAttr:function(t){this._set("textDir",t),this.onLoadDeferred.then(u.hitch(this,function(){this.editNode.dir=t}))}});return T}),t("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range"],function(t,e,i,o,n,s,r,a,d,h,l){return t("dijit._editor.plugins.EnterKeyHandling",d,{blockNodeForEnter:"BR",constructor:function(t){t&&("blockNodeForEnter"in t&&(t.blockNodeForEnter=t.blockNodeForEnter.toUpperCase()),o.mixin(this,t))},setEditor:function(t){if(this.editor!==t)if(this.editor=t,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,t.onLoadDeferred.then(o.hitch(this,function(e){return this.own(n(t.document,"keydown",o.hitch(this,function(t){if(t.keyCode==i.ENTER){var e=o.mixin({},t);e.shiftKey=!0,this.handleEnterKey(e)||(t.stopPropagation(),t.preventDefault())}}))),s("ie")>=9&&s("ie")<=10&&this.own(n(t.document,"paste",o.hitch(this,function(t){setTimeout(o.hitch(this,function(){var t=this.editor.document.selection.createRange();t.move("character",-1),t.select(),t.move("character",1),t.select()}),0)}))),e}));else if(this.blockNodeForEnter){var e=o.hitch(this,"handleEnterKey");t.addKeyHandler(13,0,0,e),t.addKeyHandler(13,0,1,e),this.own(this.editor.on("KeyPressed",o.hitch(this,"onKeyPressed")))}},onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var t=this.editor.selection.getAncestorElement("LI");if(t){s("mozilla")&&"LI"==t.parentNode.parentNode.nodeName&&(t=t.parentNode.parentNode);var e=t.firstChild;if(e&&1==e.nodeType&&("UL"==e.nodeName||"OL"==e.nodeName)){t.insertBefore(e.ownerDocument.createTextNode(" "),e);var i=l.create(this.editor.window);i.setStart(t.firstChild,0);var o=l.getSelection(this.editor.window,!0);o.removeAllRanges(),o.addRange(i)}}else{h.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var n=this.editor.selection.getAncestorElement(this.blockNodeForEnter);if(n){if(n.innerHTML=this.bogusHtmlContent,s("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1),r.select()}}else console.error("onKeyPressed: Cannot find the new block node")}}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(t){var i,o,n,r,d,c,u,f=this.editor.document;if(t.shiftKey){var p=this.editor.selection.getParentElement(),m=l.getAncestor(p,this.blockNodes);if(m){if("LI"==m.tagName)return!0;if(i=l.getSelection(this.editor.window),(o=i.getRangeAt(0)).collapsed||(o.deleteContents(),i=l.getSelection(this.editor.window),o=i.getRangeAt(0)),l.atBeginningOfContainer(m,o.startContainer,o.startOffset))d=f.createElement("br"),n=l.create(this.editor.window),m.insertBefore(d,m.firstChild),n.setStartAfter(d),i.removeAllRanges(),i.addRange(n);else{if(!l.atEndOfContainer(m,o.startContainer,o.startOffset))return!(c=o.startContainer)||3!=c.nodeType||(u=c.nodeValue,r=f.createTextNode(u.substring(0,o.startOffset)),v=f.createTextNode(u.substring(o.startOffset)),b=f.createElement("br"),""==v.nodeValue&&s("webkit")&&(v=f.createTextNode(" ")),e.place(r,c,"after"),e.place(b,r,"after"),e.place(v,b,"after"),e.destroy(c),(n=l.create(this.editor.window)).setStart(v,0),i.removeAllRanges(),i.addRange(n),!1);n=l.create(this.editor.window),d=f.createElement("br"),m.appendChild(d),m.appendChild(f.createTextNode(" ")),n.setStart(m.lastChild,0),i.removeAllRanges(),i.addRange(n)}}else if((i=l.getSelection(this.editor.window)).rangeCount){if((o=i.getRangeAt(0))&&o.startContainer)if(o.collapsed||(o.deleteContents(),i=l.getSelection(this.editor.window),o=i.getRangeAt(0)),(c=o.startContainer)&&3==c.nodeType){var g=o.startOffset;c.length<g&&(D=this._adjustNodeAndOffset(c,g),c=D.node,g=D.offset),u=c.nodeValue,r=f.createTextNode(u.substring(0,g)),v=f.createTextNode(u.substring(g)),b=f.createElement("br"),v.length||(v=f.createTextNode(" ")),r.length?e.place(r,c,"after"):r=c,e.place(b,r,"after"),e.place(v,b,"after"),e.destroy(c),(n=l.create(this.editor.window)).setStart(v,0),n.setEnd(v,v.length),i.removeAllRanges(),i.addRange(n),this.editor.selection.collapse(!0)}else{var _;o.startOffset>=0&&(_=c.childNodes[o.startOffset]);var b=f.createElement("br"),v=f.createTextNode(" ");_?(e.place(b,_,"before"),e.place(v,b,"after")):(c.appendChild(b),c.appendChild(v)),(n=l.create(this.editor.window)).setStart(v,0),n.setEnd(v,v.length),i.removeAllRanges(),i.addRange(n),this.editor.selection.collapse(!0)}}else h.prototype.execCommand.call(this.editor,"inserthtml","<br>");return!1}var y=!0;i=l.getSelection(this.editor.window),(o=i.getRangeAt(0)).collapsed||(o.deleteContents(),i=l.getSelection(this.editor.window),o=i.getRangeAt(0));var C=l.getBlockAncestor(o.endContainer,null,this.editor.editNode),x=C.blockNode;if(this._checkListLater=x&&("LI"==x.nodeName||"LI"==x.parentNode.nodeName))return s("mozilla")&&(this._pressedEnterInBlock=x),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(x.innerHTML)&&(x.innerHTML="",s("webkit")&&((n=l.create(this.editor.window)).setStart(x,0),i.removeAllRanges(),i.addRange(n)),this._checkListLater=!1),!0;if(!C.blockNode||C.blockNode===this.editor.editNode){try{h.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(t){}if((C={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),blockContainer:this.editor.editNode}).blockNode){if(C.blockNode!=this.editor.editNode&&!(C.blockNode.textContent||C.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(C.blockNode),!1}else C.blockNode=this.editor.editNode;i=l.getSelection(this.editor.window),o=i.getRangeAt(0)}var j=f.createElement(this.blockNodeForEnter);j.innerHTML=this.bogusHtmlContent,this.removeTrailingBr(C.blockNode);var N=o.endOffset,w=o.endContainer;if(w.length<N){var D=this._adjustNodeAndOffset(w,N);w=D.node,N=D.offset}if(l.atEndOfContainer(C.blockNode,w,N))C.blockNode===C.blockContainer?C.blockNode.appendChild(j):e.place(j,C.blockNode,"after"),y=!1,(n=l.create(this.editor.window)).setStart(j,0),i.removeAllRanges(),i.addRange(n),this.editor.height&&a.scrollIntoView(j);else if(l.atBeginningOfContainer(C.blockNode,o.startContainer,o.startOffset))e.place(j,C.blockNode,C.blockNode===C.blockContainer?"first":"before"),j.nextSibling&&this.editor.height&&((n=l.create(this.editor.window)).setStart(j.nextSibling,0),i.removeAllRanges(),i.addRange(n),a.scrollIntoView(j.nextSibling)),y=!1;else{var S,T;if(C.blockNode===C.blockContainer?C.blockNode.appendChild(j):e.place(j,C.blockNode,"after"),y=!1,C.blockNode.style&&j.style&&C.blockNode.style.cssText&&(j.style.cssText=C.blockNode.style.cssText),(c=o.startContainer)&&3==c.nodeType){var k,A;N=o.endOffset,c.length<N&&(D=this._adjustNodeAndOffset(c,N),c=D.node,N=D.offset),u=c.nodeValue,r=f.createTextNode(u.substring(0,N)),v=f.createTextNode(u.substring(N,u.length)),e.place(r,c,"before"),e.place(v,c,"after"),e.destroy(c);for(var I=r.parentNode;I!==C.blockNode;){var E=I.tagName,M=f.createElement(E);for(I.style&&M.style&&I.style.cssText&&(M.style.cssText=I.style.cssText),"FONT"===I.tagName&&(I.color&&(M.color=I.color),I.face&&(M.face=I.face),I.size&&(M.size=I.size)),k=v;k;)A=k.nextSibling,M.appendChild(k),k=A;e.place(M,I,"after"),r=I,v=M,I=I.parentNode}for((1==(k=v).nodeType||3==k.nodeType&&k.nodeValue)&&(j.innerHTML=""),S=k;k;)A=k.nextSibling,j.appendChild(k),k=A}n=l.create(this.editor.window);var B=S;if("BR"!==this.blockNodeForEnter){for(;B;)T=B,A=B.firstChild,B=A;T&&T.parentNode?(j=T.parentNode,n.setStart(j,0),i.removeAllRanges(),i.addRange(n),this.editor.height&&a.scrollIntoView(j),s("mozilla")&&(this._pressedEnterInBlock=C.blockNode)):y=!0}else n.setStart(j,0),i.removeAllRanges(),i.addRange(n),this.editor.height&&a.scrollIntoView(j),s("mozilla")&&(this._pressedEnterInBlock=C.blockNode)}return y},_adjustNodeAndOffset:function(t,e){for(;t.length<e&&t.nextSibling&&3==t.nextSibling.nodeType;)e-=t.length,t=t.nextSibling;return{node:t,offset:e}},removeTrailingBr:function(t){var i=/P|DIV|LI/i.test(t.tagName)?t:this.editor.selection.getParentOfType(t,["P","DIV","LI"]);i&&(i.lastChild&&(i.childNodes.length>1&&3==i.lastChild.nodeType&&/^[\s\xAD]*$/.test(i.lastChild.nodeValue)||"BR"==i.lastChild.tagName)&&e.destroy(i.lastChild),i.childNodes.length||(i.innerHTML=this.bogusHtmlContent))}})}),t("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x,j,N){var w=i("dijit.Editor",j,{plugins:null,extraPlugins:null,constructor:function(){l.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",y]),this._plugins=[],this._editInterval=1e3*this.editActionInterval,(c("ie")||c("trident"))&&(this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate"))},postMixInProperties:function(){this.setValueDeferred=new o,this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this._steps=this._steps.slice(0),this._undoedSteps=this._undoedSteps.slice(0),l.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins)),this.commands=n.getLocalization("dijit._editor","commands",this.lang),c("webkit")&&d.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments),this.toolbar||(this.toolbar=new m({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode)),e.forEach(this.plugins,this.addPlugin,this),this.setValueDeferred.resolve(!0),r.add(this.iframe.parentNode,"dijitEditorIFrameContainer"),r.add(this.iframe,"dijitEditorIFrame"),s.set(this.iframe,"allowTransparency",!0),this.toolbar.startup(),this.onNormalizedDisplayChanged()},destroy:function(){e.forEach(this._plugins,function(t){t&&t.destroy&&t.destroy()}),this._plugins=[],this.toolbar.destroyRecursive(),delete this.toolbar,this.inherited(arguments)},addPlugin:function(e,i){var o=l.isString(e)?{name:e}:l.isFunction(e)?{ctor:e}:e;if(!o.setEditor){var n={args:o,plugin:null,editor:this};if(o.name&&(v.registry[o.name]?n.plugin=v.registry[o.name](o):f.publish(N._scopeName+".Editor.getPlugin",n)),!n.plugin)try{var s=o.ctor||l.getObject(o.name)||t(o.name);s&&(n.plugin=new s(o))}catch(t){throw new Error(this.id+": cannot find plugin ["+o.name+"]")}if(!n.plugin)throw new Error(this.id+": cannot find plugin ["+o.name+"]");e=n.plugin}arguments.length>1?this._plugins[i]=e:this._plugins.push(e),e.setEditor(this),l.isFunction(e.setToolbar)&&e.setToolbar(this.toolbar)},resize:function(t){t&&_.prototype.resize.apply(this,arguments)},layout:function(){var t=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+a.getPadBorderExtents(this.iframe.parentNode).h+a.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=t+"px",this.iframe&&(this.iframe.style.height="100%"),this._layoutMode=!0},_onIEMouseDown:function(t){var e,i=this.document.body,o=i.clientWidth,n=i.clientHeight,s=i.clientLeft,r=i.offsetWidth,a=i.offsetHeight,d=i.offsetLeft;/^rtl$/i.test(i.dir||"")?o<r&&t.x>o&&t.x<r&&(e=!0):t.x<s&&t.x>d&&(e=!0),e||n<a&&t.y>n&&t.y<a&&(e=!0),e||(delete this._cursorToStart,delete this._savedSelection,"BODY"==t.target.tagName&&this.defer("placeCursorAtEnd"),this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(t){this.customUndo&&this.endEditing(!0),"BODY"!=t.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(t){this._inEditing||(this._inEditing=!0,this._beginEditing(t)),this.editActionInterval>0&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(t){if(!this.customUndo||"undo"!=t&&"redo"!=t){this.customUndo&&(this.endEditing(),this._beginEditing());var e=this.inherited(arguments);return this.customUndo&&this._endEditing(),e}return this[t]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(t){var e;try{if(e=this.document.execCommand(t,!1,null),c("webkit")&&!e)throw{code:1011}}catch(o){if(1011==o.code||9==o.code&&c("opera")){var i=u.substitute;alert(i(this.commands.systemShortcut,[this.commands[t],i(this.commands[c("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[t]])]))}e=!1}return e},queryCommandEnabled:function(t){return!this.customUndo||"undo"!=t&&"redo"!=t?this.inherited(arguments):"undo"==t?this._steps.length>1:this._undoedSteps.length>0},_moveToBookmark:function(t){var i,o,n,s,r=t.mark,a=t.mark,d=t.isCollapsed;a&&(c("ie")<9||9===c("ie")&&c("quirks")?l.isArray(a)?(r=[],e.forEach(a,function(t){r.push(x.getNode(t,this.editNode))},this),this.selection.moveToBookmark({mark:r,isCollapsed:d})):a.startContainer&&a.endContainer&&(s=x.getSelection(this.window))&&s.removeAllRanges&&(s.removeAllRanges(),i=x.create(this.window),o=x.getNode(a.startContainer,this.editNode),n=x.getNode(a.endContainer,this.editNode),o&&n&&(i.setStart(o,a.startOffset),i.setEnd(n,a.endOffset),s.addRange(i))):(s=x.getSelection(this.window))&&s.removeAllRanges&&(s.removeAllRanges(),i=x.create(this.window),o=x.getNode(a.startContainer,this.editNode),n=x.getNode(a.endContainer,this.editNode),o&&n&&(i.setStart(o,a.startOffset),i.setEnd(n,a.endOffset),s.addRange(i))))},_changeToStep:function(t,e){this.setValue(e.text);var i=e.bookmark;i&&this._moveToBookmark(i)},undo:function(){var t=!1;if(!this._undoRedoActive){this._undoRedoActive=!0,this.endEditing(!0);var e=this._steps.pop();e&&this._steps.length>0&&(this.focus(),this._changeToStep(e,this._steps[this._steps.length-1]),this._undoedSteps.push(e),this.onDisplayChanged(),delete this._undoRedoActive,t=!0),delete this._undoRedoActive}return t},redo:function(){var t=!1;if(!this._undoRedoActive){this._undoRedoActive=!0,this.endEditing(!0);var e=this._undoedSteps.pop();e&&this._steps.length>0&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],e),this._steps.push(e),this.onDisplayChanged(),t=!0),delete this._undoRedoActive}return t},endEditing:function(t){this._editTimer&&(this._editTimer=this._editTimer.remove()),this._inEditing&&(this._endEditing(t),this._inEditing=!1)},_getBookmark:function(){var t=this.selection.getBookmark(),i=[];if(t&&t.mark){var o=t.mark;if(c("ie")<9||9===c("ie")&&c("quirks")){var n,s=x.getSelection(this.window);if(l.isArray(o))e.forEach(t.mark,function(t){i.push(x.getIndex(t,this.editNode).o)},this),t.mark=i;else if(s)s.rangeCount&&(n=s.getRangeAt(0)),t.mark=n?n.cloneRange():this.selection.getBookmark()}try{t.mark&&t.mark.startContainer&&(i=x.getIndex(t.mark.startContainer,this.editNode).o,t.mark={startContainer:i,startOffset:t.mark.startOffset,endContainer:t.mark.endContainer===t.mark.startContainer?i:x.getIndex(t.mark.endContainer,this.editNode).o,endOffset:t.mark.endOffset})}catch(e){t.mark=null}}return t},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:C.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var t=C.getChildrenHtml(this.editNode);this._undoedSteps=[],this._steps.push({text:t,bookmark:this._getBookmark()})},onKeyDown:function(t){if(c("ie")||this.iframe||t.keyCode!=h.TAB||this.tabIndent||this._saveSelection(),this.customUndo){var e=t.keyCode;if(t.ctrlKey&&!t.shiftKey&&!t.altKey){if(90==e||122==e)return t.stopPropagation(),t.preventDefault(),void this.undo();if(89==e||121==e)return t.stopPropagation(),t.preventDefault(),void this.redo()}switch(this.inherited(arguments),e){case h.ENTER:case h.BACKSPACE:case h.DELETE:this.beginEditing();break;case 88:case 86:if(t.ctrlKey&&!t.altKey&&!t.metaKey){this.endEditing(),88==t.keyCode?this.beginEditing("cut"):this.beginEditing("paste"),this.defer("endEditing",1);break}default:if(!t.ctrlKey&&!t.altKey&&!t.metaKey&&(t.keyCode<h.F1||t.keyCode>h.F15)){this.beginEditing();break}case h.ALT:this.endEditing();break;case h.UP_ARROW:case h.DOWN_ARROW:case h.LEFT_ARROW:case h.RIGHT_ARROW:case h.HOME:case h.END:case h.PAGE_UP:case h.PAGE_DOWN:this.endEditing(!0);break;case h.CTRL:case h.SHIFT:case h.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments),this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(t){}},_restoreSelection:function(){this._savedSelection&&(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0),this.inherited(arguments)},replaceValue:function(t){this.customUndo?this.isClosed?this.setValue(t):(this.beginEditing(),t||(t="&#160;"),this.setValue(t),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(t){this.setValueDeferred.then(l.hitch(this,function(){!this.disabled&&t||!this._buttonEnabledPlugins&&t?e.forEach(this._plugins,function(t){t.set("disabled",!0)}):this.disabled&&!t&&e.forEach(this._plugins,function(t){t.set("disabled",!1)})})),this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&d.set(this.document.body,"color",d.get(this.iframe,"color"))}catch(t){}}});function D(t){return new v({command:t.name})}function S(t){return new v({buttonClass:b,command:t.name})}return l.mixin(v.registry,{undo:D,redo:D,cut:D,copy:D,paste:D,insertOrderedList:D,insertUnorderedList:D,indent:D,outdent:D,justifyCenter:D,justifyFull:D,justifyLeft:D,justifyRight:D,delete:D,selectAll:D,removeFormat:D,unlink:D,insertHorizontalRule:D,bold:S,italic:S,underline:S,strikethrough:S,subscript:S,superscript:S,"|":function(){return new v({setEditor:function(t){this.editor=t,this.button=new g({ownerDocument:t.ownerDocument})}})}}),w}),t("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(t,e,i,o,n,s,r,a){var d=e("dijit.form._TextBoxMixin"+(o("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(t,e,i){var o;void 0!==t&&(o=this.filter(t),"string"!=typeof i&&(i=null===o||"number"==typeof o&&isNaN(o)?"":this.filter(this.format(o,this.constraints)),0!=this.compare(o,this.filter(this.parse(i,this.constraints)))&&(i=null))),null==i||"number"==typeof i&&isNaN(i)||this.textbox.value==i||(this.textbox.value=i,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[o,e])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(t){null==t?t="":"string"!=typeof t&&(t=String(t)),this.textbox.value=t,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(t){return null==t?"":t.toString?t.toString():t},parse:function(t){return t},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(t){this._processInput(t),this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(t){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(r(this.textbox,"keydown, keypress, paste, cut, input, compositionend",s.hitch(this,function(t){var e;if("keydown"==t.type){switch(e=t.keyCode){case n.SHIFT:case n.ALT:case n.CTRL:case n.META:case n.CAPS_LOCK:case n.NUM_LOCK:case n.SCROLL_LOCK:return}if(!t.ctrlKey&&!t.metaKey&&!t.altKey){switch(e){case n.NUMPAD_0:case n.NUMPAD_1:case n.NUMPAD_2:case n.NUMPAD_3:case n.NUMPAD_4:case n.NUMPAD_5:case n.NUMPAD_6:case n.NUMPAD_7:case n.NUMPAD_8:case n.NUMPAD_9:case n.NUMPAD_MULTIPLY:case n.NUMPAD_PLUS:case n.NUMPAD_ENTER:case n.NUMPAD_MINUS:case n.NUMPAD_PERIOD:case n.NUMPAD_DIVIDE:return}if(e>=65&&e<=90||e>=48&&e<=57||e==n.SPACE)return;var i=!1;for(var o in n)if(n[o]===t.keyCode){i=!0;break}if(!i)return}}(e=t.charCode>=32?String.fromCharCode(t.charCode):t.charCode)||(e=t.keyCode>=65&&t.keyCode<=90||t.keyCode>=48&&t.keyCode<=57||t.keyCode==n.SPACE?String.fromCharCode(t.keyCode):t.keyCode);e||(e=229);if("keypress"==t.type){if("string"!=typeof e)return;if((e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||" "===e)&&(t.ctrlKey||t.metaKey||t.altKey))return}if("input"==t.type){if(this.__skipInputEvent)return void(this.__skipInputEvent=!1)}else this.__skipInputEvent=!0;var r,a={faux:!0};for(r in t)if(!/^(layer[XY]|returnValue|keyLocation)$/.test(r)){var d=t[r];"function"!=typeof d&&void 0!==d&&(a[r]=d)}s.mixin(a,{charOrCode:e,_wasConsumed:!1,preventDefault:function(){a._wasConsumed=!0,t.preventDefault()},stopPropagation:function(){t.stopPropagation()}}),!1===this.onInput(a)&&(a.preventDefault(),a.stopPropagation());if(a._wasConsumed)return;this.defer(function(){this._onInput(a)})})),r(this.domNode,"keypress",function(t){t.stopPropagation()}))},_blankValue:"",filter:function(t){return null===t?this._blankValue:"string"!=typeof t?t:(this.trim&&(t=s.trim(t)),this.uppercase&&(t=t.toUpperCase()),this.lowercase&&(t=t.toLowerCase()),this.propercase&&(t=t.replace(/[^\s]+/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})),t)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(t){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(t){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==t&&(this._selectOnClickHandle=r.once(this.domNode,"mouseup, touchend",s.hitch(this,function(t){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return o("dojo-bidi")&&(d=e("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),d._setSelectionRange=a._setSelectionRange=function(t,e,i){t.setSelectionRange&&t.setSelectionRange(e,i)},d.selectInputText=a.selectInputText=function(t,e,o){t=i.byId(t),isNaN(e)&&(e=0),isNaN(o)&&(o=t.value?t.value.length:0);try{t.focus(),d._setSelectionRange(t,e,o)}catch(t){}},d}),t("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(t,e,i,o,n,s,r,a,d,h,l){var c=t("dijit.form.TextBox"+(r("dojo-bidi")?"_NoBidi":""),[a,d],{templateString:h,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:r("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var t=this.type.toLowerCase();(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==t||"file"==t)&&this.templateString==this.constructor.prototype.templateString)&&(this.templateString=this._singleNodeTemplate),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),r("ie")<9&&this.defer(function(){try{var t=i.getComputedStyle(this.domNode);if(t){var e=t.fontFamily;if(e){var o=this.domNode.getElementsByTagName("INPUT");if(o)for(var n=0;n<o.length;n++)o[n].style.fontFamily=e}}}catch(t){}})},_setPlaceHolderAttr:function(t){this._set("placeHolder",t),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=e.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(s(this._phspan,"mousedown",function(t){t.preventDefault()}),s(this._phspan,"touchend, pointerup, MSPointerUp",n.hitch(this,function(){this.focus()})))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(t)),this._updatePlaceHolder()},_onInput:function(t){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(t,e,i){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return o.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(t){o.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",t)},_onBlur:function(t){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),r("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(t){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});return r("ie")<9&&(c.prototype._isTextSelected=function(){var t=this.ownerDocument.selection.createRange(),e=t.parentElement();return e==this.textbox&&t.text.length>0},l._setSelectionRange=d._setSelectionRange=function(t,e,i){if(t.createTextRange){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",-99999),o.moveStart("character",e),o.moveEnd("character",i-e),o.select()}}),r("dojo-bidi")&&(c=t("dijit.form.TextBox",c,{_setPlaceHolderAttr:function(t){this.inherited(arguments),this.applyTextDir(this._phspan)}})),c}),t("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_){var b=e("dijit._MasterTooltip",[f,p],{duration:c.defaultDuration,templateString:g,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.bgIframe=new m(this.domNode),this.fadeIn=i.fadeIn({node:this.domNode,duration:this.duration,onEnd:a.hitch(this,"_onShow")}),this.fadeOut=i.fadeOut({node:this.domNode,duration:this.duration,onEnd:a.hitch(this,"_onHide")})},show:function(t,e,i,o,n,s,d){if(!this.aroundNode||this.aroundNode!==e||this.containerNode.innerHTML!=t)if("playing"!=this.fadeOut.status()){this.containerNode.innerHTML=t,n&&this.set("textDir",n),this.containerNode.align=o?"right":"left";var h=u.around(this.domNode,e,i&&i.length?i:C.defaultPosition,!o,a.hitch(this,"orient")),l=h.aroundNodePos;"M"==h.corner.charAt(0)&&"M"==h.aroundCorner.charAt(0)?(this.connectorNode.style.top=l.y+(l.h-this.connectorNode.offsetHeight>>1)-h.y+"px",this.connectorNode.style.left=""):"M"==h.corner.charAt(1)&&"M"==h.aroundCorner.charAt(1)?this.connectorNode.style.left=l.x+(l.w-this.connectorNode.offsetWidth>>1)-h.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top=""),r.set(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=e,this.onMouseEnter=s||y,this.onMouseLeave=d||y}else this._onDeck=arguments},orient:function(t,e,i,o,n){this.connectorNode.style.top="";var r=o.h,a=o.w;t.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[e+"-"+i],this.domNode.style.width="auto";var d=s.position(this.domNode);(l("ie")||l("trident"))&&(d.w+=2);var h=Math.min(Math.max(a,1),d.w);if(s.setMarginBox(this.domNode,{w:h}),"B"==i.charAt(0)&&"B"==e.charAt(0)){var c=s.position(t),u=this.connectorNode.offsetHeight;if(c.h>r){var f=r-(n.h+u>>1);this.connectorNode.style.top=f+"px",this.connectorNode.style.bottom=""}else this.connectorNode.style.bottom=Math.min(Math.max(n.h/2-u/2,0),c.h-u)+"px",this.connectorNode.style.top=""}else this.connectorNode.style.top="",this.connectorNode.style.bottom="";return Math.max(0,d.w-a)},_onShow:function(){l("ie")&&(this.domNode.style.filter="")},hide:function(t){this._onDeck&&this._onDeck[1]==t?this._onDeck=null:this.aroundNode===t&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()),this.onMouseEnter=this.onMouseLeave=y},_onHide:function(){this.domNode.style.cssText="",this.containerNode.innerHTML="",this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});l("dojo-bidi")&&b.extend({_setAutoTextDir:function(e){this.applyTextDir(e),t.forEach(e.children,function(t){this._setAutoTextDir(t)},this)},_setTextDirAttr:function(t){this._set("textDir",t),"auto"==t?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}}),_.showTooltip=function(e,i,o,n,s,r,a){return o&&(o=t.map(o,function(t){return{after:"after-centered",before:"before-centered"}[t]||t})),C._masterTT||(_._masterTT=C._masterTT=new b),C._masterTT.show(e,i,o,n,s,r,a)},_.hideTooltip=function(t){return C._masterTT&&C._masterTT.hide(t)};var v="DORMANT";function y(){}var C=e("dijit.Tooltip",f,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(e){t.forEach(this._connections||[],function(e){t.forEach(e,function(t){t.remove()})},this),this._connectIds=t.filter(a.isArrayLike(e)?e:e?[e]:[],function(t){return o.byId(t,this.ownerDocument)},this),this._connections=t.map(this._connectIds,function(t){var e=o.byId(t,this.ownerDocument),i=this.selector,n=i?function(t){return h.selector(i,t)}:function(t){return t},s=this;return[h(e,n(d.enter),function(){s._onHover(this)}),h(e,n("focusin"),function(){s._onHover(this)}),h(e,n(d.leave),a.hitch(s,"_onUnHover")),h(e,n("focusout"),a.hitch(s,"set","state",v))]},this),this._set("connectId",e)},addTarget:function(e){var i=e.id||e;-1==t.indexOf(this._connectIds,i)&&this.set("connectId",this._connectIds.concat(i))},removeTarget:function(e){var i=e.id||e,o=t.indexOf(this._connectIds,i);o>=0&&(this._connectIds.splice(o,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments),n.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var e=this.connectId;t.forEach(a.isArrayLike(e)?e:[e],this.addTarget,this)},getContent:function(t){return this.label||this.domNode.innerHTML},state:v,_setStateAttr:function(t){if(!(this.state==t||"SHOW TIMER"==t&&"SHOWING"==this.state||"HIDE TIMER"==t&&this.state==v)){switch(this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer),this._showTimer&&(this._showTimer.remove(),delete this._showTimer),t){case v:this._connectNode&&(C.hide(this._connectNode),delete this._connectNode,this.onHide());break;case"SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},this.showDelay));break;case"SHOWING":var e=this.getContent(this._connectNode);if(!e)return void this.set("state",v);C.show(e,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,a.hitch(this,"set","state","SHOWING"),a.hitch(this,"set","state","HIDE TIMER")),this.onShow(this._connectNode,this.position);break;case"HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state",v)},this.hideDelay)}this._set("state",t)}},_onHover:function(t){this._connectNode&&t!=this._connectNode&&this.set("state",v),this._connectNode=t,this.set("state","SHOW TIMER")},_onUnHover:function(t){this.set("state","HIDE TIMER")},open:function(t){this.set("state",v),this._connectNode=t,this.set("state","SHOWING")},close:function(){this.set("state",v)},onShow:function(){},onHide:function(){},destroy:function(){this.set("state",v),t.forEach(this._connections||[],function(e){t.forEach(e,function(t){t.remove()})},this),this.inherited(arguments)}});return C._MasterTooltip=b,C.show=_.showTooltip,C.hide=_.hideTooltip,C.defaultPosition=["after-centered","before-centered"],C}),t("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(t,e,i,o,n,s,r){var a;return a=t("dijit.form.ValidationTextBox",n,{templateString:r,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(t,i){i!=a.prototype[t]&&(e.deprecated("ValidationTextBox id="+this.id+", set('"+t+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",i))},_setRegExpGenAttr:function(t){this._deprecateRegExp("regExpGen",t),this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(t){this._deprecateRegExp("regExp",t)},_setValueAttr:function(){this.inherited(arguments),this._refreshState()},validator:function(t,e){return new RegExp("^(?:"+this._computeRegexp(e)+")"+(this.required?"":"?")+"$").test(t)&&(!this.required||!this._isEmpty(t))&&(this._isEmpty(t)||void 0!==this.parse(t,e))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(t){return(this.trim?/^\s*$/:/^$/).test(t)},getErrorMessage:function(){var t="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,e="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:t;return this.required&&this._isEmpty(this.textbox.value)?e:t},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(t){var e="",i=this.disabled||this.isValid(t);i&&(this._maskValidSubsetError=!0);var o=this._isEmpty(this.textbox.value),n=!i&&t&&this._isValidSubset();return this._set("state",i?"":((!this._hasBeenBlurred||t)&&o||n)&&(this._maskValidSubsetError||n&&!this._hasBeenBlurred&&t)?"Incomplete":"Error"),this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false"),"Error"==this.state?(this._maskValidSubsetError=t&&n,e=this.getErrorMessage(t)):"Incomplete"==this.state?(e=this.getPromptMessage(t),this._maskValidSubsetError=!this._hasBeenBlurred||t):o&&(e=this.getPromptMessage(t)),this.set("message",e),i},displayMessage:function(t){t&&this.focused?s.show(t,this.domNode,this.tooltipPosition,!this.isLeftToRight()):s.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused),this.inherited(arguments)},constructor:function(t){this.constraints=i.clone(this.constraints),this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments),this._refreshState()},_setConstraintsAttr:function(t){!t.locale&&this.lang&&(t.locale=this.lang),this._set("constraints",t),this._refreshState()},_setPatternAttr:function(t){this._set("pattern",t),this._refreshState()},_computeRegexp:function(t){var e=this.pattern;if("function"==typeof e&&(e=e.call(this,t)),e!=this._lastRegExp){var i="";this._lastRegExp=e,".*"!=e&&e.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(t){switch(t.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":i+=t;break;case")":i+="|$)";break;default:i+="(?:"+t+"|$)"}});try{"".search(i)}catch(t){i=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+i+")$"}return e},postMixInProperties:function(){this.inherited(arguments),this.messages=o.getLocalization("dijit.form","validate",this.lang),this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(t){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(t){this._set("required",t),this.focusNode.setAttribute("aria-required",t),this._refreshState()},_setMessageAttr:function(t){this._set("message",t),this.displayMessage(t)},reset:function(){this._maskValidSubsetError=!0,this.inherited(arguments)},_onBlur:function(){this.displayMessage(""),this.inherited(arguments)},destroy:function(){s.hide(this.domNode),this.inherited(arguments)}})}),t("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(t,e,i,o){return t("dijit.form.MappedTextBox",o,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(t){return t.toString?t.toString():""},toString:function(){var t=this.filter(this.get("value"));return null!=t?"string"==typeof t?t:this.serialize(t,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=i.place("<input type='hidden'"+(this.name&&!e("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})}),t("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(t,e,i,o,n,s){function r(t){return{id:t.value,value:t.value,name:i.trim(t.innerText||t.textContent||"")}}return t("dijit.form.DataList",n,{constructor:function(t,n){this.domNode=e.byId(n),i.mixin(this,t),this.id&&s.add(this),this.domNode.style.display="none",this.inherited(arguments,[{data:o("option",this.domNode).map(r)}])},destroy:function(){s.remove(this.id)},fetchSelectedItem:function(){var t=o("> option[selected]",this.domNode)[0]||o("> option",this.domNode)[0];return t&&r(t)}})}),t("dijit/form/_SearchMixin",["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(t,e,i,o,n,s,r){return t("dijit.form._SearchMixin",null,{pageSize:1/0,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(t){this._set("list",t)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(t){return new RegExp("^"+t.replace(/(\\.)|(\*)|(\?)|\W/g,function(t,e,i,o){return i?".*":o?".":e||"\\"+t})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove()),this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove()),this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(t){if(!this.disabled&&!this.readOnly){var i=t.charOrCode;if(!("type"in t&&"key"==t.type.substring(0,3)&&(t.altKey||(t.ctrlKey||t.metaKey)&&"x"!=i&&"v"!=i||i==e.SHIFT))){var o=!1;switch(this._prev_key_backspace=!1,i){case e.DELETE:case e.BACKSPACE:this._prev_key_backspace=!0,this._maskValidSubsetError=!0,o=!0;break;default:o="string"==typeof i||229==i}o&&(this.store?this.searchTimer=this.defer("_startSearchFromInput",1):this.onSearch())}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(t){this._abortQuery();var e,o=this,r=i.clone(this.query),a={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},d=n.substitute(this.queryExpr,[t.replace(/([\\\*\?])/g,"\\$1")]),h=function(){var t=o._fetchHandle=o.store.query(r,a);o.disabled||o.readOnly||e!==o._lastQuery||s(t,function(i){o._fetchHandle=null,o.disabled||o.readOnly||e!==o._lastQuery||s(t.total,function(t){i.total=t;var e=o.pageSize;(isNaN(e)||e>i.total)&&(e=i.total),i.nextPage=function(t){a.direction=t=!1!==t,a.count=e,t?(a.start+=i.length,a.start>=i.total&&(a.count=0)):(a.start-=e,a.start<0&&(a.count=Math.max(e+a.start,0),a.start=0)),a.count<=0?(i.length=0,o.onSearch(i,r,a)):h()},o.onSearch(i,r,a)})},function(t){o._fetchHandle=null,o._cancelingQuery||console.error(o.declaredClass+" "+t.toString())})};i.mixin(a,this.fetchProperties),this.store._oldAPI?e=d:(e=this._patternToRegExp(d)).toString=function(){return d},this._lastQuery=r[this.searchAttr]=e,this._queryDeferHandle=this.defer(h,this.searchDelay)},constructor:function(){this.query={},this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var t=this.list;t&&(this.store=r.byId(t))}this.inherited(arguments)}})}),t("dijit/form/_AutoCompleterMixin",["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin","./_SearchMixin"],function(t,e,i,o,n,s,r,a,d,h,l){var c=e("dijit.form._AutoCompleterMixin",l,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(t){var e=0;if("number"==typeof t.selectionStart)e=t.selectionStart;else if(a("ie")){var i=t.ownerDocument.selection.createRange().duplicate(),o=t.createTextRange();i.move("character",0),o.move("character",0);try{o.setEndPoint("EndToEnd",i),e=String(o.text).replace(/\r/g,"").length}catch(t){}}return e},_setCaretPos:function(t,e){e=parseInt(e),h.selectInputText(t,e,e)},_setDisabledAttr:function(t){this.inherited(arguments),this.domNode.setAttribute("aria-disabled",t?"true":"false")},_onKey:function(t){if(!(t.charCode>=32)){var e=t.charCode||t.keyCode;if(e!=o.ALT&&e!=o.CTRL&&e!=o.META&&e!=o.SHIFT){var i=this.dropDown,n=null;if(this._abortQuery(),this.inherited(arguments),!(t.altKey||t.ctrlKey||t.metaKey))switch(this._opened&&(n=i.getHighlightedOption()),e){case o.PAGE_DOWN:case o.DOWN_ARROW:case o.PAGE_UP:case o.UP_ARROW:this._opened&&this._announceOption(n),t.stopPropagation(),t.preventDefault();break;case o.ENTER:if(n){if(n==i.nextButton){this._nextSearch(1),t.stopPropagation(),t.preventDefault();break}if(n==i.previousButton){this._nextSearch(-1),t.stopPropagation(),t.preventDefault();break}t.stopPropagation(),t.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case o.TAB:var s=this.get("displayedValue");if(i&&(s==i._messages.previousMessage||s==i._messages.nextMessage))break;n&&this._selectOption(n);case o.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(t){var e=this.focusNode;h.selectInputText(e,e.value.length);var i=this.ignoreCase?"toLowerCase":"substr";if(0==t[i](0).indexOf(this.focusNode.value[i](0))){var o=this.autoComplete?this._getCaretPos(e):e.value.length;o+1>e.value.length&&(e.value=t,h.selectInputText(e,o))}else e.value=t,h.selectInputText(e)},_openResultList:function(t,e,i){var o=this.dropDown.getHighlightedOption();this.dropDown.clearResultList(),t.length||0!=i.start?(this._nextSearch=this.dropDown.onPage=n.hitch(this,function(e){t.nextPage(-1!==e),this.focus()}),this.dropDown.createOptions(t,i,n.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in i?(i.direction?this.dropDown.highlightFirstOption():i.direction||this.dropDown.highlightLastOption(),o&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(e[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0),this.openDropDown(),this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery(),this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var t=this.get("displayedValue"),e=this.dropDown;!e||t!=e._messages.previousMessage&&t!=e._messages.nextMessage?void 0===this.item?(this.item=null,this.set("displayedValue",t)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0),this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(t,e,i){var o="";t&&(i||(i=this.store._oldAPI?this.store.getValue(t,this.searchAttr):t[this.searchAttr]),o=this._getValueField()!=this.searchAttr?this.store.getIdentity(t):i),this.set("value",o,e,i,t)},_announceOption:function(t){if(t){var e;if(t==this.dropDown.nextButton||t==this.dropDown.previousButton)e=t.innerHTML,this.item=void 0,this.value="";else{var o=this.dropDown.items[t.getAttribute("item")];e=(this.store._oldAPI?this.store.getValue(o,this.searchAttr):o[this.searchAttr]).toString(),this.set("item",o,!1,e)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length),this.focusNode.setAttribute("aria-activedescendant",i.get(t,"id")),this._autoCompleteText(e)}},_selectOption:function(t){this.closeDropDown(),t&&this._announceOption(t),this._setCaretPos(this.focusNode,this.focusNode.value.length),this._handleOnChange(this.value,!0),this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0,this.inherited(arguments)},_startSearch:function(t){if(!this.dropDown){var e=this.id+"_popup",i=n.isString(this.dropDownClass)?n.getObject(this.dropDownClass,!1):this.dropDownClass;this.dropDown=new i({onChange:n.hitch(this,this._selectOption),id:e,dir:this.dir,textDir:this.textDir})}this._lastInput=t,this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){if(this.inherited(arguments),!this.store&&this.srcNodeRef){var t=this.srcNodeRef;if(this.store=new d({},t),!("value"in this.params)){var e=this.item=this.store.fetchSelectedItem();if(e){var i=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(e,i):e[i]}}}},postCreate:function(){var e=s('label[for="'+this.id+'"]');e.length&&(e[0].id||(e[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",e[0].id)),this.inherited(arguments),t.after(this,"onSearch",n.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(t){var e=this.labelFunc(t,this.store),i=this.labelType;return"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(e=this.doHighlight(e,this._lastInput),i="html"),{html:"html"==i,label:e}},doHighlight:function(t,e){var i=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),o=this.queryExpr.indexOf("${0}");return e=r.escapeString(e),this._escapeHtml(t.replace(new RegExp((0==o?"^":"")+"("+e+")"+(o==this.queryExpr.length-4?"$":""),i),"￿$1￿")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(t){return t=String(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null,this.inherited(arguments)},labelFunc:function(t,e){return(e._oldAPI?e.getValue(t,this.labelAttr||this.searchAttr):t[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(t,e,i,o){this._set("item",o||null),null==t&&(t=""),this.inherited(arguments)}});return a("dojo-bidi")&&c.extend({_setTextDirAttr:function(t){this.inherited(arguments),this.dropDown&&this.dropDown._set("textDir",t)}}),c}),t("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(t,e,i,o,n){var s=e("dijit.form._ComboBoxMenuMixin"+(o("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments),this._messages=n.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments),this.previousButton.innerHTML=this._messages.previousMessage,this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(t){this._set("value",t),this.onChange(t)},onClick:function(t){t==this.previousButton?(this._setSelectedAttr(null),this.onPage(-1)):t==this.nextButton?(this._setSelectedAttr(null),this.onPage(1)):this.onChange(t)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(t,e){var i=this._createMenuItem(),o=e(t);return o.html?i.innerHTML=o.label:i.appendChild(i.ownerDocument.createTextNode(o.label)),""==i.innerHTML&&(i.innerHTML="&#160;"),i},createOptions:function(e,o,n){this.items=e,this.previousButton.style.display=0==o.start?"none":"",i.set(this.previousButton,"id",this.id+"_prev"),t.forEach(e,function(t,e){var o=this._createOption(t,n);o.setAttribute("item",e),i.set(o,"id",this.id+e),this.nextButton.parentNode.insertBefore(o,this.nextButton)},this);var s=!1;e.total&&!e.total.then&&-1!=e.total?o.start+o.count<e.total?s=!0:o.start+o.count>e.total&&o.count==e.length&&(s=!0):o.count==e.length&&(s=!0),this.nextButton.style.display=s?"":"none",i.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var t=this.containerNode;t.childNodes.length>2;)t.removeChild(t.childNodes[t.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments),this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});return o("dojo-bidi")&&(s=e("dijit.form._ComboBoxMenuMixin",s,{_createOption:function(){var t=this.inherited(arguments);return this.applyTextDir(t),t}})),s}),t("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(t,e,i){return t("dijit.form._ListBase",null,{selected:null,_listConnect:function(t,i){var o=this;return o.own(e(o.containerNode,e.selector(function(t,e,i){return t.parentNode==i},t),function(t){o[i](t,this)}))},selectFirstNode:function(){for(var t=this.containerNode.firstChild;t&&"none"==t.style.display;)t=t.nextSibling;this._setSelectedAttr(t,!0)},selectLastNode:function(){for(var t=this.containerNode.lastChild;t&&"none"==t.style.display;)t=t.previousSibling;this._setSelectedAttr(t,!0)},selectNextNode:function(){var t=this.selected;if(t){for(var e=t.nextSibling;e&&"none"==e.style.display;)e=e.nextSibling;e?this._setSelectedAttr(e,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var t=this.selected;if(t){for(var e=t.previousSibling;e&&"none"==e.style.display;)e=e.previousSibling;e?this._setSelectedAttr(e,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(t,e){if(this.selected!=t){var o=this.selected;o&&this.onDeselect(o),t&&(e&&i.scrollIntoView(t),this.onSelect(t)),this._set("selected",t)}else t&&this.onSelect(t)}})}),t("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(t,e,i,o){return t("dijit.form._ListMouseMixin",o,{postCreate:function(){this.inherited(arguments),this.domNode.dojoClick=!0,this._listConnect("click","_onClick"),this._listConnect("mousedown","_onMouseDown"),this._listConnect("mouseup","_onMouseUp"),this._listConnect("mouseover","_onMouseOver"),this._listConnect("mouseout","_onMouseOut")},_onClick:function(t,e){this._setSelectedAttr(e,!1),this._deferredClick&&this._deferredClick.remove(),this._deferredClick=this.defer(function(){this._deferredClick=null,this.onClick(e)})},_onMouseDown:function(t,e){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging=!0,this._setSelectedAttr(e,!1)},_onMouseUp:function(t,e){this._isDragging=!1;var i=this.selected,o=this._hoveredNode;i&&e==i?this.defer(function(){this._onClick(t,i)}):o&&this.defer(function(){this._onClick(t,o)})},_onMouseOut:function(t,e){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null),this._isDragging&&(this._cancelDrag=(new Date).getTime()+1e3)},_onMouseOver:function(t,e){if(this._cancelDrag){var i=(new Date).getTime();i>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null}this._hoveredNode=e,this.onHover(e),this._isDragging&&this._setSelectedAttr(e,!1)}})}),t("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(t,e,i,o,n,s,r,a){return t("dijit.form._ComboBoxMenu",[n,s,a,r],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments),this.isLeftToRight()||(e.add(this.previousButton,"dijitMenuItemRtl"),e.add(this.nextButton,"dijitMenuItemRtl")),this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var t=this.ownerDocument.createElement("div");return t.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),t.setAttribute("role","option"),t},onHover:function(t){e.add(t,"dijitMenuItemHover")},onUnhover:function(t){e.remove(t,"dijitMenuItemHover")},onSelect:function(t){e.add(t,"dijitMenuItemSelected")},onDeselect:function(t){e.remove(t,"dijitMenuItemSelected")},_page:function(t){var e=0,o=this.domNode.scrollTop,n=i.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();e<n;){var s=this.getHighlightedOption();if(t){if(!s.previousSibling||"none"==s.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!s.nextSibling||"none"==s.nextSibling.style.display)break;this.selectNextNode()}var r=this.domNode.scrollTop;e+=(r-o)*(t?-1:1),o=r}},handleKey:function(t){switch(t.keyCode){case o.DOWN_ARROW:return this.selectNextNode(),!1;case o.PAGE_DOWN:return this._page(!1),!1;case o.UP_ARROW:return this.selectPreviousNode(),!1;case o.PAGE_UP:return this._page(!0),!1;default:return!0}}})}),t("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){return t("dijit._HasDropDown",m,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(t){this.disabled||this.readOnly||("MSPointerDown"!=t.type&&"pointerdown"!=t.type&&t.preventDefault(),this.own(l.once(this.ownerDocument,c.release,h.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(t){var e=this.dropDown,i=!1;if(t&&this._opened){var o=s.position(this._buttonNode,!0);if(!(t.pageX>=o.x&&t.pageX<=o.x+o.w&&t.pageY>=o.y&&t.pageY<=o.y+o.h)){for(var r=t.target;r&&!i;)n.contains(r,"dijitPopup")?i=!0:r=r.parentNode;if(i){if(r=t.target,e.onItemClick){for(var a;r&&!(a=u.byNode(r));)r=r.parentNode;a&&a.onClick&&a.getParent&&a.getParent().onItemClick(a,t)}return}}}this._opened?e.focus&&(!1!==e.autoFocus||"mouseup"==t.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){e.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(t){this._stopClickEvents&&(t.stopPropagation(),t.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var t={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";n.add(this._arrowWrapperNode||this._buttonNode,"dijit"+t+"ArrowButton")},postCreate:function(){this.inherited(arguments);var t=this.focusNode||this.domNode;this.own(l(this._buttonNode,c.press,h.hitch(this,"_onDropDownMouseDown")),l(this._buttonNode,"click",h.hitch(this,"_onDropDownClick")),l(t,"keydown",h.hitch(this,"_onKey")),l(t,"keyup",h.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0),this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(t){if(!this.disabled&&!this.readOnly){var e=this.dropDown,i=t.target;if(e&&this._opened&&e.handleKey&&!1===e.handleKey(t))return t.stopPropagation(),void t.preventDefault();e&&this._opened&&t.keyCode==d.ESCAPE?(this.closeDropDown(),t.stopPropagation(),t.preventDefault()):!this._opened&&(t.keyCode==d.DOWN_ARROW||(t.keyCode==d.ENTER||t.keyCode==d.SPACE&&(!this._searchTimer||t.ctrlKey||t.altKey||t.metaKey))&&("input"!==(i.tagName||"").toLowerCase()||i.type&&"text"!==i.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,t.stopPropagation(),t.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var t=this.dropDown;t&&t.focus&&this.defer(h.hitch(t,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(t){t()},loadAndOpenDropDown:function(){var t=new e,i=h.hitch(this,function(){this.openDropDown(),t.resolve(this.dropDown)});return this.isLoaded()?i():this.loadDropDown(i),t},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var t=this.dropDown,e=t.domNode,i=this._aroundNode||this.domNode,r=this,a=p.open({parent:this,popup:t,around:i,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){r.closeDropDown(!0)},onCancel:function(){r.closeDropDown(!0)},onClose:function(){o.set(r._popupStateNode,"popupActive",!1),n.remove(r._popupStateNode,"dijitHasDropDownOpen"),r._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&i.offsetWidth>t._popupWrapper.offsetWidth){var d=i.offsetWidth-t._popupWrapper.offsetWidth,l={w:t.domNode.offsetWidth+d};h.isFunction(t.resize)?t.resize(l):s.setMarginBox(e,l),"R"==a.corner[1]&&(t._popupWrapper.style.left=t._popupWrapper.style.left.replace("px","")-d+"px")}return o.set(this._popupStateNode,"popupActive","true"),n.add(this._popupStateNode,"dijitHasDropDownOpen"),this._set("_opened",!0),this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",t.id),"presentation"===e.getAttribute("role")||e.getAttribute("aria-labelledby")||e.setAttribute("aria-labelledby",this.id),a},closeDropDown:function(t){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),t&&this.focus&&this.focus(),p.close(this.dropDown),this._opened=!1)}})}),t("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(t,i,o,n,s,r,a,d,h){return t("dijit.form.ComboBoxMixin",[d,r],{dropDownClass:a,hasDownArrow:!0,templateString:h,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(t){this._set("hasDownArrow",t),this._buttonNode.style.display=t?"":"none"},_showResultList:function(){this.displayMessage(""),this.inherited(arguments)},_setStoreAttr:function(t){t.get||n.mixin(t,{_oldAPI:!0,get:function(t){var e=new i;return this.fetchItemByIdentity({identity:t,onItem:function(t){e.resolve(t)},onError:function(t){e.reject(t)}}),e.promise},query:function(t,e){var o=new i(function(){r.abort&&r.abort()});o.total=new i;var r=this.fetch(n.mixin({query:t,onBegin:function(t){o.total.resolve(t)},onComplete:function(t){o.resolve(t)},onError:function(t){o.reject(t)}},e));return s(o)}}),this._set("store",t)},postMixInProperties:function(){var t=this.params.store||this.store;if(t&&this._setStoreAttr(t),this.inherited(arguments),!this.params.store&&this.store&&!this.store._oldAPI){var i=this.declaredClass;n.mixin(this.store,{getValue:function(t,e){return o.deprecated(i+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0"),t[e]},getLabel:function(t){return o.deprecated(i+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0"),t.name},fetch:function(t){o.deprecated(i+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");e(["dojo/data/ObjectStore"],n.hitch(this,function(e){new e({objectStore:this}).fetch(t)}))}})}},buildRendering:function(){this.inherited(arguments),this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})}),t("dijit/form/FilteringSelect",["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(t,e,i,o,n){return t("dijit.form.FilteringSelect",[o,n],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(t,e,i,o){e&&e[this.searchAttr]!==this._lastQuery||!e&&t.length&&this.store.getIdentity(t[0])!=this._lastQuery||(t.length?this.set("item",t[0],o):this.set("value","",o||void 0===o&&!this.focused,this.textbox.value,null))},_openResultList:function(t,e,i){e[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(t,o,n,s){if(this._onChangeActive||(o=null),void 0===s){if((null===t||""===t)&&(t="",!e.isString(n)))return void this._setDisplayedValueAttr(n||"",o);var r=this;this._lastQuery=t,i(this.store.get(t),function(t){r._callbackSetLabel(t?[t]:[],void 0,void 0,o)})}else this.valueNode.value=t,this.inherited(arguments,[t,o,n,s])},_setItemAttr:function(t,e,i){this.inherited(arguments),this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(t){return t.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(t,o){if(null==t&&(t=""),!this._created){if(!("displayedValue"in this.params))return;o=!1}if(this.store){this.closeDropDown();var n,s=e.clone(this.query),r=this._getDisplayQueryString(t);this.store._oldAPI?n=r:(n=this._patternToRegExp(r)).toString=function(){return r},this._lastQuery=s[this.searchAttr]=n,this.textbox.value=t,this._lastDisplayedValue=t,this._set("displayedValue",t);var a=this,d={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};e.mixin(d,this.fetchProperties),this._fetchHandle=this.store.query(s,d),i(this._fetchHandle,function(t){a._fetchHandle=null,a._callbackSetLabel(t||[],s,d,o)},function(t){a._fetchHandle=null,a._cancelingQuery||console.error("dijit.form.FilteringSelect: "+t.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})}),t("dijit/_editor/plugins/FontChoice",["require","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/i18n","dojo/_base/lang","dojo/store/Memory","../../registry","../../_Widget","../../_TemplatedMixin","../../_WidgetsInTemplateMixin","../../form/FilteringSelect","../_Plugin","../range","dojo/i18n!../nls/FontChoice"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f){var p=i("dijit._editor.plugins._FontDropDown",[d,h,l],{label:"",plainText:!1,templateString:"<span style='white-space: nowrap' class='dijit dijitReset dijitInline'><label class='dijitLeft dijitInline' for='${selectId}'>${label}</label><input data-dojo-type='../../form/FilteringSelect' required='false' data-dojo-props='labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class='${comboClass}' tabIndex='-1' id='${selectId}' data-dojo-attach-point='select' value=''/></span>",contextRequire:t,postMixInProperties:function(){this.inherited(arguments),this.strings=n.getLocalization("dijit._editor","FontChoice"),this.label=this.strings[this.command],this.id=a.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.selectId=this.id+"_select",this.inherited(arguments)},postCreate:function(){this.select.set("store",new r({idProperty:"value",data:e.map(this.values,function(t){var e=this.strings[t]||t;return{label:this.getLabel(t,e),name:e,value:t}},this)})),this.select.set("value","",!1),this.disabled=this.select.get("disabled")},_setValueAttr:function(t,i){i=!1!==i,this.select.set("value",e.indexOf(this.values,t)<0?"":t,i),i||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(t){this._set("disabled",t),this.select.set("disabled",t)}}),m=i("dijit._editor.plugins._FontNameDropDown",p,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]),this.inherited(arguments)},getLabel:function(t,e){return this.plainText?e:"<div style='font-family: "+t+"'>"+e+"</div>"},_setValueAttr:function(t,e){if(e=!1!==e,this.generic){t={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[t]||t}this.inherited(arguments,[t,e])}}),g=i("dijit._editor.plugins._FontSizeDropDown",p,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(t,e){return this.plainText?e:"<font size="+t+"'>"+e+"</font>"},_setValueAttr:function(t,e){if(e=!1!==e,t.indexOf&&-1!=t.indexOf("px")){var i=parseInt(t,10);t={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[i]||t}this.inherited(arguments,[t,e])}}),_=i("dijit._editor.plugins._FormatBlockDropDown",p,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments),this.set("value","noFormat",!1)},getLabel:function(t,e){return this.plainText||"noFormat"==t?e:"<"+t+">"+e+"</"+t+">"},_execCommand:function(t,i,o){if("noFormat"===o){var n,r,a=f.getSelection(t.window);if(a&&a.rangeCount>0){var d,h,l=a.getRangeAt(0);if(l){for(n=l.startContainer,r=l.endContainer;n&&n!==t.editNode&&n!==t.document.body&&1!==n.nodeType;)n=n.parentNode;for(;r&&r!==t.editNode&&r!==t.document.body&&1!==r.nodeType;)r=r.parentNode;var c=s.hitch(this,function(i,o){var n;if(i.childNodes&&i.childNodes.length)for(n=0;n<i.childNodes.length;n++){var s=i.childNodes[n];if(1==s.nodeType&&t.selection.inSelection(s)){var r=s.tagName?s.tagName.toLowerCase():"";-1!==e.indexOf(this.values,r)&&o.push(s),c(s,o)}}}),u=s.hitch(this,function(e){if(e&&e.length){for(t.beginEditing();e.length;)this._removeFormat(t,e.pop());t.endEditing()}}),p=[];if(n==r){var m;for(d=n;d&&d!==t.editNode&&d!==t.document.body;){if(1==d.nodeType&&(h=d.tagName?d.tagName.toLowerCase():"",-1!==e.indexOf(this.values,h))){m=d;break}d=d.parentNode}c(n,p),m&&(p=[m].concat(p)),u(p)}else{for(d=n;t.selection.inSelection(d);)1==d.nodeType&&(h=d.tagName?d.tagName.toLowerCase():"",-1!==e.indexOf(this.values,h)&&p.push(d),c(d,p)),d=d.nextSibling;u(p)}t.onDisplayChanged()}}}else t.execCommand(i,o)},_removeFormat:function(t,e){if(t.customUndo){for(;e.firstChild;)o.place(e.firstChild,e,"before");e.parentNode.removeChild(e)}else{t.selection.selectElementChildren(e);var i=t.selection.getSelectedHtml();t.selection.selectElement(e),t.execCommand("inserthtml",i||"")}}}),b=i("dijit._editor.plugins.FontChoice",u,{useDefaultCommand:!1,_initButton:function(){var t={fontName:m,fontSize:g,formatBlock:_}[this.command],e=this.params;this.params.custom&&(e.values=this.params.custom);var i=this.editor;this.button=new t(s.delegate({dir:i.dir,lang:i.lang},e)),this.own(this.button.select.on("change",s.hitch(this,function(t){this.editor.focused&&this.editor.focus(),"fontName"==this.command&&-1!=t.indexOf(" ")&&(t="'"+t+"'"),this.button._execCommand?this.button._execCommand(this.editor,this.command,t):this.editor.execCommand(this.command,t)})))},updateState:function(){var t=this.editor,i=this.command;if(t&&t.isLoaded&&i.length&&this.button){var o,n=this.get("disabled");if(this.button.set("disabled",n),n)return;try{o=t.queryCommandValue(i)||""}catch(t){o=""}var r=s.isString(o)&&(o.match(/'([^']*)'/)||o.match(/"([^"]*)"/));if(r&&(o=r[1]),"formatBlock"===i)if(o&&"p"!=o)e.indexOf(this.button.values,o)<0&&(o="noFormat");else{var a;o=null;var d=f.getSelection(this.editor.window);if(d&&d.rangeCount>0){var h=d.getRangeAt(0);h&&(a=h.endContainer)}for(;a&&a!==t.editNode&&a!==t.document;){var l=a.tagName?a.tagName.toLowerCase():"";if(l&&e.indexOf(this.button.values,l)>-1){o=l;break}a=a.parentNode}o||(o="noFormat")}o!==this.button.get("value")&&this.button.set("value",o,!1)}}});return e.forEach(["fontName","fontSize","formatBlock"],function(t){u.registry[t]=function(e){return new b({command:t,plainText:e.plainText})}}),b._FontDropDown=p,b._FontNameDropDown=m,b._FontSizeDropDown=g,b._FormatBlockDropDown=_,b}),t("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(t,e,i,o,n,s,r,a,d){return t("dijit.form.DropDownButton",[s,r,a],{baseClass:"dijitDropDownButton",templateString:d,_fillContent:function(){if(this.srcNodeRef){var t=i("*",this.srcNodeRef);this.inherited(arguments,[t[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var t=i("[widgetId]",this.dropDownContainer)[0];t&&(this.dropDown=o.byNode(t)),delete this.dropDownContainer}this.dropDown&&n.hide(this.dropDown),this.inherited(arguments)}},isLoaded:function(){var t=this.dropDown;return!!t&&(!t.href||t.isLoaded)},loadDropDown:function(t){var i=this.dropDown,o=i.on("load",e.hitch(this,function(){o.remove(),t()}));i.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})}),t("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/query","dojo/string","../_Plugin","../../form/DropDownButton","../range"],function(t,e,i,o,n,s,r,a,d,h,l,c){var u=e("dijit._editor.plugins.LinkDialog",h,{buttonClass:l,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:'<a href="${urlInput}" _djrealurl="${urlInput}" target="${targetSelect}">${textInput}</a>',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments),this.button.loadDropDown=n.hitch(this,"_loadDropDown"),this._connectTagEvents()},_loadDropDown:function(e){t(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],n.hitch(this,function(t,i,r){var a=this;this.tag="insertImage"==this.command?"img":"a";var h=n.delegate(t.getLocalization("dijit","common",this.lang),t.getLocalization("dijit._editor","LinkDialog",this.lang)),l=this.dropDown=this.button.dropDown=new i({title:h[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:n.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog(),i.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(n.hitch(a,"_onCloseDialog"),0)}});h.urlRegExp=this.urlRegExp,h.id=r.getUniqueId(this.editor.id),this._uniqueId=h.id,this._setContent(l.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+d.substitute(this.linkDialogTemplate,h)),l.startup(),this._urlInput=r.byId(this._uniqueId+"_urlInput"),this._textInput=r.byId(this._uniqueId+"_textInput"),this._setButton=r.byId(this._uniqueId+"_setButton"),this.own(r.byId(this._uniqueId+"_cancelButton").on("click",n.hitch(this.dropDown,"onCancel"))),this._urlInput&&this.own(this._urlInput.on("change",n.hitch(this,"_checkAndFixInput"))),this._textInput&&this.own(this._textInput.on("change",n.hitch(this,"_checkAndFixInput"))),this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i"),this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i"),this._urlInput.isValid=n.hitch(this,function(){var t=this._urlInput.get("value");return this._urlRegExp.test(t)||this._emailRegExp.test(t)}),this.own(s(l.domNode,"keydown",n.hitch(this,n.hitch(this,function(t){!t||t.keyCode!=o.ENTER||t.shiftKey||t.metaKey||t.ctrlKey||t.altKey||this._setButton.get("disabled")||(l.onExecute(),l.execute(l.get("value")))})))),e()}))},_checkAndFixInput:function(){var t=this,e=this._urlInput.get("value");this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null),this._delayedCheck=setTimeout(function(){!function(e){var i=!1,o=!1;e&&e.length>1&&0!==(e=n.trim(e)).indexOf("mailto:")&&(e.indexOf("/")>0?-1===e.indexOf("://")&&"/"!==e.charAt(0)&&e.indexOf("./")&&0!==e.indexOf("../")&&t._hostRxp.test(e)&&(i=!0):t._userAtRxp.test(e)&&(o=!0));i&&t._urlInput.set("value","http://"+e);o&&t._urlInput.set("value","mailto:"+e);t._setButton.set("disabled",!t._isValid())}(e)},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(n.hitch(this,function(){this.own(s(this.editor.editNode,"dblclick",n.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(t){this.dropDown.set({parserScope:"dojo",content:t})},_checkValues:function(t){return t&&t.urlInput&&(t.urlInput=t.urlInput.replace(/"/g,"&quot;")),t},setValue:function(t){if(this._onCloseDialog(),r("ie")<9){var e=c.getSelection(this.editor.window),o=e.getRangeAt(0),n=o.endContainer;3===n.nodeType&&(n=n.parentNode),n&&n.nodeName&&n.nodeName.toLowerCase()!==this.tag&&(n=this.editor.selection.getSelectedElement(this.tag)),n&&n.nodeName&&n.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(n),this.editor.execCommand("unlink"))}t=this._checkValues(t),this.editor.execCommand("inserthtml",d.substitute(this.htmlTemplate,t)),a("a",this.editor.document).forEach(function(t){t.innerHTML||i.has(t,"name")||t.parentNode.removeChild(t)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(t){var e,i,o;return t&&t.tagName.toLowerCase()===this.tag?(e=t.getAttribute("_djrealurl")||t.getAttribute("href"),o=t.getAttribute("target")||"_self",i=t.textContent||t.innerText,this.editor.selection.selectElement(t,!0)):i=this.editor.selection.getSelectedText(),{urlInput:e||"",textInput:i||"",targetSelect:o||""}},_onOpenDialog:function(){var t,e,i;if(r("ie")){var o=c.getSelection(this.editor.window);if(o.rangeCount){var n=o.getRangeAt(0);3===(t=n.endContainer).nodeType&&(t=t.parentNode),t&&t.nodeName&&t.nodeName.toLowerCase()!==this.tag&&(t=this.editor.selection.getSelectedElement(this.tag)),(!t||t.nodeName&&t.nodeName.toLowerCase()!==this.tag)&&((e=this.editor.selection.getAncestorElement(this.tag))&&e.nodeName&&e.nodeName.toLowerCase()==this.tag?(t=e,this.editor.selection.selectElement(t)):n.startContainer===n.endContainer&&(i=n.startContainer.firstChild)&&i.nodeName&&i.nodeName.toLowerCase()==this.tag&&(t=i,this.editor.selection.selectElement(t)))}}else t=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset(),this._setButton.set("disabled",!0),this.dropDown.set("value",this._getCurrentValues(t))},_onDblClick:function(t){if(t&&t.target){var e=t.target,o=e.tagName?e.tagName.toLowerCase():"";if(o===this.tag&&i.get(e,"href")){var n=this.editor;this.editor.selection.selectElement(e),n.onDisplayChanged(),n._updateTimer&&(n._updateTimer.remove(),delete n._updateTimer),n.onNormalizedDisplayChanged();var s=this.button;setTimeout(function(){s.set("disabled",!1),s.loadAndOpenDropDown().then(function(){s.dropDown.focus&&s.dropDown.focus()})},10)}}}}),f=e("dijit._editor.plugins.ImgLinkDialog",[u],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:'<img src="${urlInput}" _djrealurl="${urlInput}" alt="${textInput}" />',tag:"img",_getCurrentValues:function(t){var e,i;return t&&t.tagName.toLowerCase()===this.tag?(e=t.getAttribute("_djrealurl")||t.getAttribute("src"),i=t.getAttribute("alt"),this.editor.selection.selectElement(t,!0)):i=this.editor.selection.getSelectedText(),{urlInput:e||"",textInput:i||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments),this.editor.onLoadDeferred.then(n.hitch(this,function(){this.own(s(this.editor.editNode,"mousedown",n.hitch(this,"_selectTag")))}))},_selectTag:function(t){if(t&&t.target){var e=t.target,i=e.tagName?e.tagName.toLowerCase():"";i===this.tag&&this.editor.selection.selectElement(e)}},_checkValues:function(t){return t&&t.urlInput&&(t.urlInput=t.urlInput.replace(/"/g,"&quot;")),t&&t.textInput&&(t.textInput=t.textInput.replace(/"/g,"&quot;")),t},_onDblClick:function(t){if(t&&t.target){var e=t.target,o=e.tagName?e.tagName.toLowerCase():"";if(o===this.tag&&i.get(e,"src")){var n=this.editor;this.editor.selection.selectElement(e),n.onDisplayChanged(),n._updateTimer&&(n._updateTimer.remove(),delete n._updateTimer),n.onNormalizedDisplayChanged();var s=this.button;setTimeout(function(){s.set("disabled",!1),s.loadAndOpenDropDown().then(function(){s.dropDown.focus&&s.dropDown.focus()})},10)}}}});return h.registry.createLink=function(){return new u({command:"createLink"})},h.registry.insertImage=function(){return new f({command:"insertImage"})},u.ImgLinkDialog=f,u}),t("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p){return e("dijit._MenuBase",[c,p,f,u],{selected:null,_setSelectedAttr:function(t){this.selected!=t&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),t&&t._setSelected(!0),this._set("selected",t))},activated:!1,_setActivatedAttr:function(t){n.toggle(this.domNode,"dijitMenuActive",t),n.toggle(this.domNode,"dijitMenuPassive",!t),this._set("activated",t)},parentMenu:null,popupDelay:500,passivePopupDelay:1/0,autoFocus:!1,childSelector:function(t){var e=l.byNode(t);return t.parentNode==this.containerNode&&e&&e.focus},postCreate:function(){var t=this,e="string"==typeof this.childSelector?this.childSelector:s.hitch(this,"childSelector");this.own(a(this.containerNode,a.selector(e,r.enter),function(){t.onItemHover(l.byNode(this))}),a(this.containerNode,a.selector(e,r.leave),function(){t.onItemUnhover(l.byNode(this))}),a(this.containerNode,a.selector(e,h),function(e){t.onItemClick(l.byNode(this),e),e.stopPropagation()}),a(this.containerNode,a.selector(e,"focusin"),function(){t._onItemFocus(l.byNode(this))})),this.inherited(arguments)},onKeyboardSearch:function(t,e,i,o){this.inherited(arguments),t&&(-1==o||t.popup&&1==o)&&this.onItemClick(t,e)},_keyboardSearchCompare:function(t,e){return t.shortcutKey?e==t.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(t){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,t);else{var e=this._getTopMenu();e&&e._isMenuBar&&e.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem),this._stopPendingCloseTimer()},onItemHover:function(t){this.activated?(this.set("selected",t),!t.popup||t.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(t)},this.popupDelay))):this.passivePopupDelay<1/0&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(t,{type:"click"})},this.passivePopupDelay)),this._hoveredChild=t,t._set("hovering",!0)},_onChildDeselect:function(t){this._stopPopupTimer(),this.currentPopupItem==t&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null,this.currentPopupItem=null,t._closePopup()},this.popupDelay))},onItemUnhover:function(t){this._hoveredChild==t&&(this._hoveredChild=null),this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null),t._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var t=this;t.parentMenu;t=t.parentMenu);return t},onItemClick:function(t,e){if(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.focusChild(t),t.disabled)return!1;if(t.popup){this.set("selected",t),this.set("activated",!0);var i=/^key/.test(e._origType||e.type)||0==e.clientX&&0==e.clientY;this._openItemPopup(t,i)}else this.onExecute(),t._onClick?t._onClick(e):t.onClick(e)},_openItemPopup:function(t,e){if(t!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup()),this._stopPopupTimer();var i=t.popup;i.parentMenu=this,this.own(this._mouseoverHandle=a.once(i.domNode,"mouseover",s.hitch(this,"_onPopupHover")));var o=this;t._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){e&&o.focusChild(t),o._cleanUp()},onExecute:s.hitch(this,"_cleanUp",!0),onClose:function(){o._mouseoverHandle&&(o._mouseoverHandle.remove(),delete o._mouseoverHandle)}},e),this.currentPopupItem=t}},onOpen:function(){this.isShowingNow=!0,this.set("activated",!0)},onClose:function(){this.set("activated",!1),this.set("selected",null),this.isShowingNow=!1,this.parentMenu=null},_closeChild:function(){this._stopPopupTimer(),this.currentPopupItem&&(this.focused&&(o.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(t){this._hoveredChild&&this._hoveredChild!=t&&this.onItemUnhover(this._hoveredChild),this.set("selected",t)},_onBlur:function(){this._cleanUp(!0),this.inherited(arguments)},_cleanUp:function(t){this._closeChild(),void 0===this.isShowingNow&&this.set("activated",!1),t&&this.set("selected",null)}})}),t("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(t,e,i,o){return t("dijit.DropDownMenu",o,{templateString:i,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(t){this._moveToPopup(t),t.stopPropagation(),t.preventDefault()},_onLeftArrow:function(t){this.parentMenu?this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(!1):(t.stopPropagation(),t.preventDefault())}})}),t("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){return l("dijit-legacy-requires")&&m(0,function(){t(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])}),i("dijit.Menu",p,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):e.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(t){return u.get(this._iframeContentDocument(t))||this._iframeContentDocument(t).__parent__||t.name&&document.frames[t.name]||null},_iframeContentDocument:function(t){return t.contentDocument||t.contentWindow&&t.contentWindow.document||t.name&&document.frames[t.name]&&document.frames[t.name].document||null},bindDomNode:function(t){var e;if("iframe"==(t=o.byId(t,this.ownerDocument)).tagName.toLowerCase()){var i=t,s=this._iframeContentWindow(i);e=c.body(s.document)}else e=t==c.body(this.ownerDocument)?this.ownerDocument.documentElement:t;var r={node:t,iframe:i};n.set(t,"_dijitMenu"+this.id,this._bindings.push(r));var l=d.hitch(this,function(t){var e=this.selector,o=e?function(t){return h.selector(e,t)}:function(t){return t},n=this;return[h(t,o(this.leftClickToOpen?"click":"contextmenu"),function(t){t.stopPropagation(),t.preventDefault(),(new Date).getTime()<this._lastKeyDown+500||n._scheduleOpen(this,i,{x:t.pageX,y:t.pageY},t.target)}),h(t,o("keydown"),function(t){(93==t.keyCode||t.shiftKey&&t.keyCode==a.F10||this.leftClickToOpen&&t.keyCode==a.SPACE)&&(t.stopPropagation(),t.preventDefault(),n._scheduleOpen(this,i,null,t.target),this._lastKeyDown=(new Date).getTime())})]});r.connects=e?l(e):[],i&&(r.onloadHandler=d.hitch(this,function(){var t=this._iframeContentWindow(i),e=c.body(t.document);r.connects=l(e)}),i.addEventListener?i.addEventListener("load",r.onloadHandler,!1):i.attachEvent("onload",r.onloadHandler))},unBindDomNode:function(t){var e;try{e=o.byId(t,this.ownerDocument)}catch(t){return}var i="_dijitMenu"+this.id;if(e&&n.has(e,i)){for(var s,r=n.get(e,i)-1,a=this._bindings[r];s=a.connects.pop();)s.remove();var d=a.iframe;d&&(d.removeEventListener?d.removeEventListener("load",a.onloadHandler,!1):d.detachEvent("onload",a.onloadHandler)),n.remove(e,i),delete this._bindings[r]}},_scheduleOpen:function(t,e,i,o){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:o,delegatedTarget:t,iframe:e,coords:i})},1))},_openMyself:function(t){var e=t.target,i=t.iframe,n=t.coords,a=!n;if(this.currentTarget=t.delegatedTarget,n){if(i){var d=s.position(i,!0),h=this._iframeContentWindow(i),c=s.docScroll(h.document),u=r.getComputedStyle(i),p=r.toPixelValue,m=(l("ie")&&l("quirks")?0:p(i,u.paddingLeft))+(l("ie")&&l("quirks")?p(i,u.borderLeftWidth):0),g=(l("ie")&&l("quirks")?0:p(i,u.paddingTop))+(l("ie")&&l("quirks")?p(i,u.borderTopWidth):0);n.x+=d.x+m-c.x,n.y+=d.y+g-c.y}}else(n=s.position(e,!0)).x+=10,n.y+=10;var _=this,b=this._focusManager.get("prevNode"),v=this._focusManager.get("curNode"),y=!v||o.isDescendant(v,this.domNode)?b:v;function C(){_.refocus&&y&&y.focus(),f.close(_)}f.open({popup:this,x:n.x,y:n.y,onExecute:C,onCancel:C,orient:this.isLeftToRight()?"L":"R"}),this.focus(),a||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),f.close(this)}},destroy:function(){e.forEach(this._bindings,function(t){t&&this.unBindDomNode(t.node)},this),this.inherited(arguments)}})}),t("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(t,e,i,o,n,s,r,a,d,h,l,c){var u=t("dijit.MenuItem"+(s("dojo-bidi")?"_NoBidi":""),[a,d,h,l],{templateString:c,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(t){this._set("label",t);var e,i="",o=t.search(/{\S}/);if(o>=0){i=t.charAt(o+1);var n=t.substr(0,o),s=t.substr(o+3);e=n+i+s,t=n+'<span class="dijitMenuItemShortcutKey">'+i+"</span>"+s}else e=t;this.domNode.setAttribute("aria-label",e+" "+this.accelKey),this.containerNode.innerHTML=t,this._set("shortcutKey",i)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(t){!t||"label"in this.params||this._set("label",t.innerHTML)},buildRendering:function(){this.inherited(arguments);var t=this.id+"_text";i.set(this.containerNode,"id",t),this.accelKeyNode&&i.set(this.accelKeyNode,"id",this.id+"_accel"),e.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==s("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(t){}},_setSelected:function(t){o.toggle(this.domNode,"dijitMenuItemSelected",t)},setLabel:function(t){n.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",t)},setDisabled:function(t){n.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",t)},_setDisabledAttr:function(t){this.focusNode.setAttribute("aria-disabled",t?"true":"false"),this._set("disabled",t)},_setAccelKeyAttr:function(t){this.accelKeyNode&&(this.accelKeyNode.style.display=t?"":"none",this.accelKeyNode.innerHTML=t,i.set(this.containerNode,"colSpan",t?"1":"2")),this._set("accelKey",t)}});return s("dojo-bidi")&&(u=t("dijit.MenuItem",u,{_setLabelAttr:function(t){this.inherited(arguments),"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}})),u}),t("dijit/PopupMenuItem",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(t,e,i,o,n,s,r){return t("dijit.PopupMenuItem",r,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var t=o("*",this.srcNodeRef);this.inherited(arguments,[t[0]]),this.dropDownContainer=this.srcNodeRef}},_openPopup:function(t,e){var o=this.popup;n.open(i.delegate(t,{popup:this.popup,around:this.domNode})),e&&o.focus&&o.focus()},_closePopup:function(){n.close(this.popup),this.popup.parentMenu=null},startup:function(){if(!this._started){if(this.inherited(arguments),!this.popup){var t=o("[widgetId]",this.dropDownContainer)[0];this.popup=s.byNode(t)}this.ownerDocumentBody.appendChild(this.popup.domNode),this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id),this.popup.startup(),this.popup.domNode.style.display="none",this.arrowWrapper&&e.set(this.arrowWrapper,"visibility",""),this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(t){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(t),delete this.popup),this.inherited(arguments)}})}),t("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(t,e,i,o){return t("dijit.CheckedMenuItem",i,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:o,checked:!1,_setCheckedAttr:function(t){this.domNode.setAttribute("aria-checked",t?"true":"false"),this._set("checked",t)},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(t){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked)),this.onClick(t)}})}),t("dijit/MenuBar",["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(t,e,i,o){return t("dijit.MenuBar",i,{templateString:o,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:!0,_orient:["below"],_moveToPopup:function(t){this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled&&this.onItemClick(this.focusedChild,t)},focusChild:function(t){this.inherited(arguments),this.activated&&t.popup&&!t.disabled&&this._openItemPopup(t,!0)},_onChildDeselect:function(t){this.currentPopupItem==t&&(this.currentPopupItem=null,t._closePopup()),this.inherited(arguments)},_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(t){this._moveToPopup(t)},_onUpArrow:function(){},onItemClick:function(t,i){!t.popup||!t.popup.isShowingNow||/^key/.test(i.type)&&i.keyCode===e.DOWN_ARROW?this.inherited(arguments):(t.focusNode.focus(),this._cleanUp(!0))}})}),t("dijit/MenuBarItem",["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(t,e,i){var o=t("dijit._MenuBarItemMixin",null,{templateString:i,_setIconClassAttr:null}),n=t("dijit.MenuBarItem",[e,o],{});return n._MenuBarItemMixin=o,n}),t("dijit/PopupMenuBarItem",["dojo/_base/declare","./PopupMenuItem","./MenuBarItem"],function(t,e,i){var o=i._MenuBarItemMixin;return t("dijit.PopupMenuBarItem",[e,o],{})}),t("dijit/MenuSeparator",["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(t,e,i,o,n,s){return t("dijit.MenuSeparator",[i,o,n],{templateString:s,buildRendering:function(){this.inherited(arguments),e.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})}),t("dijit/ProgressBar",["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(t,e,i,o,n,s,r,a){return e("dijit.ProgressBar",[s,r],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:a,_indeterminateHighContrastImagePath:t.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments),this.params&&"value"in this.params||(this.value=this.indeterminate?1/0:this.progress)},buildRendering:function(){this.inherited(arguments),this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString()),this.update()},_setDirAttr:function(t){var e="rtl"==t.toLowerCase();i.toggle(this.domNode,"dijitProgressBarRtl",e),i.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&e),this.inherited(arguments)},update:function(t){o.mixin(this,t||{});var e=this.internalProgress,n=this.domNode,s=1;this.indeterminate?n.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(s=Math.min(parseFloat(this.progress)/100,1),this.progress=s*this.maximum):(this.progress=Math.min(this.progress,this.maximum),s=this.maximum?this.progress/this.maximum:0),n.setAttribute("aria-valuenow",this.progress)),n.setAttribute("aria-labelledby",this.labelNode.id),n.setAttribute("aria-valuemin",0),n.setAttribute("aria-valuemax",this.maximum),this.labelNode.innerHTML=this.report(s),i.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate),i.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight()),e.style.width=100*s+"%",this.onChange()},_setValueAttr:function(t){this._set("value",t),t==1/0?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:t})},_setLabelAttr:function(t){this._set("label",t),this.update()},_setIndeterminateAttr:function(t){this._set("indeterminate",t),this.update()},report:function(t){return this.label?this.label:this.indeterminate?"&#160;":n.format(t,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})}),t("dijit/TitlePane",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","./_CssStateMixin","./_TemplatedMixin","./layout/ContentPane","dojo/text!./templates/TitlePane.html","./_base/manager","./a11yclick"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p){var m=e("dijit.TitlePane",[u,c,l],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:p.defaultDuration,baseClass:"dijitTitlePane",templateString:f,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments),i.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments),this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var t=this.hideNode,e=this.wipeNode;this._wipeIn=r.wipeIn({node:e,duration:this.duration,beforeBegin:function(){t.style.display=""}}),this._wipeOut=r.wipeOut({node:e,duration:this.duration,onEnd:function(){t.style.display="none"}})},_setOpenAttr:function(e,i){if(t.forEach([this._wipeIn,this._wipeOut],function(t){t&&"playing"==t.status()&&t.stop()}),i){var o=this[e?"_wipeIn":"_wipeOut"];o.play()}else this.hideNode.style.display=this.wipeNode.style.display=e?"":"none";this._started&&(e?this._onShow():this.onHide()),this.containerNode.setAttribute("aria-hidden",e?"false":"true"),this.focusNode.setAttribute("aria-pressed",e?"true":"false"),this._set("open",e),this._setCss()},_setToggleableAttr:function(t){this.focusNode.setAttribute("role",t?"button":"heading"),t?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(o.remove(this.focusNode,"aria-controls"),o.remove(this.focusNode,"tabIndex"),o.remove(this.focusNode,"aria-pressed")),this._set("toggleable",t),this._setCss()},_setContentAttr:function(t){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),s.setMarginBox(this.wipeNode,{h:s.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var t=this.titleBarNode||this.focusNode,e=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed"),n.replace(t,this._titleBarClass,e||""),n.replace(t,this._titleBarClass.replace("TitlePaneTitle",""),(e||"").replace("TitlePaneTitle","")),this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(t){t.keyCode==h.DOWN_ARROW&&this.open&&(this.containerNode.focus(),t.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(t){d.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0"),this.set("title",t)}});return a("dojo-bidi")&&m.extend({_setTitleAttr:function(t){this._set("title",t),this.titleNode.innerHTML=t,this.applyTextDir(this.titleNode)},_setTooltipAttr:function(t){this._set("tooltip",t),this.textDir&&(t=this.enforceTextDirWithUcc(null,t)),o.set(this.focusNode,"title",t)},_setTextDirAttr:function(t){this._created&&this.textDir!=t&&(this._set("textDir",t),this.set("title",this.title),this.set("tooltip",this.tooltip))}}),m}),t("dijit/tree/TreeStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(t,e,i,o){return i("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(t){o.mixin(this,t),this.connects=[];var i=this.store;if(!i.getFeatures()["dojo.data.api.Identity"])throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");i.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([e.after(i,"onNew",o.hitch(this,"onNewItem"),!0),e.after(i,"onDelete",o.hitch(this,"onDeleteItem"),!0),e.after(i,"onSet",o.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var t;t=this.connects.pop();)t.remove()},getRoot:function(t,e){this.root?t(this.root):this.store.fetch({query:this.query,onComplete:o.hitch(this,function(e){if(1!=e.length)throw new Error("dijit.tree.TreeStoreModel: root query returned "+e.length+" items, but must return exactly one");this.root=e[0],t(this.root)}),onError:e})},mayHaveChildren:function(e){return t.some(this.childrenAttrs,function(t){return this.store.hasAttribute(e,t)},this)},getChildren:function(e,i,n){var s=this.store;if(s.isItemLoaded(e)){for(var r=[],a=0;a<this.childrenAttrs.length;a++){var d=s.getValues(e,this.childrenAttrs[a]);r=r.concat(d)}var h=0;this.deferItemLoadingUntilExpand||t.forEach(r,function(t){s.isItemLoaded(t)||h++}),0==h?i(r):t.forEach(r,function(t,e){s.isItemLoaded(t)||s.loadItem({item:t,onItem:function(t){r[e]=t,0==--h&&i(r)},onError:n})})}else{var l=o.hitch(this,arguments.callee);s.loadItem({item:e,onItem:function(t){l(t,i,n)},onError:n})}},isItem:function(t){return this.store.isItem(t)},fetchItemByIdentity:function(t){this.store.fetchItemByIdentity(t)},getIdentity:function(t){return this.store.getIdentity(t)},getLabel:function(t){return this.labelAttr?this.store.getValue(t,this.labelAttr):this.store.getLabel(t)},newItem:function(t,e,i){var o,n={parent:e,attribute:this.childrenAttrs[0]};this.newItemIdAttr&&t[this.newItemIdAttr]?this.fetchItemByIdentity({identity:t[this.newItemIdAttr],scope:this,onItem:function(s){s?this.pasteItem(s,null,e,!0,i):(o=this.store.newItem(t,n))&&void 0!=i&&this.pasteItem(o,e,e,!1,i)}}):(o=this.store.newItem(t,n))&&void 0!=i&&this.pasteItem(o,e,e,!1,i)},pasteItem:function(e,i,o,n,s){var r=this.store,a=this.childrenAttrs[0];if(i&&t.forEach(this.childrenAttrs,function(o){if(r.containsValue(i,o,e)){if(!n){var s=t.filter(r.getValues(i,o),function(t){return t!=e});r.setValues(i,o,s)}a=o}}),o)if("number"==typeof s){var d=r.getValues(o,a).slice();d.splice(s,0,e),r.setValues(o,a,d)}else r.setValues(o,a,r.getValues(o,a).concat(e))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(t,e){e&&this.getChildren(e.item,o.hitch(this,function(t){this.onChildrenChange(e.item,t)}))},onDeleteItem:function(t){this.onDelete(t)},onSetItem:function(e,i){-1!=t.indexOf(this.childrenAttrs,i)?this.getChildren(e,o.hitch(this,function(t){this.onChildrenChange(e,t)})):this.onChange(e)}})}),t("dijit/tree/ForestStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(t,e,i,o,n){return e("dijit.tree.ForestStoreModel",n,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(t){this.root={store:this,root:!0,id:t.rootId,label:t.rootLabel,children:t.rootChildren}},mayHaveChildren:function(t){return t===this.root||this.inherited(arguments)},getChildren:function(t,e,i){t===this.root?this.root.children?e(this.root.children):this.store.fetch({query:this.query,onComplete:o.hitch(this,function(t){this.root.children=t,e(t)}),onError:i}):this.inherited(arguments)},isItem:function(t){return t===this.root||this.inherited(arguments)},fetchItemByIdentity:function(t){if(t.identity==this.root.id){var e=t.scope||i.global;t.onItem&&t.onItem.call(e,this.root)}else this.inherited(arguments)},getIdentity:function(t){return t===this.root?this.root.id:this.inherited(arguments)},getLabel:function(t){return t===this.root?this.root.label:this.inherited(arguments)},newItem:function(t,e,i){return e===this.root?(this.onNewRootItem(t),this.store.newItem(t)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(t,e,i,o,n){e===this.root&&(o||this.onLeaveRoot(t)),this.inherited(arguments,[t,e===this.root?null:e,i===this.root?null:i,o,n]),i===this.root&&this.onAddToRoot(t)},onAddToRoot:function(t){console.log(this,": item ",t," added to root")},onLeaveRoot:function(t){console.log(this,": item ",t," removed from root")},_requeryTop:function(){var e=this.root.children||[];this.store.fetch({query:this.query,onComplete:o.hitch(this,function(i){this.root.children=i,(e.length!=i.length||t.some(e,function(t,e){return i[e]!=t}))&&this.onChildrenChange(this.root,i)})})},onNewItem:function(t,e){this._requeryTop(),this.inherited(arguments)},onDeleteItem:function(e){-1!=t.indexOf(this.root.children,e)&&this._requeryTop(),this.inherited(arguments)},onSetItem:function(t,e,i,o){this._requeryTop(),this.inherited(arguments)}})}),t("dijit/tree/_dndContainer",["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(t,e,i,o,n,s){return e("dijit.tree._dndContainer",null,{constructor:function(e,r){this.tree=e,this.node=e.domNode,o.mixin(this,r),this.containerState="",i.add(this.node,"dojoDndContainer"),this.events=[n(this.node,s.enter,o.hitch(this,"onOverEvent")),n(this.node,s.leave,o.hitch(this,"onOutEvent")),t.after(this.tree,"_onNodeMouseEnter",o.hitch(this,"onMouseOver"),!0),t.after(this.tree,"_onNodeMouseLeave",o.hitch(this,"onMouseOut"),!0),n(this.node,"dragstart, selectstart",function(t){t.preventDefault()})]},destroy:function(){for(var t;t=this.events.pop();)t.remove();this.node=this.parent=null},onMouseOver:function(t){this.current=t},onMouseOut:function(){this.current=null},_changeState:function(t,e){var o="dojoDnd"+t,n=t.toLowerCase()+"State";i.replace(this.node,o+e,o+this[n]),this[n]=e},_addItemClass:function(t,e){i.add(t,"dojoDndItem"+e)},_removeItemClass:function(t,e){i.remove(t,"dojoDndItem"+e)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})}),t("dijit/tree/_dndSelector",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dnd/common","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(t,e,i,o,n,s,r,a,d,h,l){return e("dijit.tree._dndSelector",l,{constructor:function(){this.selection={},this.anchor=null,this.events.push(a(this.tree.domNode,d.press,o.hitch(this,"onMouseDown")),a(this.tree.domNode,d.release,o.hitch(this,"onMouseUp")),a(this.tree.domNode,d.move,o.hitch(this,"onMouseMove")),a(this.tree.domNode,h.press,o.hitch(this,"onClickPress")),a(this.tree.domNode,h.release,o.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var t=[],e=this.selection;for(var i in e)t.push(e[i]);return t},selectNone:function(){return this.setSelection([]),this},destroy:function(){this.inherited(arguments),this.selection=this.anchor=null},addTreeNode:function(t,e){return this.setSelection(this.getSelectedTreeNodes().concat([t])),e&&(this.anchor=t),t},removeTreeNode:function(e){var i=t.filter(this.getSelectedTreeNodes(),function(t){return!s.isDescendant(t.domNode,e.domNode)});return this.setSelection(i),e},isTreeNodeSelected:function(t){return t.id&&!!this.selection[t.id]},setSelection:function(e){var i=this.getSelectedTreeNodes();t.forEach(this._setDifference(i,e),o.hitch(this,function(t){t.setSelected(!1),this.anchor==t&&delete this.anchor,delete this.selection[t.id]})),t.forEach(this._setDifference(e,i),o.hitch(this,function(t){t.setSelected(!0),this.selection[t.id]=t})),this._updateSelectionProperties()},_setDifference:function(e,i){t.forEach(i,function(t){t.__exclude__=!0});var o=t.filter(e,function(t){return!t.__exclude__});return t.forEach(i,function(t){delete t.__exclude__}),o},_updateSelectionProperties:function(){var e=this.getSelectedTreeNodes(),i=[],o=[];t.forEach(e,function(t){var e=t.getTreePath();o.push(t),i.push(e)},this);var n=t.map(o,function(t){return t.item});this.tree._set("paths",i),this.tree._set("path",i[0]||[]),this.tree._set("selectedNodes",o),this.tree._set("selectedNode",o[0]||null),this.tree._set("selectedItems",n),this.tree._set("selectedItem",n[0]||null)},onClickPress:function(t){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(t.target,this.current))){"mousedown"==t.type&&r.isLeft(t)&&t.preventDefault();var e="keydown"==t.type?this.tree.focusedChild:this.current;if(e){var i=n.getCopyKeyState(t),o=e.id;this.singular||t.shiftKey||!this.selection[o]?(this._doDeselect=!1,this.userSelect(e,i,t.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(t){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==t.type?this.tree.focusedChild:this.current,n.getCopyKeyState(t),t.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(t,e){if(t===e)return 0;if("sourceIndex"in document.documentElement)return t.sourceIndex-e.sourceIndex;if("compareDocumentPosition"in document.documentElement)return 2&t.compareDocumentPosition(e)?1:-1;if(document.createRange){var i=doc.createRange();i.setStartBefore(t);var o=doc.createRange();return o.setStartBefore(e),i.compareBoundaryPoints(i.END_TO_END,o)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser")},userSelect:function(t,e,i){if(this.singular)this.anchor==t&&e?this.selectNone():(this.setSelection([t]),this.anchor=t);else if(i&&this.anchor){var o,n,s=this._compareNodes(this.anchor.rowNode,t.rowNode),r=this.anchor;s<0?(o=r,n=t):(o=t,n=r);for(var a=[];o!=n;)a.push(o),o=this.tree._getNext(o);a.push(n),this.setSelection(a)}else this.selection[t.id]&&e?this.removeTreeNode(t):e?this.addTreeNode(t,!0):(this.setSelection([t]),this.anchor=t)},getItem:function(t){var e=this.selection[t];return{data:e,type:["treeNode"]}},forInSelectedItems:function(t,e){for(var o in e=e||i.global,this.selection)t.call(e,this.getItem(o),o,this)}})}),t("dijit/Tree",["dojo/_base/array","dojo/aspect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x,j,N,w,D,S,T,k,A,I,E,M,B){function R(t){return m.delegate(t.promise||t,{addCallback:function(t){this.then(t)},addErrback:function(t){this.otherwise(t)}})}var L=o("dijit._TreeNode",[N,w,D,S,T],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(t){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=t,this._set("label",t)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:A,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments),this._setExpando(),this._updateItemClasses(this.item),this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded),this.setSelected(!1)},_setIndentAttr:function(e){var i=Math.max(e,0)*this.tree._nodePixelIndent+"px";h.set(this.domNode,"backgroundPosition",i+" 0px"),h.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",i),t.forEach(this.getChildren(),function(t){t.set("indent",e+1)}),this._set("indent",e)},markProcessing:function(){this.state="Loading",this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(t){var e=this.tree,i=e.model;e._v10Compat&&t===i.root&&(t=null),this._applyClassAndStyle(t,"icon","Icon"),this._applyClassAndStyle(t,"label","Label"),this._applyClassAndStyle(t,"row","Row"),this.tree._startPaint(!0)},_applyClassAndStyle:function(t,e,i){var o="_"+e+"Class",n=e+"Node",s=this[o];this[o]=this.tree["get"+i+"Class"](t,this.isExpanded),a.replace(this[n],this[o]||"",s||""),h.set(this[n],this.tree["get"+i+"Style"](t,this.isExpanded)||{})},_updateLayout:function(){var t=this.getParent(),e=!t||!t.rowNode||"none"==t.rowNode.style.display;a.toggle(this.domNode,"dijitTreeIsRoot",e),a.toggle(this.domNode,"dijitTreeIsLast",!e&&!this.getNextSibling())},_setExpando:function(t){var e=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],i=t?0:this.isExpandable?this.isExpanded?1:2:3;a.replace(this.expandoNode,e[i],e),this.expandoNodeText.innerHTML=["*","-","+","*"][i]},expand:function(){if(this._expandDeferred)return R(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred),this.isExpanded=!0,this.labelNode.setAttribute("aria-expanded","true"),(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role","group"),a.add(this.contentNode,"dijitTreeContentExpanded"),this._setExpando(),this._updateItemClasses(this.item),this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var t=c.wipeIn({node:this.containerNode,duration:j.defaultDuration}),i=this._expandDeferred=new n(function(){t.stop()});return e.after(t,"onEnd",function(){i.resolve(!0)},!0),t.play(),R(i)},collapse:function(){if(this._collapseDeferred)return R(this._collapseDeferred);this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred),this.isExpanded=!1,this.labelNode.setAttribute("aria-expanded","false"),this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false"),a.remove(this.contentNode,"dijitTreeContentExpanded"),this._setExpando(),this._updateItemClasses(this.item);var t=c.wipeOut({node:this.containerNode,duration:j.defaultDuration}),i=this._collapseDeferred=new n(function(){t.stop()});return e.after(t,"onEnd",function(){i.resolve(!0)},!0),t.play(),R(i)},indent:0,setChildItems:function(e){var i=this.tree,o=i.model,n=[],a=i.focusedChild,d=this.getChildren();t.forEach(d,function(t){D.prototype.removeChild.call(this,t)},this),this.defer(function(){t.forEach(d,function(e){if(!e._destroyed&&!e.getParent()){if(i.dndController.removeTreeNode(e),function e(n){var s=o.getIdentity(n.item),r=i._itemNodesMap[s];if(1==r.length)delete i._itemNodesMap[s];else{var a=t.indexOf(r,n);-1!=a&&r.splice(a,1)}t.forEach(n.getChildren(),e)}(e),i.persist){var n=t.map(e.getTreePath(),function(t){return i.model.getIdentity(t)}).join("/");for(var s in i._openedNodes)s.substr(0,n.length)==n&&delete i._openedNodes[s];i._saveExpandedNodes()}i.lastFocusedChild&&!r.isDescendant(i.lastFocusedChild,i.domNode)&&delete i.lastFocusedChild,a&&!r.isDescendant(a,i.domNode)&&i.focus(),e.destroyRecursive()}})}),this.state="Loaded",e&&e.length>0?(this.isExpandable=!0,t.forEach(e,function(t){var e,s=o.getIdentity(t),r=i._itemNodesMap[s];if(r)for(var a=0;a<r.length;a++)if(r[a]&&!r[a].getParent()){(e=r[a]).set("indent",this.indent+1);break}e||(e=this.tree._createTreeNode({item:t,tree:i,isExpandable:o.mayHaveChildren(t),label:i.getLabel(t),labelType:i.model&&i.model.labelType||"text",tooltip:i.getTooltip(t),ownerDocument:i.ownerDocument,dir:i.dir,lang:i.lang,textDir:i.textDir,indent:this.indent+1}),r?r.push(e):i._itemNodesMap[s]=[e]),this.addChild(e),(this.tree.autoExpand||this.tree._state(e))&&n.push(i._expandNode(e))},this),t.forEach(this.getChildren(),function(t){t._updateLayout()})):this.isExpandable=!1,this._setExpando&&this._setExpando(!1),this._updateItemClasses(this.item);var h=s(n);return this.tree._startPaint(h),R(h)},getTreePath:function(){for(var t=this,e=[];t&&t!==this.tree.rootNode;)e.unshift(t.item),t=t.getParent();return e.unshift(this.tree.rootNode.item),e},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(e){this.inherited(arguments);var i=this.getChildren();0==i.length&&(this.isExpandable=!1,this.collapse()),t.forEach(i,function(t){t._updateLayout()})},makeExpandable:function(){this.isExpandable=!0,this._setExpando(!1)},setSelected:function(t){this.labelNode.setAttribute("aria-selected",t?"true":"false"),a.toggle(this.rowNode,"dijitTreeRowSelected",t)},focus:function(){C.focus(this.focusNode)}});u("dojo-bidi")&&L.extend({_setTextDirAttr:function(e){!e||this.textDir==e&&this._created||(this._set("textDir",e),this.applyTextDir(this.labelNode),t.forEach(this.getChildren(),function(t){t.set("textDir",e)},this))}});var P=o("dijit.Tree",[N,k,w,T],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:I,persist:!1,autoExpand:!1,dndController:B,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(t,e){_.publish(this.id,m.mixin({tree:this,event:t},e||{}))},postMixInProperties:function(){this.tree=this,this.autoExpand&&(this.persist=!1),this._itemNodesMap={},!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie"),this.expandChildrenDeferred=new n,this.pendingCommandsPromise=this.expandChildrenDeferred.promise,this.inherited(arguments)},postCreate:function(){this._initState();var t=this;if(this.own(g(this.containerNode,g.selector(".dijitTreeNode",b.enter),function(e){t._onNodeMouseEnter(x.byNode(this),e)}),g(this.containerNode,g.selector(".dijitTreeNode",b.leave),function(e){t._onNodeMouseLeave(x.byNode(this),e)}),g(this.containerNode,g.selector(".dijitTreeRow",y.press),function(e){t._onNodePress(x.getEnclosingWidget(this),e)}),g(this.containerNode,g.selector(".dijitTreeRow",y),function(e){t._onClick(x.getEnclosingWidget(this),e)}),g(this.containerNode,g.selector(".dijitTreeRow","dblclick"),function(e){t._onDblClick(x.getEnclosingWidget(this),e)})),this.model||this._store2model(),this.own(e.after(this.model,"onChange",m.hitch(this,"_onItemChange"),!0),e.after(this.model,"onChildrenChange",m.hitch(this,"_onItemChildrenChange"),!0),e.after(this.model,"onDelete",m.hitch(this,"_onItemDelete"),!0)),this.inherited(arguments),this.dndController){m.isString(this.dndController)&&(this.dndController=m.getObject(this.dndController));for(var i={},o=0;o<this.dndParams.length;o++)this[this.dndParams[o]]&&(i[this.dndParams[o]]=this[this.dndParams[o]]);this.dndController=new this.dndController(this,i)}this._load(),this.onLoadDeferred=R(this.pendingCommandsPromise),this.onLoadDeferred.then(m.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0,f.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var t={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(t.mayHaveChildren=m.hitch(this,"mayHaveChildren")),this.params.getItemChildren&&(t.getChildren=m.hitch(this,function(t,e,i){this.getItemChildren(this._v10Compat&&t===this.model.root?null:t,e,i)})),this.model=new M(t),this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(m.hitch(this,function(t){var e=this.rootNode=this.tree._createTreeNode({item:t,tree:this,isExpandable:!0,label:this.label||this.getLabel(t),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(e.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(e.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(e.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),e.labelNode.setAttribute("role","presentation"),e.containerNode.setAttribute("role","tree"),e.containerNode.setAttribute("aria-expanded","true"),e.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular)),this.containerNode.appendChild(e.domNode);var i=this.model.getIdentity(t);this._itemNodesMap[i]?this._itemNodesMap[i].push(e):this._itemNodesMap[i]=[e],e._updateLayout(),this._expandNode(e).then(m.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),m.hitch(this,function(t){console.error(this,": error loading root: ",t)}))},getNodesByItem:function(t){if(!t)return[];var e=m.isString(t)?t:this.model.getIdentity(t);return[].concat(this._itemNodesMap[e])},_setSelectedItemAttr:function(t){this.set("selectedItems",[t])},_setSelectedItemsAttr:function(e){var i=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(m.hitch(this,function(){var o=t.map(e,function(t){return!t||m.isString(t)?t:i.model.getIdentity(t)}),n=[];t.forEach(o,function(t){n=n.concat(i._itemNodesMap[t]||[])}),this.set("selectedNodes",n)}))},_setPathAttr:function(t){return t.length?R(this.set("paths",[t]).then(function(t){return t[0]})):R(this.set("paths",[]).then(function(t){return t[0]}))},_setPathsAttr:function(e){var i=this;return R(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return s(t.map(e,function(e){if((e=t.map(e,function(t){return m.isString(t)?t:i.model.getIdentity(t)})).length)return function e(o,n){var s=o.shift();var r=t.filter(n,function(t){return t.getIdentity()==s})[0];if(r)return o.length?i._expandNode(r).then(function(){return e(o,r.getChildren())}):r;throw new P.PathError("Could not expand path at "+s)}(e,[i.rootNode]);throw new P.PathError("Empty path")}))}).then(function(t){return i.set("selectedNodes",t),i.paths}))},_setSelectedNodeAttr:function(t){this.set("selectedNodes",[t])},_setSelectedNodesAttr:function(t){this.dndController.setSelection(t)},expandAll:function(){var e=this;return R(function i(o){return e._expandNode(o).then(function(){var e=t.filter(o.getChildren()||[],function(t){return t.isExpandable});return s(t.map(e,i))})}(this.rootNode))},collapseAll:function(){var e=this;return R(function i(o){var n=t.filter(o.getChildren()||[],function(t){return t.isExpandable}),r=s(t.map(n,i));return!o.isExpanded||o==e.rootNode&&!e.showRoot?r:r.then(function(){return e._collapseNode(o)})}(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(t){return this.model.getLabel(t)},getIconClass:function(t,e){return!t||this.model.mayHaveChildren(t)?e?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(t,e){var i=this._getNext(e);i&&i.isTreeNode&&this.focusNode(i)},_onUpArrow:function(t,e){var i=e.getPreviousSibling();if(i)for(e=i;e.isExpandable&&e.isExpanded&&e.hasChildren();){var o=e.getChildren();e=o[o.length-1]}else{var n=e.getParent();(this.showRoot||n!==this.rootNode)&&(e=n)}e&&e.isTreeNode&&this.focusNode(e)},_onRightArrow:function(t,e){e.isExpandable&&!e.isExpanded?this._expandNode(e):e.hasChildren()&&(e=e.getChildren()[0])&&e.isTreeNode&&this.focusNode(e)},_onLeftArrow:function(t,e){if(e.isExpandable&&e.isExpanded)this._collapseNode(e);else{var i=e.getParent();i&&i.isTreeNode&&(this.showRoot||i!==this.rootNode)&&this.focusNode(i)}},focusLastChild:function(){var t=this._getLast();t&&t.isTreeNode&&this.focusNode(t)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var t=this.rootNode;t.isExpanded;){var e=t.getChildren();if(!e.length)break;t=e[e.length-1]}return t},_getNext:function(t){if(t.isExpandable&&t.isExpanded&&t.hasChildren())return t.getChildren()[0];for(;t&&t.isTreeNode;){var e=t.getNextSibling();if(e)return e;t=t.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(t,e){return r.isDescendant(t,e.expandoNode)||r.isDescendant(t,e.expandoNodeText)},_onNodePress:function(t,e){this.focusNode(t)},__click:function(t,e,i,o){var n=e.target,s=this.isExpandoNode(n,t);t.isExpandable&&(i||s)?this._onExpandoClick({node:t}):(this._publish("execute",{item:t.item,node:t,evt:e}),this[o](t.item,t,e),this.focusNode(t)),e.stopPropagation(),e.preventDefault()},_onClick:function(t,e){this.__click(t,e,this.openOnClick,"onClick")},_onDblClick:function(t,e){this.__click(t,e,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(t){var e=t.node;this.focusNode(e),e.isExpanded?this._collapseNode(e):this._expandNode(e)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(t){return f.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0"),this._getNext(t)},_getRootOrFirstNode:function(){return f.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0"),this._getFirst()},_collapseNode:function(t){if(t._expandNodeDeferred&&delete t._expandNodeDeferred,"Loading"!=t.state&&t.isExpanded){var e=t.collapse();return this.onClose(t.item,t),this._state(t,!1),this._startPaint(e),e}},_expandNode:function(t){if(t._expandNodeDeferred)return t._expandNodeDeferred;var e=this.model,i=t.item,o=this;t._loadDeferred||(t.markProcessing(),t._loadDeferred=new n,e.getChildren(i,function(e){t.unmarkProcessing(),t.setChildItems(e).then(function(){t._loadDeferred.resolve(e)})},function(e){console.error(o,": error loading "+t.label+" children: ",e),t._loadDeferred.reject(e)}));var s=t._loadDeferred.then(m.hitch(this,function(){var e=t.expand();return this.onOpen(t.item,t),this._state(t,!0),e}));return this._startPaint(s),s},focusNode:function(t){var e=this.domNode.scrollLeft;this.focusChild(t),this.domNode.scrollLeft=e},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(e){var i=this.model,o=i.getIdentity(e),n=this._itemNodesMap[o];if(n){var s=this.getLabel(e),r=this.getTooltip(e);t.forEach(n,function(t){t.set({item:e,label:s,tooltip:r}),t._updateItemClasses(e)})}},_onItemChildrenChange:function(e,i){var o=this.model,n=o.getIdentity(e),s=this._itemNodesMap[n];s&&t.forEach(s,function(t){t.setChildItems(i)})},_onItemDelete:function(e){var i=this.model,o=i.getIdentity(e),n=this._itemNodesMap[o];n&&(t.forEach(n,function(t){this.dndController.removeTreeNode(t);var e=t.getParent();e&&e.removeChild(t),this.lastFocusedChild&&!r.isDescendant(this.lastFocusedChild,this.domNode)&&delete this.lastFocusedChild,this.focusedChild&&!r.isDescendant(this.focusedChild,this.domNode)&&this.focus(),t.destroyRecursive()},this),delete this._itemNodesMap[o])},_initState:function(){if(this._openedNodes={},this.persist&&this.cookieName){var e=i(this.cookieName);e&&t.forEach(e.split(","),function(t){this._openedNodes[t]=!0},this)}},_state:function(e,i){if(!this.persist)return!1;var o=t.map(e.getTreePath(),function(t){return this.model.getIdentity(t)},this).join("/");if(1===arguments.length)return this._openedNodes[o];i?this._openedNodes[o]=!0:delete this._openedNodes[o],this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var t=[];for(var e in this._openedNodes)t.push(e);i(this.cookieName,t.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch),this.rootNode&&this.rootNode.destroyRecursive(),this.dndController&&!m.isString(this.dndController)&&this.dndController.destroy(),this.rootNode=null,this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(t){t&&d.setMarginBox(this.domNode,t),this._nodePixelIndent=d.position(this.tree.indentDetector).w||this._nodePixelIndent,this.expandChildrenDeferred.then(m.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1),this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(t){this._outstandingPaintOperations++,this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var e=m.hitch(this,function(){this._outstandingPaintOperations--,this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});v(t,e,e)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer),this.containerNode.style.width="auto",this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(t){return new L(t)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});return u("dojo-bidi")&&P.extend({_setTextDirAttr:function(t){t&&this.textDir!=t&&(this._set("textDir",t),this.rootNode.set("textDir",t))}}),P.PathError=l("TreePathError"),P._TreeNode=L,P}),t("dijit/InlineEditBox",["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/i18n","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/when","./a11yclick","./focus","./_Widget","./_TemplatedMixin","./_WidgetsInTemplateMixin","./_Container","./form/Button","./form/_TextBoxMixin","./form/TextBox","dojo/text!./templates/InlineEditBox.html","dojo/i18n!./nls/common"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x,j,N){var w=o("dijit._InlineEditor",[_,b,v],{templateString:N,contextRequire:t,postMixInProperties:function(){this.inherited(arguments),this.messages=d.getLocalization("dijit","common",this.lang),e.forEach(["buttonSave","buttonCancel"],function(t){this[t]||(this[t]=this.messages[t])},this)},buildRendering:function(){this.inherited(arguments);var i="string"==typeof this.editor?c.getObject(this.editor)||t(this.editor):this.editor,o=this.sourceStyle,n="line-height:"+o.lineHeight+";",s=a.getComputedStyle(this.domNode);e.forEach(["Weight","Family","Size","Style"],function(t){var e=o["font"+t],i=s["font"+t];i!=e&&(n+="font-"+t+":"+o["font"+t]+";")},this),e.forEach(["marginTop","marginBottom","marginLeft","marginRight","position","left","top","right","bottom","float","clear","display"],function(t){this.domNode.style[t]=o[t]},this);var d=this.inlineEditBox.width;"100%"==d?(n+="width:100%;",this.domNode.style.display="block"):n+="width:"+d+(Number(d)==d?"px":"")+";";var h=c.delegate(this.inlineEditBox.editorParams,{style:n,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new i(h,this.editorPlaceholder),this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,r.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var t=this.editWidget;this.inlineEditBox.autoSave?this.own(i.after(t,"onChange",c.hitch(this,"_onChange"),!0),u(t,"keydown",c.hitch(this,"_onKeyDown"))):"intermediateChanges"in t&&(t.set("intermediateChanges",!0),this.own(i.after(t,"onChange",c.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup(),this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0),this.inherited(arguments)},getValue:function(){var t=this.editWidget;return String(t.get("displayedValue"in t||"_getDisplayedValueAttr"in t?"displayedValue":"value"))},_onKeyDown:function(t){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(t.altKey||t.ctrlKey)return;t.keyCode==l.ESCAPE?(t.stopPropagation(),t.preventDefault(),this.cancel(!0)):t.keyCode==l.ENTER&&"INPUT"==t.target.tagName&&(t.stopPropagation(),t.preventDefault(),this._onChange())}},_onBlur:function(){this.inherited(arguments),this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave()&&g.focus(this.inlineEditBox.displayNode)},enableSave:function(){return!this.editWidget.isValid||this.editWidget.isValid()},focus:function(){this.editWidget.focus(),this.editWidget.focusNode&&(g._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){x.selectInputText(this.editWidget.focusNode)}))}}),D=o("dijit.InlineEditBox"+(f("dojo-bidi")?"_NoBidi":""),_,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",renderAsHtml:!1,editor:j,editorWrapper:w,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:f("ie")<=6?"<span style='font-family: wingdings; text-decoration: underline;'>&#160;&#160;&#160;&#160;&#x270d;&#160;&#160;&#160;&#160;</span>":"<span style='text-decoration: underline;'>&#160;&#160;&#160;&#160;&#x270d;&#160;&#160;&#160;&#160;</span>",constructor:function(){this.editorParams={}},postMixInProperties:function(){this.inherited(arguments),this.displayNode=this.srcNodeRef,this.own(u(this.displayNode,m,c.hitch(this,"_onClick")),u(this.displayNode,"mouseover, focus",c.hitch(this,"_onMouseOver")),u(this.displayNode,"mouseout, blur",c.hitch(this,"_onMouseOut"))),this.displayNode.setAttribute("role","button"),this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0),this.value||"value"in this.params||(this.value=c.trim(this.renderAsHtml?this.displayNode.innerHTML:this.displayNode.innerText||this.displayNode.textContent||"")),this.value||(this.displayNode.innerHTML=this.noValueIndicator),s.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(t){h.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",t)},_setDisabledAttr:function(t){this.domNode.setAttribute("aria-disabled",t?"true":"false"),t?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",0),s.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",t),this._set("disabled",t)},_onMouseOver:function(){this.disabled||s.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){s.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(t){this.disabled||(t&&(t.stopPropagation(),t.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){if(this._set("editing",!0),this._savedTabIndex=n.get(this.displayNode,"tabIndex")||"0",!this.wrapperWidget){var t=r.create("span",null,this.domNode,"before"),e="string"==typeof this.editorWrapper?c.getObject(this.editorWrapper):this.editorWrapper;this.wrapperWidget=new e({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:a.getComputedStyle(this.displayNode),save:c.hitch(this,"save"),cancel:c.hitch(this,"cancel"),textDir:this.textDir},t),this.wrapperWidget._started||this.wrapperWidget.startup(),this._started||this.startup()}var i=this.wrapperWidget;s.add(this.displayNode,"dijitOffScreen"),s.remove(i.domNode,"dijitOffScreen"),a.set(i.domNode,{visibility:"visible"}),n.set(this.displayNode,"tabIndex","-1");var o=i.editWidget,d=this;p(o.onLoadDeferred,c.hitch(i,function(){o.set("displayedValue"in o||"_setDisplayedValueAttr"in o?"displayedValue":"value",d.value),this.defer(function(){i.saveButton&&i.saveButton.set("disabled","intermediateChanges"in o),this.focus(),this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments),this.editing},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget),this.inherited(arguments)},_showText:function(t){var e=this.wrapperWidget;a.set(e.domNode,{visibility:"hidden"}),s.add(e.domNode,"dijitOffScreen"),s.remove(this.displayNode,"dijitOffScreen"),n.set(this.displayNode,"tabIndex",this._savedTabIndex),t&&g.focus(this.displayNode)},save:function(t){if(!this.disabled&&this.editing){this._set("editing",!1);var e=this.wrapperWidget,i=e.getValue();this.set("value",i),this._showText(t)}},setValue:function(t){return h.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",t)},_setValueAttr:function(t){t=c.trim(t);var e=this.renderAsHtml?t:t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>");this.displayNode.innerHTML=e||this.noValueIndicator,this._set("value",t),this._started&&this.defer(function(){this.onChange(t)})},getValue:function(){return h.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0"),this.get("value")},cancel:function(t){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(t))}});return f("dojo-bidi")&&(D=o("dijit.InlineEditBox",D,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.displayNode)}})),D._InlineEditor=w,D}),t("dijit/form/Form",["dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/sniff","../_Widget","../_TemplatedMixin","./_FormMixin","../layout/_ContentPaneResizeMixin"],function(t,e,i,o,n,s,r,a){return t("dijit.form.Form",[n,s,r,a],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"",this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(t){e.set(this.domNode,"encType",t),o("ie")&&(this.domNode.encoding=t),this._set("encType",t)},reset:function(t){var e={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:t?t.target:this.domNode,target:t?t.target:this.domNode};!1!==this.onReset(e)&&e.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(t){return this.reset(t),t.stopPropagation(),t.preventDefault(),!1},_onSubmit:function(t){var e=this.constructor.prototype;this.execute==e.execute&&this.onExecute==e.onExecute||(i.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues())),!1===this.onSubmit(t)&&(t.stopPropagation(),t.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})}),t("dijit/form/ComboButton",["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(t,e,i,o,n){return t("dijit.form.ComboButton",o,{templateString:n,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(t){t.keyCode==e[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(i.focus(this._popupStateNode),t.stopPropagation(),t.preventDefault())},_onArrowKeyDown:function(t){t.keyCode==e[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(i.focus(this.titleNode),t.stopPropagation(),t.preventDefault())},focus:function(t){this.disabled||i.focus("start"==t?this.titleNode:this._popupStateNode)}})}),t("dijit/form/_CheckBoxMixin",["dojo/_base/declare","dojo/dom-attr"],function(t,e){return t("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(t){this._set("readOnly",t),e.set(this.focusNode,"readOnly",t)},_setLabelAttr:void 0,_getSubmitValue:function(t){return null==t||""===t?"on":t},_setValueAttr:function(t){t=this._getSubmitValue(t),this._set("value",t),e.set(this.focusNode,"value",t)},reset:function(){this.inherited(arguments),this._set("value",this._getSubmitValue(this.params.value)),e.set(this.focusNode,"value",this.value)},_onClick:function(t){return this.readOnly?(t.stopPropagation(),t.preventDefault(),!1):this.inherited(arguments)}})}),t("dijit/form/CheckBox",["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(t,e,i,o,n,s,r,a,d){return o("dijit-legacy-requires")&&s(0,function(){t(["dijit/form/RadioButton"])}),e("dijit.form.CheckBox",[r,a],{templateString:d,baseClass:"dijitCheckBox",_setValueAttr:function(t,e){"string"==typeof t&&(this.inherited(arguments),t=!0),this._created&&this.set("checked",t,e)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments),this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&n("label[for='"+this.id+"']").addClass("dijitFocusedLabel"),this.inherited(arguments)},_onBlur:function(){this.id&&n("label[for='"+this.id+"']").removeClass("dijitFocusedLabel"),this.inherited(arguments)}})}),t("dijit/form/_RadioButtonMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query!css2","../registry"],function(t,e,i,o,n,s){return e("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var t=[];return n("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(o.hitch(this,function(e){if(e.name==this.name&&e.form==this.focusNode.form){var i=s.getEnclosingWidget(e);i&&t.push(i)}})),t},_setCheckedAttr:function(e){this.inherited(arguments),this._created&&e&&t.forEach(this._getRelatedWidgets(),o.hitch(this,function(t){t!=this&&t.checked&&t.set("checked",!1)}))},_getSubmitValue:function(t){return null==t?"on":t},_onClick:function(e){return this.checked||this.disabled?(e.stopPropagation(),e.preventDefault(),!1):this.readOnly?(e.stopPropagation(),e.preventDefault(),t.forEach(this._getRelatedWidgets(),o.hitch(this,function(t){i.set(this.focusNode||this.domNode,"checked",t.checked)})),!1):this.inherited(arguments)}})}),t("dijit/form/RadioButton",["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(t,e,i){return t("dijit.form.RadioButton",[e,i],{baseClass:"dijitRadio"})}),t("dojo/cldr/monetary",["../_base/kernel","../_base/lang"],function(t,e){var i={};return e.setObject("dojo.cldr.monetary",i),i.getData=function(t){var e={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[t],i={}[t];return void 0===e&&(e=2),void 0===i&&(i=0),{places:e,round:i}},i}),t("dojo/currency",["./_base/array","./_base/lang","./number","./i18n","./i18n!./cldr/nls/currency","./cldr/monetary"],function(t,e,i,o,n,s){var r={};return e.setObject("dojo.currency",r),r._mixInDefaults=function(i){(i=i||{}).type="currency";var n=o.getLocalization("dojo.cldr","currency",i.locale)||{},r=i.currency,a=s.getData(r);return t.forEach(["displayName","symbol","group","decimal"],function(t){a[t]=n[r+"_"+t]}),a.fractional=[!0,!1],e.mixin(a,i)},r.format=function(t,e){return i.format(t,r._mixInDefaults(e))},r.regexp=function(t){return i.regexp(r._mixInDefaults(t))},r.parse=function(t,e){return i.parse(t,r._mixInDefaults(e))},r}),t("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(t,e,i){var o=t("dijit.form.RangeBoundTextBox",i,{rangeMessage:"",rangeCheck:function(t,e){return!("min"in e&&!(this.compare(t,e.min)>=0)||"max"in e&&!(this.compare(t,e.max)<=0))},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var t=this.get("value");if(null==t)return!1;var e=!1;if("min"in this.constraints){var i=this.constraints.min;e=this.compare(t,"number"==typeof i&&i>=0&&0!=t?0:i)<0}if(!e&&"max"in this.constraints){var o=this.constraints.max;e=this.compare(t,"number"!=typeof o||o>0?o:0)>0}return e},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(t){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(t))},getErrorMessage:function(t){var e=this.get("value");return null==e||""===e||"number"==typeof e&&isNaN(e)||this.isInRange(t)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=e.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}});return o}),t("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(t,e,i,o,n,s){var r=function(t){var e,t=t||{},o=i.getLocalization("dojo.cldr","number",i.normalizeLocale(t.locale)),n=t.pattern?t.pattern:o[(t.type||"decimal")+"Format"];return e="number"==typeof t.places?t.places:"string"==typeof t.places&&t.places.length>0?t.places.replace(/.*,/,""):-1!=n.indexOf(".")?n.split(".")[1].replace(/[^#0]/g,"").length:0,{sep:o.decimal,places:e}},a=t("dijit.form.NumberTextBoxMixin",null,{pattern:function(t){return"("+(this.focused&&this.editOptions?this._regExpGenerator(e.delegate(t,this.editOptions))+"|":"")+this._regExpGenerator(t)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,_decimalInfo:r(),postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(t){var e="number"==typeof t.places?t.places:0;e&&e++,"number"!=typeof t.max&&(t.max=9*Math.pow(10,15-e)),"number"!=typeof t.min&&(t.min=-9*Math.pow(10,15-e)),this.inherited(arguments,[t]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value),this._decimalInfo=r(t)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var t=this.get("value");if("number"==typeof t&&!isNaN(t)){var e=this.format(t,this.constraints);void 0!==e&&(this.textbox.value=e)}this.inherited(arguments)}},format:function(t,i){var o=String(t);return"number"!=typeof t?o:isNaN(t)?"":"rangeCheck"in this&&this.rangeCheck(t,i)||!1===i.exponent||!/\de[-+]?\d/i.test(o)?(this.editOptions&&this.focused&&(i=e.mixin({},i,this.editOptions)),this._formatter(t,i)):o},_parser:n.parse,parse:function(t,i){var o=this._parser(t,e.mixin({},i,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(o)&&(o=this._parser(t,i)),o},_getDisplayedValueAttr:function(){var t=this.inherited(arguments);return isNaN(t)?this.textbox.value:t},filter:function(t){return null==t||"string"==typeof t&&""==t?NaN:("number"!=typeof t||isNaN(t)||0==t||(t=n.round(t,this._decimalInfo.places)),this.inherited(arguments,[t]))},serialize:function(t,e){return"number"!=typeof t||isNaN(t)?"":this.inherited(arguments)},_setBlurValue:function(){var t=e.hitch(e.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(t,!0)},_setValueAttr:function(t,e,i){void 0!==t&&void 0===i&&(i=String(t),"number"==typeof t?isNaN(t)?i="":("rangeCheck"in this&&this.rangeCheck(t,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(i))&&(i=void 0):t?t=void 0:(i="",t=NaN)),this.inherited(arguments,[t,e,i])},_getValueAttr:function(){var t=this.inherited(arguments);if(!isNaN(t)||""===this.textbox.value)return t;if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&new RegExp("^"+n._realNumberRegexp(e.delegate(this.constraints))+"$").test(this.textbox.value)){var i=Number(this.textbox.value);return isNaN(i)?void 0:i}},isValid:function(t){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var e=this.get("value");return!(isNaN(e)||!this.rangeCheck(e,this.constraints))&&(!(!1===this.constraints.exponent||!/\de[-+]?\d/i.test(this.textbox.value))||this.inherited(arguments))},_isValidSubset:function(){var t="number"==typeof this.constraints.min,e="number"==typeof this.constraints.max,i=this.get("value");if(isNaN(i)||!t&&!e)return this.inherited(arguments);var n=0|i,s=i<0,r=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),a=this.maxLength||20,d=a-this.textbox.value.length,h=r?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",l=r?n+"."+h:n+"",c=o.rep("9",d),u=i,f=i;return s?u=Number(l+c):f=Number(l+c),!(t&&f<this.constraints.min||e&&u>this.constraints.max)}}),d=t("dijit.form.NumberTextBox",[s,a],{baseClass:"dijitTextBox dijitNumberTextBox"});return d.Mixin=a,d}),t("dijit/form/CurrencyTextBox",["dojo/currency","dojo/_base/declare","dojo/_base/lang","./NumberTextBox"],function(t,e,i,o){return e("dijit.form.CurrencyTextBox",o,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",_formatter:t.format,_parser:t.parse,_regExpGenerator:t.regexp,parse:function(t,e){var n=this.inherited(arguments);return isNaN(n)&&/\d+/.test(t)&&(n=i.hitch(i.delegate(this,{_parser:o.prototype._parser}),"inherited")(arguments)),n},_setConstraintsAttr:function(e){!e.currency&&this.currency&&(e.currency=this.currency),this.inherited(arguments,[t._mixInDefaults(i.mixin(e,{exponent:!1}))])}})}),t("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(t,e){var i={};return t.setObject("dojo.cldr.supplemental",i),i.getFirstDayOfWeek=function(t){var e=i._region(t),o={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,do:0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,in:0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[e];return void 0===o?1:o},i._region=function(t){var i=(t=e.normalizeLocale(t)).split("-"),o=i[1];return o?4==o.length&&(o=i[2]):o={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us",in:"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de",new:"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[i[0]],o},i.getWeekend=function(t){var e=i._region(t),o={in:0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[e],n={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[e];return void 0===o&&(o=6),void 0===n&&(n=0),{start:o,end:n}},i}),t("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(t,e,i,o,n,s,r,a,d){var h={};function l(t,e,i,n){return n.replace(/([a-z])\1*/gi,function(s){var a,d,l=s.charAt(0),c=s.length,u=["abbr","wide","narrow"];switch(l){case"G":a=e[c<4?"eraAbbr":"eraNames"][t.getFullYear()<0?0:1];break;case"y":switch(a=t.getFullYear(),c){case 1:break;case 2:if(!i.fullYear){a=(a=String(a)).substr(a.length-2);break}default:d=!0}break;case"Q":case"q":a=Math.ceil((t.getMonth()+1)/3),d=!0;break;case"M":case"L":var f=t.getMonth();if(c<3)a=f+1,d=!0;else{var p=["months","L"==l?"standAlone":"format",u[c-3]].join("-");a=e[p][f]}break;case"w":a=h._getWeekOfYear(t,0),d=!0;break;case"d":a=t.getDate(),d=!0;break;case"D":a=h._getDayOfYear(t),d=!0;break;case"e":case"c":var m=t.getDay();if(c<2){a=(m-o.getFirstDayOfWeek(i.locale)+8)%7;break}case"E":if(m=t.getDay(),c<3)a=m+1,d=!0;else{var g=["days","c"==l?"standAlone":"format",u[c-3]].join("-");a=e[g][m]}break;case"a":var _=t.getHours()<12?"am":"pm";a=i[_]||e["dayPeriods-format-wide-"+_];break;case"h":case"H":case"K":case"k":var b=t.getHours();switch(l){case"h":a=b%12||12;break;case"H":a=b;break;case"K":a=b%12;break;case"k":a=b||24}d=!0;break;case"m":a=t.getMinutes(),d=!0;break;case"s":a=t.getSeconds(),d=!0;break;case"S":a=Math.round(t.getMilliseconds()*Math.pow(10,c-3)),d=!0;break;case"v":case"z":if(a=h._getZone(t,!0,i))break;c=4;case"Z":var v=h._getZone(t,!1,i),y=[v<=0?"+":"-",r.pad(Math.floor(Math.abs(v)/60),2),r.pad(Math.abs(v)%60,2)];4==c&&(y.splice(0,0,"GMT"),y.splice(3,0,":")),a=y.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+n)}return d&&(a=r.pad(a,c)),a})}function c(t,i,o,n){var s=function(t){return t};i=i||s,o=o||s,n=n||s;var r=t.match(/(''|[^'])+/g),a="'"==t.charAt(0);return e.forEach(r,function(t,e){t?(r[e]=(a?o:i)(t.replace(/''/g,"'")),a=!a):r[e]=""}),n(r.join(""))}function u(t,e,i,o){return o=s.escapeString(o),i.strict||(o=o.replace(" a"," ?a")),o.replace(/([a-z])\1*/gi,function(o){var n,s=o.charAt(0),r=o.length,a="",d="";switch(i.strict?(r>1&&(a="0{"+(r-1)+"}"),r>2&&(d="0{"+(r-2)+"}")):(a="0?",d="0{0,2}"),s){case"y":n="\\d{2,4}";break;case"M":case"L":n=r>2?"\\S+?":"1[0-2]|"+a+"[1-9]";break;case"D":n="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+a+"[1-9][0-9]|"+d+"[1-9]";break;case"d":n="3[01]|[12]\\d|"+a+"[1-9]";break;case"w":n="[1-4][0-9]|5[0-3]|"+a+"[1-9]";break;case"E":case"e":case"c":n=".+?";break;case"h":n="1[0-2]|"+a+"[1-9]";break;case"k":n="1[01]|"+a+"\\d";break;case"H":n="1\\d|2[0-3]|"+a+"\\d";break;case"K":n="1\\d|2[0-4]|"+a+"[1-9]";break;case"m":case"s":n="[0-5]\\d";break;case"S":n="\\d{"+r+"}";break;case"a":var h=i.am||e["dayPeriods-format-wide-am"],l=i.pm||e["dayPeriods-format-wide-pm"];n=h+"|"+l,i.strict||(h!=h.toLowerCase()&&(n+="|"+h.toLowerCase()),l!=l.toLowerCase()&&(n+="|"+l.toLowerCase()),-1!=n.indexOf(".")&&(n+="|"+n.replace(/\./g,""))),n=n.replace(/\./g,"\\.");break;default:n=".*"}return t&&t.push(o),"("+n+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}t.setObject(d.id.replace(/\//g,"."),h),h._getZone=function(t,e,o){return e?i.getTimezoneName(t):t.getTimezoneOffset()},h.format=function(e,i){i=i||{};var o,s=n.normalizeLocale(i.locale),r=i.formatLength||"short",a=h._getGregorianBundle(s),d=[],u=t.hitch(this,l,e,a,i);return"year"==i.selector?c(a["dateFormatItem-yyyy"]||"yyyy",u):("date"!=i.selector&&(o=i.timePattern||a["timeFormat-"+r])&&d.push(c(o,u)),"time"!=i.selector&&(o=i.datePattern||a["dateFormat-"+r])&&d.push(c(o,u)),1==d.length?d[0]:a["dateTimeFormat-"+r].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(t,e){return d[e]}))},h.regexp=function(t){return h._parseInfo(t).regexp},h._parseInfo=function(e){e=e||{};var i=n.normalizeLocale(e.locale),o=h._getGregorianBundle(i),s=e.formatLength||"short",r=e.datePattern||o["dateFormat-"+s],a=e.timePattern||o["timeFormat-"+s],d=[],l=c("date"==e.selector?r:"time"==e.selector?a:o["dateTimeFormat-"+s].replace(/\{(\d+)\}/g,function(t,e){return[a,r][e]}),t.hitch(this,u,d,o,e));return{regexp:l,tokens:d,bundle:o}},h.parse=function(t,o){var n=/[\u200E\u200F\u202A\u202E]/g,s=h._parseInfo(o),r=s.tokens,a=s.bundle,d=new RegExp("^"+s.regexp.replace(n,"")+"$",s.strict?"":"i"),l=d.exec(t&&t.replace(n,""));if(!l)return null;var c=["abbr","wide","narrow"],u=[1970,0,1,0,0,0,0],f="",p=e.every(l,function(t,i){if(!i)return!0;var n=r[i-1],s=n.length,d=n.charAt(0);switch(d){case"y":if(2!=s&&o.strict)u[0]=t;else if(t<100){t=Number(t);var h=""+(new Date).getFullYear(),l=100*h.substring(0,2),p=Math.min(Number(h.substring(2,4))+20,99);u[0]=t<p?l+t:l-100+t}else{if(o.strict)return!1;u[0]=t}break;case"M":case"L":if(s>2){var m=a["months-"+("L"==d?"standAlone":"format")+"-"+c[s-3]].concat();if(o.strict||(t=t.replace(".","").toLowerCase(),m=e.map(m,function(t){return t.replace(".","").toLowerCase()})),-1==(t=e.indexOf(m,t)))return!1}else t--;u[1]=t;break;case"E":case"e":case"c":var g=a["days-"+("c"==d?"standAlone":"format")+"-"+c[s-3]].concat();if(o.strict||(t=t.toLowerCase(),g=e.map(g,function(t){return t.toLowerCase()})),-1==(t=e.indexOf(g,t)))return!1;break;case"D":u[1]=0;case"d":u[2]=t;break;case"a":var _=o.am||a["dayPeriods-format-wide-am"],b=o.pm||a["dayPeriods-format-wide-pm"];if(!o.strict){var v=/\./g;t=t.replace(v,"").toLowerCase(),_=_.replace(v,"").toLowerCase(),b=b.replace(v,"").toLowerCase()}if(o.strict&&t!=_&&t!=b)return!1;f=t==b?"p":t==_?"a":"";break;case"K":24==t&&(t=0);case"h":case"H":case"k":if(t>23)return!1;u[3]=t;break;case"m":u[4]=t;break;case"s":u[5]=t;break;case"S":u[6]=t}return!0}),m=+u[3];"p"===f&&m<12?u[3]=m+12:"a"===f&&12==m&&(u[3]=0);var g=new Date(u[0],u[1],u[2],u[3],u[4],u[5],u[6]);o.strict&&g.setFullYear(u[0]);var _=r.join(""),b=-1!=_.indexOf("d"),v=-1!=_.indexOf("M");return!p||v&&g.getMonth()>u[1]||b&&g.getDate()>u[2]?null:((v&&g.getMonth()<u[1]||b&&g.getDate()<u[2])&&(g=i.add(g,"hour",1)),g)};var f=[];return h.addCustomFormats=function(t,e){f.push({pkg:t,name:e})},h._getGregorianBundle=function(i){var o={};return e.forEach(f,function(e){var s=n.getLocalization(e.pkg,e.name,i);o=t.mixin(o,s)},this),o},h.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),h.getNames=function(t,e,i,o){var n,s=h._getGregorianBundle(o),r=[t,i,e];if("standAlone"==i){var a=r.join("-");1==(n=s[a])[0]&&(n=void 0)}return r[1]="format",(n||s[r.join("-")]).concat()},h.isWeekend=function(t,e){var i=o.getWeekend(e),n=(t||new Date).getDay();return i.end<i.start&&(i.end+=7,n<i.start&&(n+=7)),n>=i.start&&n<=i.end},h._getDayOfYear=function(t){return i.difference(new Date(t.getFullYear(),0,1,t.getHours()),t)+1},h._getWeekOfYear=function(t,e){1==arguments.length&&(e=0);var i=new Date(t.getFullYear(),0,1).getDay(),o=(i-e+7)%7,n=Math.floor((h._getDayOfYear(t)+o-1)/7);return i==e&&n++,n},h}),t("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p){var m=e("dijit.CalendarLite",[u,f],{templateString:p,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(t){return t&&!isNaN(t)&&"object"==typeof t&&t.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var t=this._get("value");if(t&&!isNaN(t)){var e=new this.dateClassObj(t);return e.setHours(0,0,0,0),e.getDate()<t.getDate()&&(e=this.dateModule.add(e,"hour",1)),e}return null},_setValueAttr:function(t,e){"string"==typeof t&&(t=s.fromISOString(t)),t=this._patchDate(t),this._isValidDate(t)&&!this.isDisabledDate(t,this.lang)?(this._set("value",t),this.set("currentFocus",t),this._markSelectedDates([t]),this._created&&(e||void 0===e)&&this.onChange(this.get("value"))):(this._set("value",null),this._markSelectedDates([]))},_patchDate:function(t){return t&&(t=new this.dateClassObj(t)).setHours(1,0,0,0),t},_setText:function(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(t.ownerDocument.createTextNode(e))},_populateGrid:function(){var e=new this.dateClassObj(this.currentFocus);e.setDate(1);var o=(e=this._patchDate(e)).getDay(),n=this.dateModule.getDaysInMonth(e),s=this.dateModule.getDaysInMonth(this.dateModule.add(e,"month",-1)),r=new this.dateClassObj,a=i.getFirstDayOfWeek(this.lang);if(a>o&&(a-=7),!this.summary){var d=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,e);this.gridNode.setAttribute("summary",d[e.getMonth()])}this._date2cell={},t.forEach(this.dateCells,function(t,i){var d,h=i+a,l=new this.dateClassObj(e),c="dijitCalendar",u=0;h<o?(d=s-o+h+1,u=-1,c+="Previous"):h>=o+n?(d=h-o-n+1,u=1,c+="Next"):(d=h-o+1,c+="Current"),u&&(l=this.dateModule.add(l,"month",u)),l.setDate(d),this.dateModule.compare(l,r,"date")||(c="dijitCalendarCurrentDate "+c),this.isDisabledDate(l,this.lang)?(c="dijitCalendarDisabledDate "+c,t.setAttribute("aria-disabled","true")):(c="dijitCalendarEnabledDate "+c,t.removeAttribute("aria-disabled"),t.setAttribute("aria-selected","false"));var f=this.getClassForDate(l,this.lang);f&&(c=f+" "+c),t.className=c+"Month dijitCalendarDateTemplate";var p=l.valueOf();this._date2cell[p]=t,t.dijitDateValue=p,this._setText(this.dateLabels[i],l.getDateLocalized?l.getDateLocalized(this.lang):l.getDate())},this)},_populateControls:function(){var e=new this.dateClassObj(this.currentFocus);e.setDate(1),this.monthWidget.set("month",e);var i=e.getFullYear()-1,o=new this.dateClassObj;t.forEach(["previous","current","next"],function(t){o.setFullYear(i++),this._setText(this[t+"YearLabelNode"],this.dateLocaleModule.format(o,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(t){this.dateModule=t.datePackage?d.getObject(t.datePackage,!1):o,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=t.datePackage?d.getObject(t.datePackage+".locale",!1):n},_createMonthWidget:function(){return m._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var t=this.dowTemplateString,e=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),o=i.getFirstDayOfWeek(this.lang);this.dayCellsHtml=c.substitute([t,t,t,t,t,t,t].join(""),{d:""},function(){return e[o++%7]});var n=c.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[n,n,n,n,n,n].join(""),this.dateCells=[],this.dateLabels=[],this.inherited(arguments),r.setSelectable(this.domNode,!1);var s=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget(),this.set("currentFocus",s,!1)},postCreate:function(){this.inherited(arguments),this._connectControls()},_connectControls:function(){var t=d.hitch(this,function(t,e,i){return this[t].dojoClick=!0,h(this[t],"click",d.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,e,i))}))});this.own(t("incrementMonth","month",1),t("decrementMonth","month",-1),t("nextYearLabelNode","year",1),t("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(t,e){var i=this.currentFocus,o=this._getNodeByDate(i);t=this._patchDate(t),this._set("currentFocus",t),this._date2cell&&0==this.dateModule.difference(i,t,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));var n=this._getNodeByDate(t);n.setAttribute("tabIndex",this.tabIndex),(this.focused||e)&&n.focus(),o&&o!=n&&(l("webkit")?o.setAttribute("tabIndex","-1"):o.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(t){t.stopPropagation(),t.preventDefault();for(var e=t.target;e&&!e.dijitDateValue;e=e.parentNode);e&&!a.contains(e,"dijitCalendarDisabledDate")&&this.set("value",e.dijitDateValue)},_getNodeByDate:function(t){return(t=this._patchDate(t))&&this._date2cell?this._date2cell[t.valueOf()]:null},_markSelectedDates:function(e){function i(t,e){a.toggle(e,"dijitCalendarSelectedDate",t),e.setAttribute("aria-selected",t?"true":"false")}t.forEach(this._selectedCells||[],d.partial(i,!1)),this._selectedCells=t.filter(t.map(e,this._getNodeByDate,this),function(t){return t}),t.forEach(this._selectedCells,d.partial(i,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});return m._MonthWidget=e("dijit.CalendarLite._MonthWidget",u,{_setMonthAttr:function(e){var i=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,e),o=6==l("ie")?"":"<div class='dijitSpacer'>"+t.map(i,function(t){return"<div>"+t+"</div>"}).join("")+"</div>";this.domNode.innerHTML=o+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+i[e.getMonth()]+"</div>"}}),m}),t("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g){var _=o("dijit.Calendar",[u,f,p],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(t){a.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",t)},_createMonthWidget:function(){return new _._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:h.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments),this.own(l(this.domNode,"keydown",h.hitch(this,"_onKeyDown")),l(this.dateRowsNode,"mouseover",h.hitch(this,"_onDayMouseOver")),l(this.dateRowsNode,"mouseout",h.hitch(this,"_onDayMouseOut")),l(this.dateRowsNode,"mousedown",h.hitch(this,"_onDayMouseDown")),l(this.dateRowsNode,"mouseup",h.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(t){var e=new this.dateClassObj(this.currentFocus);e.setDate(1),e.setMonth(t);var i=this.dateModule.getDaysInMonth(e),o=this.currentFocus.getDate();e.setDate(Math.min(o,i)),this._setCurrentFocusAttr(e)},_onDayMouseOver:function(t){var e=s.contains(t.target,"dijitCalendarDateLabel")?t.target.parentNode:t.target;e&&(e.dijitDateValue&&!s.contains(e,"dijitCalendarDisabledDate")||e==this.previousYearLabelNode||e==this.nextYearLabelNode)&&(s.add(e,"dijitCalendarHoveredDate"),this._currentNode=e)},_onDayMouseOut:function(t){if(this._currentNode&&(!t.relatedTarget||t.relatedTarget.parentNode!=this._currentNode)){var e="dijitCalendarHoveredDate";s.contains(this._currentNode,"dijitCalendarActiveDate")&&(e+=" dijitCalendarActiveDate"),s.remove(this._currentNode,e),this._currentNode=null}},_onDayMouseDown:function(t){var e=t.target.parentNode;e&&e.dijitDateValue&&!s.contains(e,"dijitCalendarDisabledDate")&&(s.add(e,"dijitCalendarActiveDate"),this._currentNode=e)},_onDayMouseUp:function(t){var e=t.target.parentNode;e&&e.dijitDateValue&&s.remove(e,"dijitCalendarActiveDate")},handleKey:function(t){var e,i=-1,o=this.currentFocus;switch(t.keyCode){case d.RIGHT_ARROW:i=1;case d.LEFT_ARROW:e="day",this.isLeftToRight()||(i*=-1);break;case d.DOWN_ARROW:i=1;case d.UP_ARROW:e="week";break;case d.PAGE_DOWN:i=1;case d.PAGE_UP:e=t.ctrlKey||t.altKey?"year":"month";break;case d.END:o=this.dateModule.add(o,"month",1),e="day";case d.HOME:(o=new this.dateClassObj(o)).setDate(1);break;default:return!0}return e&&(o=this.dateModule.add(o,e,i)),this._setCurrentFocusAttr(o),!1},_onKeyDown:function(t){this.handleKey(t)||(t.stopPropagation(),t.preventDefault())},onValueSelected:function(){},onChange:function(t){this.onValueSelected(t)},getClassForDate:function(){}});return _._MonthDropDownButton=o("dijit.Calendar._MonthDropDownButton",g,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments),this.dropDown=new _._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(t){var e=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t);this.dropDown.set("months",e),this.containerNode.innerHTML=(6==c("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+e[t.getMonth()]+"</div>"}}),_._MonthDropDown=o("dijit.Calendar._MonthDropDown",[f,m,p],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"<div data-dojo-attach-event='ondijitclick:_onClick'></div>",_setMonthsAttr:function(e){this.domNode.innerHTML="",t.forEach(e,function(t,e){var i=r.create("div",{className:"dijitCalendarMonthLabel",month:e,innerHTML:t},this.domNode);i._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(t){this.onChange(n.get(t.target,"month"))},onChange:function(){}}),_}),t("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(t,e,i,o,n,s,r,a){new Date("X");var d=o("dijit.form._DateTimeTextBox",[s,r],{templateString:a,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:e.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},compare:function(e,i){var o=this._isInvalidDate(e),n=this._isInvalidDate(i);if(o||n)return o&&n?0:o?-1:1;var s=this.format(e,this._unboundedConstraints),r=this.format(i,this._unboundedConstraints),a=this.parse(s,this._unboundedConstraints),d=this.parse(r,this._unboundedConstraints);return s==r?0:t.compare(a,d,this._selector)},autoWidth:!0,format:function(t,e){return t?this.dateLocaleModule.format(t,e):""},parse:function(t,e){return this.dateLocaleModule.parse(t,e)||(this._isEmpty(t)?null:void 0)},serialize:function(t,e){return t.toGregorian&&(t=t.toGregorian()),i.toISOString(t,e)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(i){i=i||{},this.dateModule=i.datePackage?n.getObject(i.datePackage,!1):t,this.dateClassObj=this.dateModule.Date||Date,this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value)),this.dateLocaleModule=i.datePackage?n.getObject(i.datePackage+".locale",!1):e,this._set("pattern",this.dateLocaleModule.regexp),this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none"),this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(t){t.selector=this._selector,t.fullYear=!0;var e=i.fromISOString;"string"==typeof t.min&&(t.min=e(t.min),this.dateClassObj instanceof Date||(t.min=new this.dateClassObj(t.min))),"string"==typeof t.max&&(t.max=e(t.max),this.dateClassObj instanceof Date||(t.max=new this.dateClassObj(t.max))),this.inherited(arguments),this._unboundedConstraints=n.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(t){return!t||isNaN(t)||"object"!=typeof t||t.toString()==this._invalidDate},_setValueAttr:function(t,e,o){void 0!==t&&("string"==typeof t&&(t=i.fromISOString(t)),this._isInvalidDate(t)&&(t=null),t instanceof Date&&!(this.dateClassObj instanceof Date)&&(t=new this.dateClassObj(t))),this.inherited(arguments,[t,e,o]),this.value instanceof Date&&(this.filterString=""),this.dropDown&&this.dropDown.set("value",t,!1)},_set:function(t,e){if("value"==t){e instanceof Date&&!(this.dateClassObj instanceof Date)&&(e=new this.dateClassObj(e));var i=this._get("value");if(i instanceof this.dateClassObj&&0==this.compare(e,i))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(t){this._isInvalidDate(t)&&(t=new this.dateClassObj),this._set("dropDownDefaultValue",t)},openDropDown:function(t){this.dropDown&&this.dropDown.destroy();var e=n.isString(this.popupClass)?n.getObject(this.popupClass,!1):this.popupClass,i=this,o=this.get("value");this.dropDown=new e({onChange:function(t){i.set("value",t,!0)},id:this.id+"_popup",dir:i.dir,lang:i.lang,value:o,textDir:i.textDir,currentFocus:this._isInvalidDate(o)?this.dropDownDefaultValue:o,constraints:i.constraints,filterString:i.filterString,datePackage:i.datePackage,isDisabledDate:function(t){return!i.rangeCheck(t,i.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(t,e){this._setValueAttr(this.parse(t,this.constraints),e,t)}});return d}),t("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(t,e,i){return t("dijit.form.DateTextBox",i,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:e,_selector:"date",maxHeight:1/0,value:new Date("")})}),t("dijit/_TimePicker",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/query","dojo/mouse","dojo/on","./_WidgetBase","./form/_ListMouseMixin"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){var g=n("dijit._TimePicker",[p,m],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:o.toISOString,buildRendering:function(){this.inherited(arguments),this.containerNode=this.domNode,this.timeMenu=this.domNode},setValue:function(t){a.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",t)},_setValueAttr:function(t){this._set("value",t),this._showText()},_setFilterStringAttr:function(t){this._set("filterString",t),this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(t,e,i,o){for(var n=[],s=0;s<this._maxIncrement;s++){var r=this._createOption(s);r&&n.push(r)}return n},_showText:function(){var e=o.fromISOString;this.domNode.innerHTML="",this._clickableIncrementDate=e(this.clickableIncrement),this._visibleIncrementDate=e(this.visibleIncrement);var i=function(t){return 60*t.getHours()*60+60*t.getMinutes()+t.getSeconds()},n=i(this._clickableIncrementDate),s=i(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=e(this.pickerMin),this._refDate.setFullYear(1970,0,1),this._clickableIncrement=1,this._visibleIncrement=s/n;var r=e(this.pickerMax);r.setFullYear(1970,0,1);var a=.001*(r.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((a+1)/n);var d=this._getFilteredNodes();t.forEach(d,function(t){this.domNode.appendChild(t)},this),!d.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments),this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(t){for(var e in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})e in t&&(this[e]=t[e]);t.locale||(t.locale=this.lang)},_createOption:function(t){var o=new Date(this._refDate),n=this._clickableIncrementDate;o.setHours(o.getHours()+n.getHours()*t,o.getMinutes()+n.getMinutes()*t,o.getSeconds()+n.getSeconds()*t),"time"==this.constraints.selector&&o.setFullYear(1970,0,1);var a=i.format(o,this.constraints);if(this.filterString&&0!==a.toLowerCase().indexOf(this.filterString))return null;var d=this.ownerDocument.createElement("div");return d.className=this.baseClass+"Item",d.date=o,d.idx=t,r.create("div",{class:this.baseClass+"ItemInner",innerHTML:a},d),t%this._visibleIncrement<1&&t%this._visibleIncrement>-1?s.add(d,this.baseClass+"Marker"):t%this._clickableIncrement||s.add(d,this.baseClass+"Tick"),this.isDisabledDate(o)&&s.add(d,this.baseClass+"ItemDisabled"),this.value&&!e.compare(this.value,o,this.constraints.selector)&&(d.selected=!0,s.add(d,this.baseClass+"ItemSelected"),this._selectedDiv=d,s.contains(d,this.baseClass+"Marker")?s.add(d,this.baseClass+"MarkerSelected"):s.add(d,this.baseClass+"TickSelected"),this._highlightOption(d,!0)),d},onOpen:function(){this.inherited(arguments),this.set("selected",this._selectedDiv)},_onOptionSelected:function(t){var e=t.target.date||t.target.parentNode.date;e&&!this.isDisabledDate(e)&&(this._highlighted_option=null,this.set("value",e),this.onChange(e))},onChange:function(){},_highlightOption:function(t,e){if(t){if(e)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=t;else{if(this._highlighted_option!==t)return;this._highlighted_option=null}s.toggle(t,this.baseClass+"ItemHover",e),s.contains(t,this.baseClass+"Marker")?s.toggle(t,this.baseClass+"MarkerHover",e):s.toggle(t,this.baseClass+"TickHover",e)}},handleKey:function(t){return t.keyCode==d.DOWN_ARROW?(this.selectNextNode(),t.stopPropagation(),t.preventDefault(),!1):t.keyCode==d.UP_ARROW?(this.selectPreviousNode(),t.stopPropagation(),t.preventDefault(),!1):t.keyCode==d.ENTER||t.keyCode===d.TAB?!this._keyboardSelected&&t.keyCode===d.TAB||(this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option}),t.keyCode===d.TAB):void 0},onHover:function(t){this._highlightOption(t,!0)},onUnhover:function(t){this._highlightOption(t,!1)},onSelect:function(t){this._highlightOption(t,!0)},onDeselect:function(t){this._highlightOption(t,!1)},onClick:function(t){this._onOptionSelected({target:t})}});return g}),t("dijit/form/TimeTextBox",["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(t,e,i,o,n){return t("dijit.form.TimeTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:o,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(t){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),t.keyCode){case e.ENTER:case e.TAB:case e.ESCAPE:case e.DOWN_ARROW:case e.UP_ARROW:break;default:this.defer(function(){var t=this.get("displayedValue");this.filterString=t&&!this.parse(t,this.constraints)?t.toLowerCase():"",this._opened&&this.closeDropDown(),this.openDropDown()})}}})}),t("dijit/form/_Spinner",["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","dojo/on","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(t,e,i,o,n,s,r,a,d,h){return t("dijit.form._Spinner",a,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:.9,smallDelta:1,largeDelta:10,templateString:d,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(t){return t},_arrowPressed:function(t,e,i){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),e*i),!1),h.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(t,i,o){var n=this.smallDelta;if(i==this.textbox){var s=o.keyCode;n=s==e.PAGE_UP||s==e.PAGE_DOWN?this.largeDelta:this.smallDelta,i=s==e.UP_ARROW||s==e.PAGE_UP?this.upArrowNode:this.downArrowNode}-1==t?this._arrowReleased(i):this._arrowPressed(i,i==this.upArrowNode?1:-1,n)},_wheelTimer:null,_mouseWheeled:function(t){t.stopPropagation(),t.preventDefault();var e=t.wheelDelta/120;Math.floor(e)!=e&&(e=t.wheelDelta>0?1:-1);var i=t.detail?-1*t.detail:e;if(0!==i){var o=this[i>0?"upArrowNode":"downArrowNode"];this._arrowPressed(o,i,this.smallDelta),this._wheelTimer&&this._wheelTimer.remove(),this._wheelTimer=this.defer(function(){this._arrowReleased(o)},50)}},_setConstraintsAttr:function(t){this.inherited(arguments),this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(t,e){this.focusNode.setAttribute("aria-valuenow",t),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.own(s(this.domNode,n.wheel,i.hitch(this,"_mouseWheeled")),r.addListener(this.upArrowNode,this.textbox,{keyCode:e.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),r.addListener(this.downArrowNode,this.textbox,{keyCode:e.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),r.addListener(this.upArrowNode,this.textbox,{keyCode:e.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),r.addListener(this.downArrowNode,this.textbox,{keyCode:e.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})}),t("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(t,e,i,o){return t("dijit.form.NumberSpinner",[i,o.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(t,e){var i=this.constraints,o=isNaN(t),n=!isNaN(i.max),s=!isNaN(i.min);o&&0!=e&&(t=e>0?s?i.min:n?i.max:0:n?this.constraints.max:s?i.min:0);var r=t+e;return o||isNaN(r)?t:(n&&r>i.max&&(r=i.max),s&&r<i.min&&(r=i.min),r)},_onKeyDown:function(t){if(!(this.disabled||this.readOnly||t.keyCode!=e.HOME&&t.keyCode!=e.END||t.ctrlKey||t.altKey||t.metaKey||void 0===this.get("value"))){var i=this.constraints[t.keyCode==e.HOME?"min":"max"];"number"==typeof i&&this._setValueAttr(i,!1),t.stopPropagation(),t.preventDefault()}}})}),t("dijit/form/ComboBox",["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(t,e,i){return t("dijit.form.ComboBox",[e,i],{})}),t("dijit/form/MultiSelect",["dojo/_base/array","dojo/_base/declare","dojo/dom-geometry","dojo/sniff","dojo/query","./_FormValueWidget","dojo/NodeList-dom"],function(t,e,i,o,n,s){var r=e("dijit.form.MultiSelect"+(o("dojo-bidi")?"_NoBidi":""),s,{size:7,baseClass:"dijitMultiSelect",templateString:"<select multiple='multiple' ${!nameAttrSetting} data-dojo-attach-point='containerNode,focusNode' data-dojo-attach-event='onchange: _onChange'></select>",addSelected:function(t){t.getSelected().forEach(function(e){this.containerNode.appendChild(e),this.domNode.scrollTop=this.domNode.offsetHeight;var i=t.domNode.scrollTop;t.domNode.scrollTop=0,t.domNode.scrollTop=i},this),this._set("value",this.get("value"))},getSelected:function(){return n("option",this.containerNode).filter(function(t){return t.selected})},_getValueAttr:function(){return t.map(this.getSelected(),function(t){return t.value})},multiple:!0,_setMultipleAttr:function(t){},_setValueAttr:function(e){o("android")?n("option",this.containerNode).orphan().forEach(function(i){var o=i.ownerDocument.createElement("option");o.value=i.value,o.selected=-1!=t.indexOf(e,i.value),o.text=i.text,o.originalText=i.originalText,this.containerNode.appendChild(o)},this):n("option",this.containerNode).forEach(function(i){i.selected=-1!=t.indexOf(e,i.value)}),this.inherited(arguments)},invertSelection:function(t){var e=[];n("option",this.containerNode).forEach(function(t){t.selected||e.push(t.value)}),this._setValueAttr(e,!(!1===t||null==t))},_onChange:function(){this._handleOnChange(this.get("value"),!0)},resize:function(t){t&&i.setMarginBox(this.domNode,t)},postCreate:function(){this._set("value",this.get("value")),this.inherited(arguments)}});return o("dojo-bidi")&&(r=e("dijit.form.MultiSelect",r,{addSelected:function(t){t.getSelected().forEach(function(t){t.text=this.enforceTextDirWithUcc(this.restoreOriginalText(t),t.text)},this),this.inherited(arguments)},_setTextDirAttr:function(t){this.textDir==t&&this._created||!this.enforceTextDirWithUcc||(this._set("textDir",t),n("option",this.containerNode).forEach(function(t){this._created||t.value!==t.text||(t.value=t.text),t.text=this.enforceTextDirWithUcc(t,t.originalText||t.text)},this))}})),r}),t("dijit/form/_FormSelectWidget",["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(t,e,i,o,n,s,r,a,d,h,l,c,u){var f=n("dijit.form._FormSelectWidget",u,{multiple:!1,options:null,store:null,_setStoreAttr:function(t){this._created&&this._deprecatedSetStore(t)},query:null,_setQueryAttr:function(t){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:t})},queryOptions:null,_setQueryOptionsAttr:function(t){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:t})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(e){var i=this.options||[];return null==e?i:d.isArray(e)?t.map(e,"return this.getOptions(item);",this):(d.isString(e)&&(e={value:e}),d.isObject(e)&&(t.some(i,function(t,i){for(var o in e)if(!(o in t)||t[o]!=e[o])return!1;return e=i,!0})||(e=-1)),e>=0&&e<i.length?i[e]:null)},addOption:function(e){t.forEach(d.isArray(e)?e:[e],function(t){t&&d.isObject(t)&&this.options.push(t)},this),this._loadChildren()},removeOption:function(e){var i=this.getOptions(d.isArray(e)?e:[e]);t.forEach(i,function(e){e&&(this.options=t.filter(this.options,function(t){return t.value!==e.value||t.label!==e.label}),this._removeOptionItem(e))},this),this._loadChildren()},updateOption:function(e){t.forEach(d.isArray(e)?e:[e],function(t){var e,i=this.getOptions({value:t.value});if(i)for(e in t)i[e]=t[e]},this),this._loadChildren()},setStore:function(t,e,i){a.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0"),this._deprecatedSetStore(t,e,i)},_deprecatedSetStore:function(n,s,r){var a=this.store;if(r=r||{},a!==n){for(var h;h=this._notifyConnections.pop();)h.remove();n.get||(d.mixin(n,{_oldAPI:!0,get:function(t){var i=new e;return this.fetchItemByIdentity({identity:t,onItem:function(t){i.resolve(t)},onError:function(t){i.reject(t)}}),i.promise},query:function(t,i){var o=new e(function(){n.abort&&n.abort()});o.total=new e;var n=this.fetch(d.mixin({query:t,onBegin:function(t){o.total.resolve(t)},onComplete:function(t){o.resolve(t)},onError:function(t){o.reject(t)}},i));return new c(o)}}),n.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[i.after(n,"onNew",d.hitch(this,"_onNewItem"),!0),i.after(n,"onDelete",d.hitch(this,"_onDeleteItem"),!0),i.after(n,"onSet",d.hitch(this,"_onSetItem"),!0)])),this._set("store",n)}return this.options&&this.options.length&&this.removeOption(this.options),this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),r.query&&this._set("query",r.query),r.queryOptions&&this._set("queryOptions",r.queryOptions),n&&n.query&&(this._loadingStore=!0,this.onLoadDeferred=new e,this._queryRes=n.query(this.query,this.queryOptions),l(this._queryRes,d.hitch(this,function(e){if(this.sortByLabel&&!r.sort&&e.length)if(n.getValue)e.sort(o.createSortFunction([{attribute:n.getLabelAttributes(e[0])[0]}],n));else{var i=this.labelAttr;e.sort(function(t,e){return t[i]>e[i]?1:e[i]>t[i]?-1:0})}r.onFetch&&(e=r.onFetch.call(this,e,r)),t.forEach(e,function(t){this._addOptionForItem(t)},this),this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(d.hitch(this,function(t,e,i){e==i?this._onSetItem(t):(-1!=e&&this._onDeleteItem(t),-1!=i&&this._onNewItem(t))}),!0)),this._loadingStore=!1,this.set("value","_pendingValue"in this?this._pendingValue:s),delete this._pendingValue,this.loadChildrenOnOpen?this._pseudoLoadChildren(e):this._loadChildren(),this.onLoadDeferred.resolve(!0),this.onSetStore()}),function(t){console.error("dijit.form.Select: "+t.toString()),this.onLoadDeferred.reject(t)})),a},_setValueAttr:function(e,i){if(this._onChangeActive||(i=null),this._loadingStore)this._pendingValue=e;else if(null!=e){e=d.isArray(e)?t.map(e,function(t){return d.isObject(t)?t:{value:t}}):d.isObject(e)?[e]:[{value:e}],e=t.filter(this.getOptions(e),function(t){return t&&t.value});var o=this.getOptions()||[];this.multiple||e[0]&&e[0].value||!o.length||(e[0]=o[0]),t.forEach(o,function(i){i.selected=t.some(e,function(t){return t.value===i.value})});var n=t.map(e,function(t){return t.value});if(void 0!==n&&void 0!==n[0]){var s=t.map(e,function(t){return t.label});this._setDisplay(this.multiple?s:s[0]),this.inherited(arguments,[this.multiple?n:n[0],i]),this._updateSelection()}}},_getDisplayedValueAttr:function(){var e=t.map([].concat(this.get("selectedOptions")),function(t){return t&&"label"in t?t.label:t?t.value:null},this);return this.multiple?e:e[0]},_setDisplayedValueAttr:function(t){this.set("value",this.getOptions("string"==typeof t?{label:t}:t))},_loadChildren:function(){this._loadingStore||(t.forEach(this._getChildren(),function(t){t.destroyRecursive()}),t.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null,this._set("value",this._getValueFromOpts());var e=[].concat(this.value);if(e&&e[0]){var i=this;t.forEach(this._getChildren(),function(o){var n=t.some(e,function(t){return o.option&&t===o.option.value});n&&!i.multiple&&(i.focusedChild=o),r.toggle(o.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),n),o.domNode.setAttribute("aria-selected",n?"true":"false")},this)}},_getValueFromOpts:function(){var e=this.getOptions()||[];if(!this.multiple&&e.length){var i=t.filter(e,function(t){return t.selected})[0];return i&&i.value?i.value:(e[0].selected=!0,e[0].value)}return this.multiple?t.map(t.filter(e,function(t){return t.selected}),function(t){return t.value})||[]:""},_onNewItem:function(t,e){e&&e.parent||this._addOptionForItem(t)},_onDeleteItem:function(t){var e=this.store;this.removeOption({value:e.getIdentity(t)})},_onSetItem:function(t){this.updateOption(this._getOptionObjForItem(t))},_getOptionObjForItem:function(t){var e=this.store,i=this.labelAttr&&this.labelAttr in t?t[this.labelAttr]:e.getLabel(t),o=i?e.getIdentity(t):null;return{value:o,label:i,item:t}},_addOptionForItem:function(t){var e=this.store;if(!e.isItemLoaded||e.isItemLoaded(t)){var i=this._getOptionObjForItem(t);this.addOption(i)}else e.loadItem({item:t,onItem:function(t){this._addOptionForItem(t)},scope:this})},constructor:function(t){this._oValue=(t||{}).value||null,this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments),s.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?h("> *",this.srcNodeRef).map(function(t){return"separator"===t.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:t.getAttribute("data-"+a._scopeName+"-value")||t.getAttribute("value"),label:String(t.innerHTML),selected:t.getAttribute("selected")||!1,disabled:t.getAttribute("disabled")||!1}},this):[]),this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments),i.after(this,"onChange",d.hitch(this,"_updateSelection"));var t=this.store;t&&(t.getIdentity||t.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(t,this._oValue,{query:this.query,queryOptions:this.queryOptions})),this._storeInitialized=!0},startup:function(){this._loadChildren(),this.inherited(arguments)},destroy:function(){for(var t;t=this._notifyConnections.pop();)t.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close(),this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null),this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}});return f}),t("dijit/form/Select",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b){var v=e("dijit.form._SelectMenu",u,{autoFocus:!0,buildRendering:function(){this.inherited(arguments),this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments),this.own(d(this.domNode,"selectstart",function(t){t.preventDefault(),t.stopPropagation()}))},focus:function(){var e=!1,i=this.parentWidget.value;a.isArray(i)&&(i=i[i.length-1]),i&&t.forEach(this.parentWidget._getChildren(),function(t){t.option&&i===t.option.value&&(e=!0,this.focusChild(t,!1))},this),e||this.inherited(arguments)}}),y=e("dijit.form.Select"+(h("dojo-bidi")?"_NoBidi":""),[l,c,g],{baseClass:"dijitSelect dijitValidationTextBox",templateString:b,_buttonInputDisabled:h("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){if(this.inherited(arguments),this.options.length&&!this.value&&this.srcNodeRef){var t=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[t>=0?t:0].value)}this.dropDown=new v({id:this.id+"_menu",parentWidget:this}),o.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(t){if(t.value||t.label){var e=a.hitch(this,"_setValueAttr",t),i=new f({option:t,label:("text"===this.labelType?(t.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):t.label)||this.emptyLabel,onClick:e,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:t.disabled||!1});return i.focusNode.setAttribute("role","option"),i}return new p({ownerDocument:this.ownerDocument})},_addOptionItem:function(t){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(t))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(t){}},focusChild:function(t){t&&this.set("value",t.option)},_getFirst:function(){var t=this._getChildren();return t.length?t[0]:null},_getLast:function(){var t=this._getChildren();return t.length?t[t.length-1]:null},childSelector:function(t){var t=_.byNode(t);return t&&t.getParent()==this.dropDown},onKeyboardSearch:function(t,e,i,o){t&&this.focusChild(t)},_loadChildren:function(e){if(!0===e)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{t.forEach(this._getChildren(),function(t){t.destroyRecursive()});var i=new f({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(i)}else this._updateSelection();this._isLoaded=!1,this._childrenLoaded=!0,this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments),this._refreshState()},_setValueAttr:function(t){this.inherited(arguments),i.set(this.valueNode,"value",this.get("value")),this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(t){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(t){this._set("required",t),this.focusNode.setAttribute("aria-required",t),this._refreshState()},_setOptionsAttr:function(t){this._isLoaded=!1,this._set("options",t)},_setDisplay:function(t){var e=("text"===this.labelType?(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):t)||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+e+"</span>"},validate:function(t){var e=this.disabled||this.isValid(t);this._set("state",e?"":this._hasBeenBlurred?"Error":"Incomplete"),this.focusNode.setAttribute("aria-invalid",e?"false":"true");var i=e?"":this._missingMsg;return i&&this.focused&&this._hasBeenBlurred?m.show(i,this.domNode,this.tooltipPosition,!this.isLeftToRight()):m.hide(this.domNode),this._set("message",i),e},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments),m.hide(this.domNode),this._refreshState()},postMixInProperties:function(){this.inherited(arguments),this._missingMsg=s.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments),this.own(d(this.domNode,"selectstart",function(t){t.preventDefault(),t.stopPropagation()})),this.domNode.setAttribute("aria-expanded","false");var t=this._keyNavCodes;delete t[r.LEFT_ARROW],delete t[r.RIGHT_ARROW]},_setStyleAttr:function(t){this.inherited(arguments),o.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(t){this._loadChildren(!0),this._isLoaded=!0,t()},destroy:function(t){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(t),delete this.dropDown),m.hide(this.domNode),this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){m.hide(this.domNode),this.inherited(arguments),this.validate(!1)}});function C(t){return function(e){this._isLoaded?this.inherited(t,arguments):this.loadDropDown(a.hitch(this,t,e))}}return h("dojo-bidi")&&(y=e("dijit.form.Select",y,{_setDisplay:function(t){this.inherited(arguments),this.applyTextDir(this.containerNode)}})),y._Menu=v,y.prototype._onContainerKeydown=C("_onContainerKeydown"),y.prototype._onContainerKeypress=C("_onContainerKeypress"),y}),t("dijit/form/HorizontalSlider",["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y){var C=e("dijit.form._SliderMover",l,{onMouseMove:function(t){var e=this.widget,i=e._abspos;i||(i=e._abspos=n.position(e.sliderBarContainer,!0),e._setPixelValue_=a.hitch(e,"_setPixelValue"),e._isReversed_=e._isReversed());var o=t[e._mousePixelCoord]-i[e._startingPixelCoord];e._setPixelValue_(e._isReversed_?i[e._pixelCount]-o:o,i[e._pixelCount],!1)},destroy:function(t){l.prototype.destroy.apply(this,arguments);var e=this.widget;e._abspos=null,e._setValueAttr(e.value,!0)}}),x=e("dijit.form.HorizontalSlider",[b,v],{templateString:y,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:1/0,pageIncrement:2,clickSelect:!0,slideDuration:p.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(t){this.disabled||this.readOnly||t.altKey||t.ctrlKey||t.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(t){if(!(this.disabled||this.readOnly||t.altKey||t.ctrlKey||t.metaKey)){switch(t.keyCode){case r.HOME:this._setValueAttr(this.minimum,!1);break;case r.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?r.RIGHT_ARROW:r.LEFT_ARROW:case!1===this._descending?r.DOWN_ARROW:r.UP_ARROW:case!1===this._descending?r.PAGE_DOWN:r.PAGE_UP:this.increment(t);break;case this._descending||this.isLeftToRight()?r.LEFT_ARROW:r.RIGHT_ARROW:case!1===this._descending?r.UP_ARROW:r.DOWN_ARROW:case!1===this._descending?r.PAGE_UP:r.PAGE_DOWN:this.decrement(t);break;default:return}t.stopPropagation(),t.preventDefault()}},_onHandleClick:function(t){this.disabled||this.readOnly||(d("ie")||m.focus(this.sliderHandle),t.stopPropagation(),t.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(t){if(!this.disabled&&!this.readOnly&&this.clickSelect){m.focus(this.sliderHandle),t.stopPropagation(),t.preventDefault();var e=n.position(this.sliderBarContainer,!0),i=t[this._mousePixelCoord]-e[this._startingPixelCoord];this._setPixelValue(this._isReversed()?e[this._pixelCount]-i:i,e[this._pixelCount],!0),this._movable.onMouseDown(t)}},_setPixelValue:function(t,e,i){if(!this.disabled&&!this.readOnly){var o=this.discreteValues;(o<=1||o==1/0)&&(o=e);var n=e/--o,s=Math.round(t/n);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*s/o+this.minimum,this.maximum),this.minimum),i)}},_setValueAttr:function(t,e){this._set("value",t),this.valueNode.value=t,this.focusNode.setAttribute("aria-valuenow",t),this.inherited(arguments);var i=this.maximum>this.minimum?(t-this.minimum)/(this.maximum-this.minimum):0,n=!1===this._descending?this.remainingBar:this.progressBar,s=!1===this._descending?this.progressBar:this.remainingBar;if(this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0),e&&this.slideDuration>0&&n.style[this._progressPixelSize]){var r=this,a={},d=parseFloat(n.style[this._progressPixelSize]),h=this.slideDuration*(i-d/100);if(0==h)return;h<0&&(h=0-h),a[this._progressPixelSize]={start:d,end:100*i,units:"%"},this._inProgressAnim=o.animateProperty({node:n,duration:h,onAnimate:function(t){s.style[r._progressPixelSize]=100-parseFloat(t[r._progressPixelSize])+"%"},onEnd:function(){delete r._inProgressAnim},properties:a}),this._inProgressAnim.play()}else n.style[this._progressPixelSize]=100*i+"%",s.style[this._progressPixelSize]=100*(1-i)+"%"},_bumpValue:function(t,e){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var i=s.getComputedStyle(this.sliderBarContainer),o=n.getContentBox(this.sliderBarContainer,i),r=this.discreteValues;(r<=1||r==1/0)&&(r=o[this._pixelCount]),r--;var a=(this.value-this.minimum)*r/(this.maximum-this.minimum)+t;a<0&&(a=0),a>r&&(a=r),a=a*(this.maximum-this.minimum)/r+this.minimum,this._setValueAttr(a,e)}},_onClkBumper:function(t){this.disabled||this.readOnly||!this.clickSelect||this._setValueAttr(t,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(t){this._bumpValue(t.keyCode==r.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(t){this._bumpValue(t.keyCode==r.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(t){t.stopPropagation(),t.preventDefault(),this._bumpValue(t.wheelDelta<0?-1:1,!0)},startup:function(){this._started||(t.forEach(this.getChildren(),function(t){this[t.container]!=this.containerNode&&this[t.container].appendChild(t.domNode)},this),this.inherited(arguments))},_typematicCallback:function(t,e,i){-1==t?this._setValueAttr(this.value,!0):this[e==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](i)},buildRendering:function(){this.inherited(arguments),this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var t=c('label[for="'+this.id+'"]');t.length&&(t[0].id||(t[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",t[0].id)),this.focusNode.setAttribute("aria-valuemin",this.minimum),this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments),this.showButtons&&this.own(g.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),g.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500)),this.own(f(this.domNode,u.wheel,a.hitch(this,"_mouseWheeled")));var t=e(C,{widget:this});this._movable=new h(this.sliderHandle,{mover:t}),this._layoutHackIE7()},destroy:function(){this._movable.destroy(),this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0),this.inherited(arguments)}});return x._Mover=C,x}),t("dijit/form/VerticalSlider",["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(t,e,i){return t("dijit.form.VerticalSlider",e,{templateString:i,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}})}),t("dijit/form/HorizontalRule",["dojo/_base/declare","../_Widget","../_TemplatedMixin"],function(t,e,i){return t("dijit.form.HorizontalRule",[e,i],{templateString:'<div class="dijitRuleContainer dijitRuleContainerH"></div>',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkH" style="left:',_positionSuffix:"%;",_suffix:'"></div>',_genHTML:function(t){return this._positionPrefix+t+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){var t;if(this.inherited(arguments),1==this.count)t=this._genHTML(50,0);else{var e,i=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){for(t=this._genHTML(0,0),e=1;e<this.count-1;e++)t+=this._genHTML(i*e,e);t+=this._genHTML(100,this.count-1)}else{for(t=this._genHTML(100,0),e=1;e<this.count-1;e++)t+=this._genHTML(100-i*e,e);t+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=t}})}),t("dijit/form/VerticalRule",["dojo/_base/declare","./HorizontalRule"],function(t,e){return t("dijit.form.VerticalRule",e,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV"></div>',_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkV" style="top:',_isHorizontal:!1})}),t("dijit/form/HorizontalRuleLabels",["dojo/_base/declare","dojo/has","dojo/number","dojo/query","dojo/_base/lang","./HorizontalRule"],function(t,e,i,o,n,s){var r=t("dijit.form.HorizontalRuleLabels",s,{templateString:'<div class="dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"></div>',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerH" style="left:',_labelPrefix:'"><div class="dijitRuleLabel dijitRuleLabelH">',_suffix:"</div></div>",_calcPosition:function(t){return t},_genHTML:function(t,e){var i=this.labels[e];return this._positionPrefix+this._calcPosition(t)+this._positionSuffix+this.labelStyle+this._genDirectionHTML(i)+this._labelPrefix+i+this._suffix},_genDirectionHTML:function(t){return""},getLabels:function(){var t=this.labels;if(!t.length&&this.srcNodeRef&&(t=o("> li",this.srcNodeRef).map(function(t){return String(t.innerHTML)})),!t.length&&this.count>1)for(var e=this.minimum,n=(this.maximum-e)/(this.count-1),s=0;s<this.count;s++)t.push(s<this.numericMargin||s>=this.count-this.numericMargin?"":i.format(e,this.constraints)),e+=n;return t},postMixInProperties:function(){this.inherited(arguments),this.labels=this.getLabels(),this.count=this.labels.length}});return e("dojo-bidi")&&r.extend({_setTextDirAttr:function(t){this.textDir!=t&&(this._set("textDir",t),o(".dijitRuleLabelContainer",this.domNode).forEach(n.hitch(this,function(t){t.style.direction=this.getTextDir(t.innerText||t.textContent||"")})))},_genDirectionHTML:function(t){return this.textDir?"direction:"+this.getTextDir(t)+";":""}}),r}),t("dijit/form/VerticalRuleLabels",["dojo/_base/declare","./HorizontalRuleLabels"],function(t,e){return t("dijit.form.VerticalRuleLabels",e,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV"></div>',_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerV" style="top:',_labelPrefix:'"><span class="dijitRuleLabel dijitRuleLabelV">',_calcPosition:function(t){return 100-t},_isHorizontal:!1})}),t("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(t,e,i,o){return t("dijit.form.SimpleTextarea",o,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),i("ie")&&this.cols&&e.add(this.textbox,"dijitTextAreaCols")},filter:function(t){return t&&(t=t.replace(/\r/g,"")),this.inherited(arguments)},_onInput:function(t){if(this.maxLength){var e=parseInt(this.maxLength),o=this.textbox.value.replace(/\r/g,""),n=o.length-e;if(n>0){var s=this.textbox;if(s.selectionStart){var r=s.selectionStart,a=0;i("opera")&&(a=(this.textbox.value.substring(0,r).match(/\r/g)||[]).length),this.textbox.value=o.substring(0,r-n-a)+o.substring(r-a),s.setSelectionRange(r-n,r-n)}else if(this.ownerDocument.selection){s.focus();var d=this.ownerDocument.selection.createRange();d.moveStart("character",-n),d.text="",d.select()}}}this.inherited(arguments)}})}),t("dijit/form/_ExpandingTextAreaMixin",["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/window","../Viewport"],function(t,e,i,o,n,s,r){return i.add("textarea-needs-help-shrinking",function(){var t=s.body(),i=e.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},t,"last"),o=i.scrollHeight>=i.clientHeight;return t.removeChild(i),o}),t("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments),this.resize()},postCreate:function(){this.inherited(arguments);var t=this.textbox;t.style.overflowY="hidden",this.own(n(t,"focus, resize",o.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments),this.own(r.on("resize",o.hitch(this,"_resizeLater"))),this._resizeLater()},_onInput:function(t){this.inherited(arguments),this.resize()},_estimateHeight:function(){var t=this.textbox;t.rows=(t.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){var t=this.textbox;function e(){var e=!1;""===t.value&&(t.value=" ",e=!0);var i=t.scrollHeight;return e&&(t.value=""),i}if("hidden"==t.style.overflowY&&(t.scrollTop=0),!this.busyResizing){if(this.busyResizing=!0,e()||t.offsetHeight){var o=e()+Math.max(t.offsetHeight-t.clientHeight,0),n=o+"px";if(n!=t.style.height&&(t.style.height=n,t.rows=1),i("textarea-needs-help-shrinking")){var s,r=e(),a=r,d=t.style.minHeight,h=4,l=t.scrollTop;for(t.style.minHeight=n,t.style.height="auto";o>0;){t.style.minHeight=Math.max(o-h,4)+"px",s=e();var c=a-s;if(o-=c,c<h)break;a=s,h<<=1}t.style.height=o+"px",t.style.minHeight=d,t.scrollTop=l}t.style.overflowY=e()>t.clientHeight?"auto":"hidden","hidden"==t.style.overflowY&&(t.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})}),t("dijit/form/Textarea",["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(t,e,i,o){return t("dijit.form.Textarea",[o,i],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments),e.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})}),t("dijit/layout/StackContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget"],function(t,i,o,n,s,r,a,d,h,l,c,u,f,p){r("dijit-legacy-requires")&&h(0,function(){e(["dijit/layout/StackController"])});var m=o("dijit.layout.StackContainer",p,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments),n.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments),this.own(d(this.domNode,"keydown",a.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var e=this.getChildren();t.forEach(e,this._setupChild,this),this.persist?this.selectedChildWidget=u.byId(i(this.id+"_selectedChild")):t.some(e,function(t){return t.selected&&(this.selectedChildWidget=t),t.selected},this);var o=this.selectedChildWidget;!o&&e[0]&&((o=this.selectedChildWidget=e[0]).selected=!0),l.publish(this.id+"-startup",{children:e,selected:o,textDir:this.textDir}),this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var t=this.selectedChildWidget;t&&this._showChild(t)}this.inherited(arguments)},_setupChild:function(t){var e=t.domNode,i=s.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",t.domNode,"replace"),o=t["aria-label"]||t.title||t.label;o&&i.setAttribute("aria-label",o),s.place(e,i),t._wrapper=i,this.inherited(arguments),"none"==e.style.display&&(e.style.display="block"),t.domNode.removeAttribute("title")},addChild:function(t,e){this.inherited(arguments),this._started&&(l.publish(this.id+"-addChild",t,e),this.layout(),this.selectedChildWidget||this.selectChild(t))},removeChild:function(e){var i=t.indexOf(this.getChildren(),e);if(this.inherited(arguments),s.destroy(e._wrapper),delete e._wrapper,this._started&&l.publish(this.id+"-removeChild",e),!this._descendantsBeingDestroyed){if(this.selectedChildWidget===e&&(this.selectedChildWidget=void 0,this._started)){var o=this.getChildren();o.length&&this.selectChild(o[Math.max(i-1,0)])}this._started&&this.layout()}},selectChild:function(t,e){var o;return t=u.byId(t),this.selectedChildWidget!=t&&(o=this._transition(t,this.selectedChildWidget,e),this._set("selectedChildWidget",t),l.publish(this.id+"-selectChild",t),this.persist&&i(this.id+"_selectedChild",this.selectedChildWidget.id)),c(o||!0)},_transition:function(t,e){e&&this._hideChild(e);var i=this._showChild(t);return t.resize&&(this.doLayout?t.resize(this._containerContentBox||this._contentBox):t.resize()),i},_adjacent:function(e){var i=this.getChildren(),o=t.indexOf(i,this.selectedChildWidget);return o+=e?1:i.length-1,i[o%i.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(t){l.publish(this.id+"-containerKeyDown",{e:t,page:this})},layout:function(){var t=this.selectedChildWidget;t&&t.resize&&(this.doLayout?t.resize(this._containerContentBox||this._contentBox):t.resize())},_showChild:function(t){var e=this.getChildren();return t.isFirstChild=t==e[0],t.isLastChild=t==e[e.length-1],t._set("selected",!0),t._wrapper&&n.replace(t._wrapper,"dijitVisible","dijitHidden"),t._onShow&&t._onShow()||!0},_hideChild:function(t){t._set("selected",!1),t._wrapper&&n.replace(t._wrapper,"dijitHidden","dijitVisible"),t.onHide&&t.onHide()},closeChild:function(t){var e=t.onClose&&t.onClose(this,t);e&&(this.removeChild(t),t.destroyRecursive())},destroyDescendants:function(e){this._descendantsBeingDestroyed=!0,this.selectedChildWidget=void 0,t.forEach(this.getChildren(),function(t){e||this.removeChild(t),t.destroyRecursive(e)},this),this._descendantsBeingDestroyed=!1}});return m.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0},a.extend(f,m.ChildWidgetProperties),m}),t("dijit/layout/AccordionContainer",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v,y,C,x){var j=i("dijit.layout._AccordionButton",[g,b,v],{templateString:x,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var t=this.id.replace(" ","_");s.set(this.titleTextNode,"id",t+"_title"),this.focusNode.setAttribute("aria-labelledby",s.get(this.titleTextNode,"id")),n.setSelectable(this.domNode,!1)},getTitleHeight:function(){return d.getMarginSize(this.domNode).h},_onTitleClick:function(){var t=this.getParent();t.selectChild(this.contentWidget,!0),f.focus(this.focusNode)},_onTitleKeyDown:function(t){return this.getParent()._onKeyDown(t,this.contentWidget)},_setSelectedAttr:function(t){this._set("selected",t),this.focusNode.setAttribute("aria-expanded",t?"true":"false"),this.focusNode.setAttribute("aria-selected",t?"true":"false"),this.focusNode.setAttribute("tabIndex",t?"0":"-1")}});c("dojo-bidi")&&j.extend({_setLabelAttr:function(t){this._set("label",t),s.set(this.titleTextNode,"innerHTML",t),this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(t){this._set("title",t),s.set(this.titleTextNode,"title",t),this.applyTextDir(this.titleTextNode)}});var N=i("dijit.layout._AccordionInnerContainer"+(c("dojo-bidi")?"_NoBidi":""),[g,v],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=a.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var t=this.contentWidget,e=l.isString(this.buttonWidget)?l.getObject(this.buttonWidget):this.buttonWidget;this.button=t._buttonWidget=new e({contentWidget:t,label:t.title,title:t.tooltip,dir:t.dir,lang:t.lang,textDir:t.textDir||this.textDir,iconClass:t.iconClass,id:t.id+"_button",parent:this.parent}).placeAt(this.domNode),this.containerNode=a.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode),this.containerNode.setAttribute("aria-labelledby",this.button.id),a.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var t=this.button,e=this.contentWidget;this._contentWidgetWatches=[e.watch("title",l.hitch(this,function(e,i,o){t.set("label",o)})),e.watch("tooltip",l.hitch(this,function(e,i,o){t.set("title",o)})),e.watch("iconClass",l.hitch(this,function(e,i,o){t.set("iconClass",o)}))]},_setSelectedAttr:function(t){if(this._set("selected",t),this.button.set("selected",t),t){var e=this.contentWidget;e.onSelected&&e.onSelected()}},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive(),e.forEach(this._contentWidgetWatches||[],function(t){t.unwatch()}),delete this.contentWidget._buttonWidget,delete this.contentWidget._wrapperWidget,this.inherited(arguments)},destroyDescendants:function(t){this.contentWidget.destroyRecursive(t)}});c("dojo-bidi")&&(N=i("dijit.layout._AccordionInnerContainer",N,{postCreate:function(){this.inherited(arguments);var t=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(e,i,o){t.set("textDir",o)}))}}));var w=i("dijit.layout.AccordionContainer",y,{duration:p.defaultDuration,buttonWidget:j,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments),this.domNode.style.overflow="hidden",this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var t=this.selectedChildWidget;if(t){var i=t._wrapperWidget.domNode,o=d.getMarginExtents(i),n=d.getPadBorderExtents(i),s=t._wrapperWidget.containerNode,r=d.getMarginExtents(s),a=d.getPadBorderExtents(s),h=this._contentBox,l=0;e.forEach(this.getChildren(),function(e){e!=t&&(l+=d.getMarginSize(e._wrapperWidget.domNode).h)}),this._verticalSpace=h.h-l-o.h-n.h-r.h-a.h-t._buttonWidget.getTitleHeight(),this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-o.w-n.w-r.w-a.w},t&&t.resize(this._containerContentBox)}},_setupChild:function(t){t._wrapperWidget=N({contentWidget:t,buttonWidget:this.buttonWidget,id:t.id+"_wrapper",dir:t.dir,lang:t.lang,textDir:t.textDir||this.textDir,parent:this}),this.inherited(arguments),a.place(t.domNode,t._wrapper,"replace")},removeChild:function(t){t._wrapperWidget&&(a.place(t.domNode,t._wrapperWidget.domNode,"after"),t._wrapperWidget.destroy(),delete t._wrapperWidget),r.remove(t.domNode,"dijitHidden"),this.inherited(arguments)},getChildren:function(){return e.map(this.inherited(arguments),function(t){return"dijit.layout._AccordionInnerContainer"==t.declaredClass?t.contentWidget:t},this)},destroy:function(){this._animation&&this._animation.stop(),e.forEach(this.getChildren(),function(t){t._wrapperWidget?t._wrapperWidget.destroy():t.destroyRecursive()}),this.inherited(arguments)},_showChild:function(t){return t._wrapperWidget.containerNode.style.display="block",this.inherited(arguments)},_hideChild:function(t){t._wrapperWidget.containerNode.style.display="none",this.inherited(arguments)},_transition:function(t,e,i){c("ie")<8&&(i=!1),this._animation&&(this._animation.stop(!0),delete this._animation);var n=this;if(t){t._wrapperWidget.set("selected",!0);var s=this._showChild(t);this.doLayout&&t.resize&&t.resize(this._containerContentBox)}if(e&&(e._wrapperWidget.set("selected",!1),i||this._hideChild(e)),i){var r=t._wrapperWidget.containerNode,a=e._wrapperWidget.containerNode,h=t._wrapperWidget.containerNode,l=d.getMarginExtents(h),u=d.getPadBorderExtents(h),f=l.h+u.h;a.style.height=n._verticalSpace-f+"px",this._animation=new o.Animation({node:r,duration:this.duration,curve:[1,this._verticalSpace-f-1],onAnimate:function(t){t=Math.floor(t),r.style.height=t+"px",a.style.height=n._verticalSpace-f-t+"px"},onEnd:function(){delete n._animation,r.style.height="auto",e._wrapperWidget.containerNode.style.display="none",a.style.height="auto",n._hideChild(e)}}),this._animation.onStop=this._animation.onEnd,this._animation.play()}return s},_onKeyDown:function(t,e){if(!this.disabled&&!t.altKey&&(e||t.ctrlKey)){var i=t.keyCode;e&&(i==h.LEFT_ARROW||i==h.UP_ARROW)||t.ctrlKey&&i==h.PAGE_UP?(this._adjacent(!1)._buttonWidget._onTitleClick(),t.stopPropagation(),t.preventDefault()):(e&&(i==h.RIGHT_ARROW||i==h.DOWN_ARROW)||t.ctrlKey&&(i==h.PAGE_DOWN||i==h.TAB))&&(this._adjacent(!0)._buttonWidget._onTitleClick(),t.stopPropagation(),t.preventDefault())}}});return c("dijit-legacy-requires")&&m(0,function(){t(["dijit/layout/AccordionPane"])}),w._InnerContainer=N,w._Button=j,w}),t("dijit/layout/LayoutContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/_base/lang","../_WidgetBase","./_LayoutWidget","./utils"],function(t,e,i,o,n,s,r,a){var d=e("dijit.layout.LayoutContainer",r,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(t.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(t){this.inherited(arguments);var e=t.region;e&&i.add(t.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var e=t.map(this.getChildren(),function(t,e){return{pane:t,weight:["center"==t.region?1/0:0,t.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(t.region)?1:-1),e]}},this);return e.sort(function(t,e){for(var i=t.weight,o=e.weight,n=0;n<i.length;n++)if(i[n]!=o[n])return i[n]-o[n];return 0}),t.map(e,function(t){return t.pane})},layout:function(){a.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(t,e){this.inherited(arguments),this._started&&this.layout()},removeChild:function(t){this.inherited(arguments),this._started&&this.layout(),i.remove(t.domNode,this.baseClass+"Pane"),o.set(t.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"}),o.set(t.domNode,/top|bottom/.test(t.region)?"width":"height","auto")}});return d.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0},n.extend(s,d.ChildWidgetProperties),d}),t("dijit/layout/BorderContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){var g=i("dijit.layout._Splitter",[u,f],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region),this._factor=/top|left/.test(this.region)?1:-1,this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){if(this.inherited(arguments),o.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")),this.container.persist){var t=e(this._cookieName);t&&(this.child.domNode.style[this.horizontal?"height":"width"]=t)}},_computeMaxSize:function(){var e=this.horizontal?"h":"w",i=s.getMarginBox(this.child.domNode)[e],o=t.filter(this.container.getChildren(),function(t){return"center"==t.region})[0],n=s.getContentBox(o.domNode)[e]-10;return Math.min(this.child.maxSize,i+n)},_startDrag:function(t){this.cover||(this.cover=n.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after")),o.add(this.cover,"dijitSplitterCoverActive"),this.fake&&n.destroy(this.fake),(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),o.add(this.domNode,"dijitSplitterShadow"),n.place(this.fake,this.domNode,"after")),o.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active"),this.fake&&o.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var e=this._factor,i=this.horizontal,a=i?"pageY":"pageX",c=t[a],u=this.domNode.style,f=i?"h":"w",p=r.getComputedStyle(this.child.domNode),m=s.getMarginBox(this.child.domNode,p)[f],g=this._computeMaxSize(),_=Math.max(this.child.minSize,s.getPadBorderExtents(this.child.domNode,p)[f]+10),b=this.region,v="top"==b||"bottom"==b?"top":"left",y=parseInt(u[v],10),C=this._resize,x=d.hitch(this.container,"_layoutChildren",this.child.id),j=this.ownerDocument;this._handlers=this._handlers.concat([h(j,l.move,this._drag=function(t,i){var o=t[a]-c,n=e*o+m,s=Math.max(Math.min(n,g),_);(C||i)&&x(s),u[v]=o+y+e*(s-n)+"px"}),h(j,"dragstart",function(t){t.stopPropagation(),t.preventDefault()}),h(this.ownerDocumentBody,"selectstart",function(t){t.stopPropagation(),t.preventDefault()}),h(j,l.release,d.hitch(this,"_stopDrag"))]),t.stopPropagation(),t.preventDefault()},_onMouse:function(t){var e="mouseover"==t.type||"mouseenter"==t.type;o.toggle(this.domNode,"dijitSplitterHover",e),o.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",e)},_stopDrag:function(t){try{this.cover&&o.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&n.destroy(this.fake),o.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(t),this._drag(t,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&e(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var t;t=this._handlers.pop();)t.remove()},_onKeyDown:function(t){this._resize=!0;var e=this.horizontal,i=1;switch(t.keyCode){case e?a.UP_ARROW:a.LEFT_ARROW:i*=-1;case e?a.DOWN_ARROW:a.RIGHT_ARROW:break;default:return}var o=s.getMarginSize(this.child.domNode)[e?"h":"w"]+this._factor*i;this.container._layoutChildren(this.child.id,Math.max(Math.min(o,this._computeMaxSize()),this.child.minSize)),t.stopPropagation(),t.preventDefault()},destroy:function(){this._cleanupHandlers(),delete this.child,delete this.container,delete this.cover,delete this.fake,this.inherited(arguments)}}),_=i("dijit.layout._Gutter",[u,f],{templateString:'<div class="dijitGutter" role="presentation"></div>',postMixInProperties:function(){this.inherited(arguments),this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments),o.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),b=i("dijit.layout.BorderContainer",p,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:g,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter"),this.inherited(arguments)},_setupChild:function(t){this.inherited(arguments);var e=t.region,i=t.isLeftToRight();if("leading"==e&&(e=i?"left":"right"),"trailing"==e&&(e=i?"right":"left"),e&&"center"!=e&&(t.splitter||this.gutters)&&!t._splitterWidget){var o=t.splitter?this._splitterClass:_;d.isString(o)&&(o=d.getObject(o));var s=new o({id:t.id+"_splitter",container:this,child:t,region:e,live:this.liveSplitters});s.isSplitter=!0,t._splitterWidget=s;var r="bottom"==e||e==(this.isLeftToRight()?"right":"left");n.place(s.domNode,t.domNode,r?"before":"after"),s.startup()}},layout:function(){this._layoutChildren()},removeChild:function(t){var e=t._splitterWidget;e&&(e.destroy(),delete t._splitterWidget),this.inherited(arguments)},getChildren:function(){return t.filter(this.inherited(arguments),function(t){return!t.isSplitter})},getSplitter:function(e){return t.filter(this.getChildren(),function(t){return t.region==e})[0]._splitterWidget},resize:function(t,e){if(!this.cs||!this.pe){var i=this.domNode;this.cs=r.getComputedStyle(i),this.pe=s.getPadExtents(i,this.cs),this.pe.r=r.toPixelValue(i,this.cs.paddingRight),this.pe.b=r.toPixelValue(i,this.cs.paddingBottom),r.set(i,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(e,i){if(this._borderBox&&this._borderBox.h){var o=[];t.forEach(this._getOrderedChildren(),function(t){o.push(t),t._splitterWidget&&o.push(t._splitterWidget)});var n={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};m.layoutChildren(this.domNode,n,o,e,i)}},destroyRecursive:function(){t.forEach(this.getChildren(),function(t){var e=t._splitterWidget;e&&e.destroy(),delete t._splitterWidget}),this.inherited(arguments)}});return b.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:1/0},d.mixin(b.ChildWidgetProperties,p.ChildWidgetProperties),d.extend(c,b.ChildWidgetProperties),b._Splitter=g,b._Gutter=_,b}),t("dijit/layout/LinkPane",["./ContentPane","../_TemplatedMixin","dojo/_base/declare"],function(t,e,i){return i("dijit.layout.LinkPane",[t,e],{templateString:'<div class="dijitLinkPane" data-dojo-attach-point="containerNode"></div>',postMixInProperties:function(){this.srcNodeRef&&(this.title+=this.srcNodeRef.innerHTML),this.inherited(arguments)},_fillContent:function(){}})}),t("dijit/layout/SplitContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","../registry","../_WidgetBase","./_LayoutWidget"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){var g=i("dijit.layout.SplitContainer",m,{constructor:function(){h.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",2)},activeSizing:!1,sizerWidth:7,orientation:"horizontal",persist:!0,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments),this.isHorizontal="horizontal"==this.orientation},postCreate:function(){if(this.inherited(arguments),this.sizers=[],u("mozilla")&&(this.domNode.style.overflow="-moz-scrollbars-none"),"object"==typeof this.sizerWidth)try{this.sizerWidth=parseInt(this.sizerWidth.toString())}catch(t){this.sizerWidth=7}var t=this.ownerDocument.createElement("div");this.virtualSizer=t,t.style.position="relative",t.style.zIndex=10,t.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV",this.domNode.appendChild(t),o.setSelectable(t,!1)},destroy:function(){if(delete this.virtualSizer,this._ownconnects)for(var t;t=this._ownconnects.pop();)t.remove();this.inherited(arguments)},startup:function(){this._started||(t.forEach(this.getChildren(),function(t,e,i){this._setupChild(t),e<i.length-1&&this._addSizer()},this),this.persist&&this._restoreState(),this.inherited(arguments))},_setupChild:function(t){this.inherited(arguments),t.domNode.style.position="absolute",n.add(t.domNode,"dijitSplitPane")},_onSizerMouseDown:function(t){if(t.target.id){for(var e=0;e<this.sizers.length&&this.sizers[e].id!=t.target.id;e++);e<this.sizers.length&&this.beginSizing(t,e)}},_addSizer:function(t){t=void 0===t?this.sizers.length:t;var e=this.ownerDocument.createElement("div");e.id=f.getUniqueId("dijit_layout_SplitterContainer_Splitter"),this.sizers.splice(t,0,e),this.domNode.appendChild(e),e.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var i=this.ownerDocument.createElement("div");i.className="thumb",e.appendChild(i),this.connect(e,"onmousedown","_onSizerMouseDown"),o.setSelectable(e,!1)},removeChild:function(e){if(this.sizers.length){var i=t.indexOf(this.getChildren(),e);-1!=i&&(i==this.sizers.length&&i--,s.destroy(this.sizers[i]),this.sizers.splice(i,1))}this.inherited(arguments),this._started&&this.layout()},addChild:function(t,e){if(void 0!==e&&"last"!=e||(e=this.getChildren().length),this.inherited(arguments,[t,e]),this._started){var i=this.getChildren();i.length>1&&this._addSizer(e),this.layout()}},layout:function(){this.paneWidth=this._contentBox.w,this.paneHeight=this._contentBox.h;var e=this.getChildren();if(e.length){var i=this.isHorizontal?this.paneWidth:this.paneHeight;e.length>1&&(i-=this.sizerWidth*(e.length-1));var o=0;t.forEach(e,function(t){o+=t.sizeShare});var n=i/o,s=0;t.forEach(e.slice(0,e.length-1),function(t){var e=Math.round(n*t.sizeShare);t.sizeActual=e,s+=e}),e[e.length-1].sizeActual=i-s,this._checkSizes();var r=0,a=e[0].sizeActual;this._movePanel(e[0],r,a),e[0].position=r,r+=a,this.sizers&&t.some(e.slice(1),function(t,e){if(!this.sizers[e])return!0;this._moveSlider(this.sizers[e],r,this.sizerWidth),this.sizers[e].position=r,r+=this.sizerWidth,a=t.sizeActual,this._movePanel(t,r,a),t.position=r,r+=a},this)}},_movePanel:function(t,e,i){var o;this.isHorizontal?(t.domNode.style.left=e+"px",t.domNode.style.top=0,o={w:i,h:this.paneHeight},t.resize?t.resize(o):r.setMarginBox(t.domNode,o)):(t.domNode.style.left=0,t.domNode.style.top=e+"px",o={w:this.paneWidth,h:i},t.resize?t.resize(o):r.setMarginBox(t.domNode,o))},_moveSlider:function(t,e,i){this.isHorizontal?(t.style.left=e+"px",t.style.top=0,r.setMarginBox(t,{w:i,h:this.paneHeight})):(t.style.left=0,t.style.top=e+"px",r.setMarginBox(t,{w:this.paneWidth,h:i}))},_growPane:function(t,e){return t>0&&e.sizeActual>e.sizeMin&&(e.sizeActual-e.sizeMin>t?(e.sizeActual=e.sizeActual-t,t=0):(t-=e.sizeActual-e.sizeMin,e.sizeActual=e.sizeMin)),t},_checkSizes:function(){var e=0,i=0,o=this.getChildren();if(t.forEach(o,function(t){i+=t.sizeActual,e+=t.sizeMin}),e<=i){var n=0;if(t.forEach(o,function(t){t.sizeActual<t.sizeMin&&(n+=t.sizeMin-t.sizeActual,t.sizeActual=t.sizeMin)}),n>0){var s=this.isDraggingLeft?o.reverse():o;t.forEach(s,function(t){n=this._growPane(n,t)},this)}}else t.forEach(o,function(t){t.sizeActual=Math.round(i*(t.sizeMin/e))})},beginSizing:function(t,e){var i=this.getChildren();this.paneBefore=i[e],this.paneAfter=i[e+1],this.paneBefore.sizeBeforeDrag=this.paneBefore.sizeActual,this.paneAfter.sizeBeforeDrag=this.paneAfter.sizeActual,this.paneAfter.positionBeforeDrag=this.paneAfter.position,this.isSizing=!0,this.sizingSplitter=this.sizers[e],this.sizingSplitter.positionBeforeDrag=a.get(this.sizingSplitter,this.isHorizontal?"left":"top"),this.cover?this.cover.style.zIndex=5:this.cover=s.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode),this.sizingSplitter.style.zIndex=6,this.startPoint=this.lastPoint=this.isHorizontal?t.pageX:t.pageY,this.maxDelta=this.paneAfter.sizeActual-this.paneAfter.sizeMin,this.minDelta=-1*(this.paneBefore.sizeActual-this.paneBefore.sizeMin),this.activeSizing||this._showSizingLine(),this._ownconnects=[c(this.ownerDocument.documentElement,"mousemove",l.hitch(this,"changeSizing")),c(this.ownerDocument.documentElement,"mouseup",l.hitch(this,"endSizing"))],d.stop(t)},changeSizing:function(t){if(this.isSizing){this.lastPoint=this.isHorizontal?t.pageX:t.pageY;var e=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);this.activeSizing?this._updateSize(e):this._moveSizingLine(e),d.stop(t)}},endSizing:function(){if(this.isSizing){this.cover&&(this.cover.style.zIndex=-1),this.activeSizing||this._hideSizingLine();var t,e=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);for(this._updateSize(e),this.isSizing=!1,this.persist&&this._saveState(this);t=this._ownconnects.pop();)t.remove()}},_updateSize:function(e){this.paneBefore.sizeActual=this.paneBefore.sizeBeforeDrag+e,this.paneAfter.position=this.paneAfter.positionBeforeDrag+e,this.paneAfter.sizeActual=this.paneAfter.sizeBeforeDrag-e,t.forEach(this.getChildren(),function(t){t.sizeShare=t.sizeActual}),this._started&&this.layout()},_showSizingLine:function(){this._moveSizingLine(0),r.setMarginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth}),this.virtualSizer.style.display="block"},_hideSizingLine:function(){this.virtualSizer.style.display="none"},_moveSizingLine:function(t){var e=t+this.sizingSplitter.positionBeforeDrag;a.set(this.virtualSizer,this.isHorizontal?"left":"top",e+"px")},_getCookieName:function(t){return this.id+"_"+t},_restoreState:function(){t.forEach(this.getChildren(),function(t,i){var o=this._getCookieName(i),n=e(o);if(n){var s=parseInt(n);"number"==typeof s&&(t.sizeShare=s)}},this)},_saveState:function(){this.persist&&t.forEach(this.getChildren(),function(t,i){e(this._getCookieName(i),t.sizeShare,{expires:365})},this)}});return g.ChildWidgetProperties={sizeMin:10,sizeShare:10},l.extend(p,g.ChildWidgetProperties),g}),t("dijit/layout/_TabContainerBase",["dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","./StackContainer","./utils","../registry","../_TemplatedMixin","dojo/text!./templates/TabContainer.html"],function(t,e,i,o,n,s,r,a,d){return t("dijit.layout._TabContainerBase",[n,a],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:d,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,""),this.srcNodeRef&&o.set(this.srcNodeRef,"visibility","hidden"),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.tablist=this._makeController(this.tablistNode),this.doLayout||e.add(this.domNode,"dijitTabContainerNoLayout"),this.nested?(e.add(this.domNode,"dijitTabContainerNested"),e.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),e.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),e.add(this.containerNode,"dijitTabPaneWrapperNested")):e.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(t){e.add(t.domNode,"dijitTabPane"),this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&void 0!==this._contentBox.l){var t=this.selectedChildWidget;if(this.doLayout){var e=this.tabPosition.replace(/-h/,"");this.tablist.region=e;var o=[this.tablist,{domNode:this.tablistSpacer,region:e},{domNode:this.containerNode,region:"center"}];s.layoutChildren(this.domNode,this._contentBox,o),this._containerContentBox=s.marginBox2contentBox(this.containerNode,o[2]),t&&t.resize&&t.resize(this._containerContentBox)}else{if(this.tablist.resize){var n=this.tablist.domNode.style;n.width="0";var r=i.getContentBox(this.domNode).w;n.width="",this.tablist.resize({w:r})}t&&t.resize&&t.resize()}}},destroy:function(t){this.tablist&&this.tablist.destroy(t),this.inherited(arguments)},selectChild:function(t,e){return this._focused&&(t=r.byId(t),this.tablist.pane2button(t.id).focus()),this.inherited(arguments)}})}),t("dijit/layout/StackController",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f){var p=e("dijit.layout._StackButton",f,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(t){this.inherited(arguments),(this.focusNode||this.domNode).setAttribute("role","tab")}}),m=e("dijit.layout.StackController",[l,c,u],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:p,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(t){return h.byId(this.id+"_"+t)},postCreate:function(){this.inherited(arguments),this.own(a.subscribe(this.containerId+"-startup",s.hitch(this,"onStartup")),a.subscribe(this.containerId+"-addChild",s.hitch(this,"onAddChild")),a.subscribe(this.containerId+"-removeChild",s.hitch(this,"onRemoveChild")),a.subscribe(this.containerId+"-selectChild",s.hitch(this,"onSelectChild")),a.subscribe(this.containerId+"-containerKeyDown",s.hitch(this,"onContainerKeyDown"))),this.containerNode.dojoClick=!0,this.own(r(this.containerNode,"click",s.hitch(this,function(t){var e=h.getEnclosingWidget(t.target);if(e!=this.containerNode&&!e.disabled&&e.page)for(var o=t.target;o!==this.containerNode;o=o.parentNode){if(i.contains(o,this.buttonWidgetCloseClass)){this.onCloseButtonClick(e.page);break}if(o==e.domNode){this.onButtonClick(e.page);break}}})))},onStartup:function(e){this.textDir=e.textDir,t.forEach(e.children,this.onAddChild,this),e.selected&&this.onSelectChild(e.selected);var i=h.byId(this.containerId).containerNode,o=s.hitch(this,"pane2button"),n={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"},a=function(t,e){return r(i,"attrmodified-"+t,function(t){var i=o(t.detail&&t.detail.widget&&t.detail.widget.id);i&&i.set(e,t.detail.newValue)})};for(var d in n)this.own(a(d,n[d]))},destroy:function(t){this.destroyDescendants(t),this.inherited(arguments)},onAddChild:function(t,e){var i=s.isString(this.buttonWidget)?s.getObject(this.buttonWidget):this.buttonWidget,o=new i({id:this.id+"_"+t.id,name:this.id+"_"+t.id,label:t.title,disabled:t.disabled,ownerDocument:this.ownerDocument,dir:t.dir,lang:t.lang,textDir:t.textDir||this.textDir,showLabel:t.showTitle,iconClass:t.iconClass,closeButton:t.closable,title:t.tooltip,page:t});this.addChild(o,e),t.controlButton=o,this._currentChild||this.onSelectChild(t);var n=t._wrapper.getAttribute("aria-labelledby")?t._wrapper.getAttribute("aria-labelledby")+" "+o.id:o.id;t._wrapper.removeAttribute("aria-label"),t._wrapper.setAttribute("aria-labelledby",n)},onRemoveChild:function(t){this._currentChild===t&&(this._currentChild=null);var e=this.pane2button(t.id);e&&(this.removeChild(e),e.destroy()),delete t.controlButton},onSelectChild:function(t){if(t){if(this._currentChild){var e=this.pane2button(this._currentChild.id);e.set("checked",!1),e.focusNode.setAttribute("tabIndex","-1")}var i=this.pane2button(t.id);i.set("checked",!0),this._currentChild=t,i.focusNode.setAttribute("tabIndex","0");h.byId(this.containerId)}},onButtonClick:function(t){var e=this.pane2button(t.id);d.focus(e.focusNode),this._currentChild&&this._currentChild.id===t.id&&e.set("checked",!0);var i=h.byId(this.containerId);i.selectChild(t)},onCloseButtonClick:function(t){var e=h.byId(this.containerId);if(e.closeChild(t),this._currentChild){var i=this.pane2button(this._currentChild.id);i&&d.focus(i.focusNode||i.domNode)}},adjacent:function(e){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(e=!e);var i,o=this.getChildren(),n=t.indexOf(o,this.pane2button(this._currentChild.id)),s=o[n];do{n=(n+(e?1:o.length-1))%o.length,i=o[n]}while(i.disabled&&i!=s);return i},onkeydown:function(t,e){if(!this.disabled&&!t.altKey){var i=null;if(t.ctrlKey||!t._djpage){switch(t.keyCode){case n.LEFT_ARROW:case n.UP_ARROW:t._djpage||(i=!1);break;case n.PAGE_UP:t.ctrlKey&&(i=!1);break;case n.RIGHT_ARROW:case n.DOWN_ARROW:t._djpage||(i=!0);break;case n.PAGE_DOWN:t.ctrlKey&&(i=!0);break;case n.HOME:for(var o=this.getChildren(),s=0;s<o.length;s++){var r=o[s];if(!r.disabled){this.onButtonClick(r.page);break}}t.stopPropagation(),t.preventDefault();break;case n.END:for(var o=this.getChildren(),s=o.length-1;s>=0;s--){var r=o[s];if(!r.disabled){this.onButtonClick(r.page);break}}t.stopPropagation(),t.preventDefault();break;case n.DELETE:case"W".charCodeAt(0):this._currentChild.closable&&(t.keyCode==n.DELETE||t.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),t.stopPropagation(),t.preventDefault());break;case n.TAB:t.ctrlKey&&(this.onButtonClick(this.adjacent(!t.shiftKey).page),t.stopPropagation(),t.preventDefault())}null!==i&&(this.onButtonClick(this.adjacent(i).page),t.stopPropagation(),t.preventDefault())}}},onContainerKeyDown:function(t){t.e._djpage=t.page,this.onkeydown(t.e)}});return m.StackButton=p,m}),t("dijit/layout/TabController",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/has","dojo/i18n","dojo/_base/lang","./StackController","../registry","../Menu","../MenuItem","dojo/text!./templates/_TabButton.html","dojo/i18n!../nls/common"],function(t,e,i,o,n,s,r,a,d,h,l,c){var u=t("dijit.layout._TabButton"+(n("dojo-bidi")?"_NoBidi":""),a.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:c,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments),e.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var t=this.domNode;this.defer(function(){t.className=t.className},1)},_setCloseButtonAttr:function(t){if(this._set("closeButton",t),o.toggle(this.domNode,"dijitClosable",t),this.closeNode.style.display=t?"":"none",t){var e=s.getLocalization("dijit","common");this.closeNode&&i.set(this.closeNode,"title",e.itemClose)}},_setDisabledAttr:function(t){if(this.inherited(arguments),this.closeNode)if(t)i.remove(this.closeNode,"title");else{var e=s.getLocalization("dijit","common");i.set(this.closeNode,"title",e.itemClose)}},_setLabelAttr:function(t){this.inherited(arguments),this.showLabel||this.params.title||(this.iconNode.alt=r.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});n("dojo-bidi")&&(u=t("dijit.layout._TabButton",u,{_setLabelAttr:function(t){this.inherited(arguments),this.applyTextDir(this.iconNode,this.iconNode.alt)}}));var f=t("dijit.layout.TabController",a,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:u,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var t=new h({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(t){return o.contains(t,"dijitClosable")&&!o.contains(t,"dijitTabDisabled")}});this.own(t);var e=s.getLocalization("dijit","common"),i=this;t.addChild(new l({label:e.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(t){var e=d.byNode(this.getParent().currentTarget);i.onCloseButtonClick(e.page)}}))}});return f.TabButton=u,f}),t("dijit/layout/ScrollingTabController",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/_base/lang","dojo/on","dojo/query","dojo/sniff","../registry","dojo/text!./templates/ScrollingTabController.html","dojo/text!./templates/_ScrollingTabControllerButton.html","./TabController","./utils","../_WidgetsInTemplateMixin","../Menu","../MenuItem","../form/Button","../_HasDropDown","dojo/NodeList-dom","../a11yclick"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_,b,v){var y=e("dijit.layout.ScrollingTabController",[f,m],{baseClass:"dijitTabController dijitScrollingTabController",templateString:c,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var t=this.domNode;this.scrollNode=this.tablistWrapper,this._initButtons(),this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None",i.add(t,"tabStrip-disabled")),i.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments),n.set(this.domNode,"visibility",""),this._postStartup=!0,this.own(a(this.containerNode,"attrmodified-label, attrmodified-iconclass",r.hitch(this,function(t){this._dim&&this.resize(this._dim)})))},onAddChild:function(t,e){this.inherited(arguments),n.set(this.containerNode,"width",n.get(this.containerNode,"width")+200+"px")},onRemoveChild:function(t,e){var i=this.pane2button(t.id);this._selectedTab===i.domNode&&(this._selectedTab=null),this.inherited(arguments)},_initButtons:function(){this._btnWidth=0,this._buttons=d("> .tabStripButton",this.domNode).filter(function(t){return this.useMenu&&t==this._menuBtn.domNode||this.useSlider&&(t==this._rightBtn.domNode||t==this._leftBtn.domNode)?(this._btnWidth+=o.getMarginSize(t).w,!0):(n.set(t,"display","none"),!1)},this)},_getTabsWidth:function(){var t=this.getChildren();if(t.length){var e=t[this.isLeftToRight()?0:t.length-1].domNode,i=t[this.isLeftToRight()?t.length-1:0].domNode;return i.offsetLeft+i.offsetWidth-e.offsetLeft}return 0},_enableBtn:function(t){var e=this._getTabsWidth();return t=t||n.get(this.scrollNode,"width"),e>0&&t<e},resize:function(t){this._dim=t,this.scrollNode.style.height="auto";var e=this._contentBox=p.marginBox2contentBox(this.domNode,{h:0,w:t.w});e.h=this.scrollNode.offsetHeight,o.setContentSize(this.domNode,e);var i=this._enableBtn(this._contentBox.w);return this._buttons.style("display",i?"":"none"),this._leftBtn.region="left",this._rightBtn.region="right",this._menuBtn.region=this.isLeftToRight()?"right":"left",p.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]),this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab())),this._setButtonClass(this._getScroll()),this._postResize=!0,{h:this._contentBox.h,w:t.w}},_getScroll:function(){return this.isLeftToRight()||h("ie")<8||h("ie")&&h("quirks")||h("webkit")?this.scrollNode.scrollLeft:n.get(this.containerNode,"width")-n.get(this.scrollNode,"width")+(h("ie")>=8?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(t){if(this.isLeftToRight()||h("ie")<8||h("ie")&&h("quirks")||h("webkit"))return t;var e=n.get(this.containerNode,"width")-n.get(this.scrollNode,"width");return(h("ie")>=8?-1:1)*(t-e)},onSelectChild:function(t){var e=this.pane2button(t.id);if(e){var i=e.domNode;if(i!=this._selectedTab&&(this._selectedTab=i,this._postResize)){var o=this._getScroll();(o>i.offsetLeft||o+n.get(this.scrollNode,"width")<i.offsetLeft+n.get(i,"width"))&&this.createSmoothScroll().play()}this.inherited(arguments)}},_getScrollBounds:function(){var t=this.getChildren(),e=n.get(this.scrollNode,"width"),i=n.get(this.containerNode,"width"),o=i-e,s=this._getTabsWidth();if(t.length&&s>e)return{min:this.isLeftToRight()?0:t[t.length-1].domNode.offsetLeft,max:this.isLeftToRight()?t[t.length-1].domNode.offsetLeft+t[t.length-1].domNode.offsetWidth-e:o};var r=this.isLeftToRight()?0:o;return{min:r,max:r}},_getScrollForSelectedTab:function(){this.scrollNode;var t=this._selectedTab,e=n.get(this.scrollNode,"width"),i=this._getScrollBounds(),o=t.offsetLeft+n.get(t,"width")/2-e/2;return o=Math.min(Math.max(o,i.min),i.max)},createSmoothScroll:function(t){if(arguments.length>0){var e=this._getScrollBounds();t=Math.min(Math.max(t,e.min),e.max)}else t=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var i=this,o=this.scrollNode,n=new s.Animation({beforeBegin:function(){this.curve&&delete this.curve;var e=o.scrollLeft,r=i._convertToScrollLeft(t);n.curve=new s._Line(e,r)},onAnimate:function(t){o.scrollLeft=t}});return this._anim=n,this._setButtonClass(t),n},_getBtnNode:function(t){for(var e=t.target;e&&!i.contains(e,"tabStripButton");)e=e.parentNode;return e},doSlideRight:function(t){this.doSlide(1,this._getBtnNode(t))},doSlideLeft:function(t){this.doSlide(-1,this._getBtnNode(t))},doSlide:function(t,e){if(!e||!i.contains(e,"dijitTabDisabled")){var o=n.get(this.scrollNode,"width"),s=.75*o*t,r=this._getScroll()+s;this._setButtonClass(r),this.createSmoothScroll(r).play()}},_setButtonClass:function(t){var e=this._getScrollBounds();this._leftBtn.set("disabled",t<=e.min),this._rightBtn.set("disabled",t>=e.max)}}),C=e("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:u,tabIndex:"",isFocusable:function(){return!1}});return e("dijit.layout._ScrollingTabControllerButton",[b,C]),e("dijit.layout._ScrollingTabControllerMenuButton",[b,v,C],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(e){this.dropDown=new g({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var i=l.byId(this.containerId);t.forEach(i.getChildren(),function(t){var e=new _({id:t.id+"_stcMi",label:t.title,iconClass:t.iconClass,disabled:t.disabled,ownerDocument:this.ownerDocument,dir:t.dir,lang:t.lang,textDir:t.textDir||i.textDir,onClick:function(){i.selectChild(t)}});this.dropDown.addChild(e)},this),e()},closeDropDown:function(t){this.inherited(arguments),this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}}),y}),t("dijit/layout/TabContainer",["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(t,e,i,o,n){return e("dijit.layout.TabContainer",i,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(e){var i=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),o="string"==typeof this.controllerWidget?t.getObject(this.controllerWidget):this.controllerWidget;return new o({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,class:i,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},e)},postMixInProperties:function(){this.inherited(arguments),this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?o:n)}})}),t("dijit/dijit-all",["./main","./dijit","./ColorPalette","./Declaration","./Dialog","./DialogUnderlay","./TooltipDialog","./Editor","./_editor/plugins/FontChoice","./_editor/plugins/LinkDialog","./Menu","./MenuItem","./PopupMenuItem","./CheckedMenuItem","./MenuBar","./MenuBarItem","./PopupMenuBarItem","./MenuSeparator","./ProgressBar","./TitlePane","./Toolbar","./Tooltip","./Tree","./InlineEditBox","./form/Form","./form/Button","./form/DropDownButton","./form/ComboButton","./form/ToggleButton","./form/CheckBox","./form/RadioButton","./form/TextBox","./form/ValidationTextBox","./form/CurrencyTextBox","./form/DateTextBox","./form/TimeTextBox","./form/NumberSpinner","./form/NumberTextBox","./form/ComboBox","./form/FilteringSelect","./form/MultiSelect","./form/Select","./form/HorizontalSlider","./form/VerticalSlider","./form/HorizontalRule","./form/VerticalRule","./form/HorizontalRuleLabels","./form/VerticalRuleLabels","./form/SimpleTextarea","./form/Textarea","./layout/AccordionContainer","./layout/ContentPane","./layout/BorderContainer","./layout/LayoutContainer","./layout/LinkPane","./layout/SplitContainer","./layout/StackContainer","./layout/TabContainer"],function(t){return console.warn("dijit-all may include much more code than your application actually requires. We strongly recommend that you investigate a custom build or the web build tool"),t}),t("dijit/RadioMenuItem",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/query!css2","./CheckedMenuItem","./registry"],function(t,e,i,o,n,s){return e("dijit.RadioButtonMenuItem",n,{baseClass:"dijitMenuItem dijitRadioMenuItem",role:"menuitemradio",checkedChar:"*",group:"",_setGroupAttr:"domNode",_setCheckedAttr:function(e){this.inherited(arguments),this._created&&e&&this.group&&t.forEach(this._getRelatedWidgets(),function(t){t!=this&&t.checked&&t.set("checked",!1)},this)},_onClick:function(t){this.disabled||this.checked||(this.set("checked",!0),this.onChange(!0)),this.onClick(t)},_getRelatedWidgets:function(){var t=[];return o("[group="+this.group+"][role="+this.role+"]").forEach(function(e){var i=s.getEnclosingWidget(e);i&&t.push(i)}),t}})}),t("dijit/_editor/plugins/FullScreen",["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","../../focus","../_Plugin","../../form/ToggleButton","../../registry","dojo/i18n!../nls/commands"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m){var g=e("dijit._editor.plugins.FullScreen",f,{zIndex:500,_origState:null,_origiFrameState:null,_resizeHandle:null,isFullscreen:!1,toggle:function(){this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var t=s.getLocalization("dijit._editor","commands"),e=this.editor;this.button=new p({label:t.fullScreen,ownerDocument:e.ownerDocument,dir:e.dir,lang:e.lang,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"FullScreen",tabIndex:"-1",onChange:a.hitch(this,"_setFullScreen")})},setEditor:function(t){this.editor=t,this._initButton(),this.editor.addKeyHandler(r.F11,!0,!0,a.hitch(this,function(t){return this.toggle(),t.stopPropagation(),t.preventDefault(),this.editor.defer("focus",250),!0})),this.own(d(this.editor.domNode,"keydown",a.hitch(this,"_containFocus")))},_containFocus:function(t){if(this.isFullscreen){var e=this.editor;if(!e.isTabIndent&&e._fullscreen_oldOnKeyDown&&t.keyCode===r.TAB){var i=u.curNode,o=this._getAltViewNode();i==e.iframe||o&&i===o?setTimeout(a.hitch(this,function(){e.toolbar.focus()}),10):o&&"none"===n.get(e.iframe,"display")?setTimeout(a.hitch(this,function(){u.focus(o)}),10):setTimeout(a.hitch(this,function(){e.focus()}),10),event.stopPropagation(),event.preventDefault()}else e._fullscreen_oldOnKeyDown&&e._fullscreen_oldOnKeyDown(t)}},_resizeEditor:function(){var t=c.getBox(this.editor.ownerDocument);o.setMarginBox(this.editor.domNode,{w:t.w,h:t.h});var e=this.editor.getHeaderHeight(),i=this.editor.getFooterHeight(),n=o.getPadBorderExtents(this.editor.domNode),s=o.getPadBorderExtents(this.editor.iframe.parentNode),r=o.getMarginExtents(this.editor.iframe.parentNode),a=t.h-(e+n.h+i);o.setMarginBox(this.editor.iframe.parentNode,{h:a,w:t.w}),o.setMarginBox(this.editor.iframe,{h:a-(s.h+r.h)})},_getAltViewNode:function(){},_setFullScreen:function(e){var s=this.editor,r=s.ownerDocumentBody,l=s.domNode.parentNode,u=c.getBox(s.ownerDocument);if(this.isFullscreen=e,e){for(;l&&l!==r;)i.add(l,"dijitForceStatic"),l=l.parentNode;this._editorResizeHolder=this.editor.resize,s.resize=function(){},s._fullscreen_oldOnKeyDown=s.onKeyDown,s.onKeyDown=a.hitch(this,this._containFocus),this._origState={},this._origiFrameState={};var f=s.domNode,p=f&&f.style||{};this._origState={width:p.width||"",height:p.height||"",top:n.get(f,"top")||"",left:n.get(f,"left")||"",position:n.get(f,"position")||"static",marginBox:o.getMarginBox(s.domNode)};var g=s.iframe,_=g&&g.style||{},b=n.get(s.iframe,"backgroundColor");if(this._origiFrameState={backgroundColor:b||"transparent",width:_.width||"auto",height:_.height||"auto",zIndex:_.zIndex||""},n.set(s.domNode,{position:"absolute",top:"0px",left:"0px",zIndex:this.zIndex,width:u.w+"px",height:u.h+"px"}),n.set(s.iframe,{height:"100%",width:"100%",zIndex:this.zIndex,backgroundColor:"transparent"!==b&&"rgba(0, 0, 0, 0)"!==b?b:"white"}),n.set(s.iframe.parentNode,{height:"95%",width:"100%"}),r.style&&r.style.overflow?this._oldOverflow=n.get(r,"overflow"):this._oldOverflow="",h("ie")&&!h("quirks")){if(r.parentNode&&r.parentNode.style&&r.parentNode.style.overflow)this._oldBodyParentOverflow=r.parentNode.style.overflow;else try{this._oldBodyParentOverflow=n.get(r.parentNode,"overflow")}catch(t){this._oldBodyParentOverflow="scroll"}n.set(r.parentNode,"overflow","hidden")}n.set(r,"overflow","hidden");this._resizeHandle=d(window,"resize",a.hitch(this,function(){var t=c.getBox(s.ownerDocument);if("_prevW"in this&&"_prevH"in this){if(t.w===this._prevW&&t.h===this._prevH)return}else this._prevW=t.w,this._prevH=t.h;this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizer=setTimeout(a.hitch(this,function(){delete this._resizer,this._resizeEditor()}),10)})),this._resizeHandle2=t.after(s,"onResize",a.hitch(this,function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(a.hitch(this,function(){delete this._resizer,this._resizeEditor()}),10)})),this._resizeEditor();var v=this.editor.toolbar.domNode;setTimeout(function(){c.scrollIntoView(v)},250)}else{for(this._resizeHandle&&(this._resizeHandle.remove(),this._resizeHandle=null),this._resizeHandle2&&(this._resizeHandle2.remove(),this._resizeHandle2=null),this._rst&&(clearTimeout(this._rst),this._rst=null);l&&l!==r;)i.remove(l,"dijitForceStatic"),l=l.parentNode;if(this._editorResizeHolder&&(this.editor.resize=this._editorResizeHolder),!this._origState&&!this._origiFrameState)return;s._fullscreen_oldOnKeyDown&&(s.onKeyDown=s._fullscreen_oldOnKeyDown,delete s._fullscreen_oldOnKeyDown);var y=this;setTimeout(function(){var t=y._origState.marginBox,e=y._origState.height;h("ie")&&!h("quirks")&&(r.parentNode.style.overflow=y._oldBodyParentOverflow,delete y._oldBodyParentOverflow),n.set(r,"overflow",y._oldOverflow),delete y._oldOverflow,n.set(s.domNode,y._origState),n.set(s.iframe.parentNode,{height:"",width:""}),n.set(s.iframe,y._origiFrameState),delete y._origState,delete y._origiFrameState;var i=m.getEnclosingWidget(s.domNode.parentNode);i&&i.resize?i.resize():(!e||e.indexOf("%")<0)&&setTimeout(a.hitch(this,function(){s.resize({h:t.h})}),0),c.scrollIntoView(y.editor.toolbar.domNode)},100)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},destroy:function(){this._resizeHandle&&(this._resizeHandle.remove(),this._resizeHandle=null),this._resizeHandle2&&(this._resizeHandle2.remove(),this._resizeHandle2=null),this._resizer&&(clearTimeout(this._resizer),this._resizer=null),this.inherited(arguments)}});return f.registry.fullScreen=f.registry.fullscreen=function(t){return new g({zIndex:"zIndex"in t?t.zIndex:500})},g}),t("dijit/_editor/plugins/TabIndent",["dojo/_base/declare","dojo/_base/kernel","../_Plugin","../../form/ToggleButton"],function(t,e,i,o){e.experimental("dijit._editor.plugins.TabIndent");var n=t("dijit._editor.plugins.TabIndent",i,{useDefaultCommand:!1,buttonClass:o,command:"tabIndent",_initButton:function(){this.inherited(arguments);var t=this.editor;this.own(this.button.on("change",function(e){t.set("isTabIndent",e)})),this.updateState()},updateState:function(){var t=this.get("disabled");this.button.set("disabled",t),t||this.button.set("checked",this.editor.isTabIndent,!1)}});return i.registry.tabIndent=function(){return new n({command:"tabIndent"})},n}),t("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(t,e,i,o,n,s){var r=i("dijit._editor.plugins.TextColor",n,{buttonClass:s,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name,this.inherited(arguments);var e=this;this.button.loadDropDown=function(i){function o(t){e.button.dropDown=new t({dir:e.editor.dir,ownerDocument:e.editor.ownerDocument,value:e.value,onChange:function(t){e.editor.execCommand(e.command,t)},onExecute:function(){e.editor.execCommand(e.command,this.get("value"))}}),i()}"string"==typeof e.colorPicker?t([e.colorPicker],o):o(e.colorPicker)}},updateState:function(){var t=this.editor,i=this.command;if(t&&t.isLoaded&&i.length){if(this.button){var o,n=this.get("disabled");if(this.button.set("disabled",n),n)return;try{o=t.queryCommandValue(i)||""}catch(t){o=""}}""==o&&(o="#000000"),"transparent"==o&&(o="#ffffff"),"string"==typeof o?o.indexOf("rgb")>-1&&(o=e.fromRgb(o).toHex()):(o=(o=(255&o)<<16|65280&o|(16711680&o)>>>16).toString(16),o="#000000".slice(0,7-o.length)+o),this.value=o;var s=this.button.dropDown;s&&s.get&&o!==s.get("value")&&s.set("value",o,!1)}}});return n.registry.foreColor=function(t){return new r(t)},n.registry.hiliteColor=function(t){return new r(t)},r}),t("dijit/_editor/plugins/ViewSource",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/window","../../focus","../_Plugin","../../form/ToggleButton","../..","../../registry","dojo/i18n!../nls/commands"],function(t,e,i,o,n,s,r,a,d,h,l,c,u,f,p,m,g,_){var b=i("dijit._editor.plugins.ViewSource",p,{stripScripts:!0,stripComments:!0,stripIFrames:!0,readOnly:!1,_fsPlugin:null,toggle:function(){c("webkit")&&(this._vsFocused=!0),this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var t=a.getLocalization("dijit._editor","commands"),e=this.editor;this.button=new m({label:t.viewSource,ownerDocument:e.ownerDocument,dir:e.dir,lang:e.lang,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:h.hitch(this,"_showSource")}),7==c("ie")&&(this._ieFixNode=n.create("div",{style:{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}},e.ownerDocumentBody)),this.button.set("readOnly",!1)},setEditor:function(t){this.editor=t,this._initButton(),this.editor.addKeyHandler(d.F12,!0,!0,h.hitch(this,function(t){this.button.focus(),this.toggle(),t.stopPropagation(),t.preventDefault(),setTimeout(h.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(i){var o,n=this.editor,s=n._plugins;this._sourceShown=i;var a=this;try{if(this.sourceArea||this._createSourceView(),i){n._sourceQueryCommandEnabled=n.queryCommandEnabled,n.queryCommandEnabled=function(t){return"viewsource"===t.toLowerCase()},this.editor.onDisplayChanged(),o=n.get("value"),o=this._filter(o),n.set("value",o),t.forEach(s,function(t){!t||t instanceof b||!t.isInstanceOf(p)||t.set("disabled",!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return a.sourceArea}),this.sourceArea.value=o,this.sourceArea.style.height=n.iframe.style.height,this.sourceArea.style.width=n.iframe.style.width,r.set(n.iframe,"display","none"),r.set(this.sourceArea,{display:"block"});this._resizeHandle=l(window,"resize",h.hitch(this,function(){var t=u.getBox(n.ownerDocument);if("_prevW"in this&&"_prevH"in this){if(t.w===this._prevW&&t.h===this._prevH)return;this._prevW=t.w,this._prevH=t.h}else this._prevW=t.w,this._prevH=t.h;this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizer=setTimeout(h.hitch(this,function(){delete this._resizer,this._resize()}),10)})),setTimeout(h.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=h.hitch(this,function(){var t=this.sourceArea.value;return t=this._filter(t)}),this._setListener=e.after(this.editor,"setValue",h.hitch(this,function(t){t=t||"",t=this._filter(t),this.sourceArea.value=t}),!0)}else{if(!n._sourceQueryCommandEnabled)return;this._setListener.remove(),delete this._setListener,this._resizeHandle.remove(),delete this._resizeHandle,this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue),n.queryCommandEnabled=n._sourceQueryCommandEnabled,this._readOnly||(o=this.sourceArea.value,o=this._filter(o),n.beginEditing(),n.set("value",o),n.endEditing()),t.forEach(s,function(t){t&&t.isInstanceOf(p)&&t.set("disabled",!1)}),r.set(this.sourceArea,"display","none"),r.set(n.iframe,"display","block"),delete n._sourceQueryCommandEnabled,this.editor.onDisplayChanged()}setTimeout(h.hitch(this,function(){var t=n.domNode.parentNode;if(t){var e=_.getEnclosingWidget(t);e&&e.resize&&e.resize()}n.resize()}),300)}catch(t){console.log(t)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var t=this.editor,e=t.getHeaderHeight(),i=t.getFooterHeight(),o=s.position(t.domNode),n=s.getPadBorderExtents(t.iframe.parentNode),r=s.getMarginExtents(t.iframe.parentNode),a=s.getPadBorderExtents(t.domNode),d={w:o.w-a.w,h:o.h-(e+a.h+i)};if(this._fsPlugin&&this._fsPlugin.isFullscreen){var h=u.getBox(t.ownerDocument);d.w=h.w-a.w,d.h=h.h-(e+a.h+i)}if(c("ie")&&(d.h-=2),this._ieFixNode){var l=-this._ieFixNode.offsetTop/1e3;d.w=Math.floor((d.w+.9)/l),d.h=Math.floor((d.h+.9)/l)}s.setMarginBox(this.sourceArea,{w:d.w-(n.w+r.w),h:d.h-(n.h+r.h)}),s.setMarginBox(t.iframe.parentNode,{h:d.h})},_createSourceView:function(){var t=this.editor,e=t._plugins;this.sourceArea=n.create("textarea"),this.readOnly&&(o.set(this.sourceArea,"readOnly",!0),this._readOnly=!0),r.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"}),o.set(this.sourceArea,"aria-label",this.editor.id),n.place(this.sourceArea,t.iframe,"before"),c("ie")&&t.iframe.parentNode.lastChild!==t.iframe&&r.set(t.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"}),t._viewsource_oldFocus=t.focus;var i,s,a=this;for(t.focus=function(){if(a._sourceShown)a.setSourceAreaCaret();else try{this._vsFocused?(delete this._vsFocused,f.focus(t.editNode)):t._viewsource_oldFocus()}catch(t){console.log(t)}},i=0;i<e.length;i++)if((s=e[i])&&("dijit._editor.plugins.FullScreen"===s.declaredClass||s.declaredClass===g._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=s;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return a._sourceShown?a.sourceArea:this._viewsource_getAltViewNode()}),this.own(l(this.sourceArea,"keydown",h.hitch(this,function(e){this._sourceShown&&e.keyCode==d.F12&&e.ctrlKey&&e.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(h.hitch(this,function(){t.focus()}),100),e.stopPropagation(),e.preventDefault())})))},_stripScripts:function(t){return t&&(t=(t=(t=t.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/gi,"")).replace(/<\s*script\b([^<>]|\s)*>?/gi,"")).replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/gi,"")),t},_stripComments:function(t){return t&&(t=t.replace(/<!--(.|\s){1,}?-->/g,"")),t},_stripIFrames:function(t){return t&&(t=t.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/gi,"")),t},_filter:function(t){return t&&(this.stripScripts&&(t=this._stripScripts(t)),this.stripComments&&(t=this._stripComments(t)),this.stripIFrames&&(t=this._stripIFrames(t))),t},setSourceAreaCaret:function(){var t=this.sourceArea;if(f.focus(t),this._sourceShown&&!this.readOnly)if(t.setSelectionRange)t.setSelectionRange(0,0);else if(this.sourceArea.createTextRange){var e=t.createTextRange();e.collapse(!0),e.moveStart("character",-99999),e.moveStart("character",0),e.moveEnd("character",0),e.select()}},destroy:function(){this._ieFixNode&&n.destroy(this._ieFixNode),this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle),this._setListener&&(this._setListener.remove(),delete this._setListener),this.inherited(arguments)}});return p.registry.viewSource=p.registry.viewsource=function(t){return new b({readOnly:"readOnly"in t&&t.readOnly,stripComments:!("stripComments"in t)||t.stripComments,stripScripts:!("stripScripts"in t)||t.stripScripts,stripIFrames:!("stripIFrames"in t)||t.stripIFrames})},b}),t("dijit/layout/AccordionPane",["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(t,e,i){return t("dijit.layout.AccordionPane",i,{constructor:function(){e.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})}),t("dijit/tree/ObjectStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/_base/lang","dojo/when","../Destroyable"],function(t,e,i,o,n,s,r){return i("dijit.tree.ObjectStoreModel",r,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(t){n.mixin(this,t),this.childrenCache={}},getRoot:function(t,e){if(this.root)t(this.root);else{var i=this.store.query(this.query);i.then&&this.own(i),s(i,n.hitch(this,function(e){if(1!=e.length)throw new Error("dijit.tree.ObjectStoreModel: root query returned "+e.length+" items, but must return exactly one");this.root=e[0],t(this.root),i.observe&&i.observe(n.hitch(this,function(t){this.onChange(t)}),!0)}),e)}},mayHaveChildren:function(){return!0},getChildren:function(t,e,i){var o=this.store.getIdentity(t);if(this.childrenCache[o])s(this.childrenCache[o],e,i);else{var r=this.childrenCache[o]=this.store.getChildren(t);r.then&&this.own(r),r.observe&&this.own(r.observe(n.hitch(this,function(e,i,o){this.onChange(e),i!=o&&s(r,n.hitch(this,"onChildrenChange",t))}),!0)),s(r,e,i)}},isItem:function(){return!0},getIdentity:function(t){return this.store.getIdentity(t)},getLabel:function(t){return t[this.labelAttr]},newItem:function(t,e,i,o){return this.store.put(t,{parent:e,before:o})},pasteItem:function(e,i,s,r,a,d){var h=new o;return i!==s||r||d?(i&&!r?this.getChildren(i,n.hitch(this,function(o){o=[].concat(o);var n=t.indexOf(o,e);o.splice(n,1),this.onChildrenChange(i,o),h.resolve(this.store.put(e,{overwrite:!0,parent:s,oldParent:i,before:d}))})):h.resolve(this.store.put(e,{overwrite:!0,parent:s,oldParent:i,before:d})),h):(h.resolve(!0),h)},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})}),t("dijit/main",["dojo/_base/kernel","dijit/dijit-all","dijit/RadioMenuItem","dijit/_editor/plugins/FullScreen","dijit/_editor/plugins/TabIndent","dijit/_editor/plugins/TextColor","dijit/_editor/plugins/ViewSource","dijit/layout/AccordionPane","dijit/tree/ObjectStoreModel"],function(t){return t.dijit}),t("dijit",["dijit/main"],function(t){return t})}(i,o),!n){var a=o("skylark-langx/skylark");s?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/dijit.js.map
